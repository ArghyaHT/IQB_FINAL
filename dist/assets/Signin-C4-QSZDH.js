import{f as $,r as n,a as z,b as C,u as j,d as I,c as L,j as e,E as R,N as D,L as A,H as G,_ as c,e as K}from"./index-smej7xwq.js";import{B as q,a as H}from"./AuthAction-CntHCeqo.js";import{B as M}from"./ButtonLoader-BLdiC7PJ.js";const O="_barber_signin_container_4keon_1",F="_barber_signin_left_4keon_8",U="_barber_signin_right_4keon_24",V="_homeicon_4keon_71",W="_password_container_4keon_105",Y="_signin_btn_4keon_160",J="_error_message_4keon_217",Q="_google_btn_4keon_224",T="_dark_4keon_272",r={barber_signin_container:O,barber_signin_left:F,barber_signin_right:U,homeicon:V,password_container:W,signin_btn:Y,error_message:J,google_btn:Q,dark:T},ne=()=>{const k=$(),_=new URLSearchParams(k.search).get("email");n.useEffect(()=>{_&&b(_)},[]);const[o,b]=n.useState(""),[a,v]=n.useState(""),m=z(),i=C(),[u,y]=n.useState(!1),w=()=>{i("/barberforgotpassword")},[h,l]=n.useState(""),[f,d]=n.useState(""),S=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,x=()=>{if(!o)return c.error("Please enter email",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),l("Please enter email");if(!S.test(o))return c.error("Invalid email format",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),l("Invalid email format");if(!a)return c.error("Please enter password",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),d("Please enter password");if(a.length<8)return c.error("Password length must be 8 charecters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),d("Password length must be 8 charecters");m(q({email:o,password:a},i))},p=s=>{s.key==="Enter"&&x()},E=j(s=>s.BarberSignin),{loading:P}=E,t=j(I)==="On",N=L({onSuccess:async s=>{try{const{access_token:g}=s,B=await K.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${g}`}});m(H(B.data.email,i))}catch(g){console.error("Error fetching user info:",g)}}});return e.jsxs("main",{className:`${r.barber_signin_container} ${t&&r.dark}`,children:[e.jsx("div",{className:r.barber_signin_left,children:e.jsx("img",{src:"./signin_un.png",alt:"barber_signin"})}),e.jsxs("div",{className:`${r.barber_signin_right} ${t&&r.dark}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Sign In to your Barber Account"}),e.jsx("p",{children:"Welcome back Barber! please enter your details"}),e.jsxs("div",{children:[e.jsx("input",{type:"email",placeholder:"Enter Your Email ID",value:o,onChange:s=>{l(""),b(s.target.value)},onKeyDown:p,style:{border:h?"0.1rem solid red":void 0}}),e.jsx("p",{className:r.error_message,children:h})]}),e.jsxs("div",{children:[e.jsxs("div",{className:`${r.password_container} ${t&&r.dark}`,style:{border:f?"0.1rem solid red":void 0},children:[e.jsx("input",{type:u?"text":"password",placeholder:"Password",value:a,onChange:s=>{d(""),v(s.target.value)},onKeyDown:p}),e.jsx("div",{onClick:()=>y(s=>!s),children:u?e.jsx(R,{}):e.jsx(D,{})})]}),e.jsx("p",{className:r.error_message,children:f})]}),e.jsx("div",{children:e.jsx("p",{onClick:w,children:"Forgot Password ?"})}),P?e.jsx("button",{style:{display:"grid",placeItems:"center"},className:r.signin_btn,children:e.jsx(M,{})}):e.jsx("button",{onClick:x,className:r.signin_btn,children:"Signin"}),e.jsxs("div",{children:[e.jsx("div",{}),e.jsx("p",{children:"or"}),e.jsx("div",{})]}),e.jsx("button",{onClick:()=>N(),className:`${r.google_btn} ${t&&r.dark}`,children:e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("img",{src:"/google_logo.png",alt:"logo"})}),e.jsx("p",{children:"Sign in with Google"})]})}),e.jsxs("p",{children:["Don't you have an account ? ",e.jsx(A,{to:"/barbersignup",children:"Sign up"})]})]}),e.jsx("div",{className:r.homeicon,onClick:()=>i("/"),children:e.jsx(G,{})})]})]})};export{ne as default};
