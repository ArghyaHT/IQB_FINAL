import{u as ce,b as l,r as t,d as le,j as e,aA as de,a1 as _e,o as he,a6 as be,_ as ve}from"./index-DDukCDKF.js";import{S}from"./index-CuvRRW2h.js";import{j as D,R,B as A,a as T}from"./BarChart-DWJzSOsd.js";import{B as me}from"./ButtonLoader-BzxIs721.js";import{c as ue,b as je,a as xe}from"./DashboardAction-WKBKPeos.js";import{g as pe}from"./BarberQueueAction-DyJChqny.js";import{h as ge}from"./SalonAction-CAExFTy5.js";import"./index-BkCjIGOe.js";import"./clsx-B-dksMZM.js";import"./index-8JwjhRSi.js";const ye="_barber_connect_salon_container_1bnvr_1",Se="_barber_connect_salon_list_container_1bnvr_21",fe="_barber_connect_salon_list_1bnvr_21",Ne="_barber_connect_salon_list_header_1bnvr_49",ke="_barber_connect_salon_list_body_1bnvr_89",Ce="_barber_connect_salon_list_error_1bnvr_137",Ie="_barber_approve_container_1bnvr_147",we="_add_connect_btn_1bnvr_193",Re="_check_connect_btn_1bnvr_219",Ae="_barber_list_services_list_1bnvr_248",Te="_service_item_1bnvr_268",Ee="_service_add_icon_1bnvr_284",Be="_service_delete_icon_1bnvr_315",Me="_service_item_top_1bnvr_346",We="_service_item_bottom_1bnvr_401",qe="_connect_btn_1bnvr_483",Le="_dashboard_body_1bnvr_512",De="_inner_container_1bnvr_518",$e="_dashboard_container_one_1bnvr_526",Oe="_saloninfo_container_1bnvr_530",Fe="_salonadv_container_loader_1bnvr_571",He="_salonadv_container_error_1bnvr_583",Qe="_salonadv_container_1bnvr_571",Ke="_dashboard_advertise_loader_1bnvr_623",Pe="_carousel_item_container_1bnvr_634",Ye="_barber_report_container_1bnvr_651",Ge="_report_container_1bnvr_661",Ve="_r_chart_1bnvr_673",ze="_dashboard_container_two_1bnvr_727",Je="_queuelists_container_1bnvr_731",Ue="_queue_header_1bnvr_743",Xe="_queue_body_loading_1bnvr_769",Ze="_queue_body_error_1bnvr_774",er="_queue_body_1bnvr_769",rr="_queue_item_1bnvr_792",nr="_barberitem_header_1bnvr_862",or="_barberitem_1bnvr_862",n={barber_connect_salon_container:ye,barber_connect_salon_list_container:Se,barber_connect_salon_list:fe,barber_connect_salon_list_header:Ne,barber_connect_salon_list_body:ke,barber_connect_salon_list_error:Ce,barber_approve_container:Ie,add_connect_btn:we,check_connect_btn:Re,barber_list_services_list:Ae,service_item:Te,service_add_icon:Ee,service_delete_icon:Be,service_item_top:Me,service_item_bottom:We,connect_btn:qe,dashboard_body:Le,inner_container:De,dashboard_container_one:$e,saloninfo_container:Oe,salonadv_container_loader:Fe,salonadv_container_error:He,salonadv_container:Qe,dashboard_advertise_loader:Ke,carousel_item_container:Pe,barber_report_container:Ye,report_container:Ge,r_chart:Ve,dashboard_container_two:ze,queuelists_container:Je,queue_header:Ue,queue_body_loading:Xe,queue_body_error:Ze,queue_body:er,queue_item:rr,barberitem_header:nr,barberitem:or},jr=()=>{var M,W,q,L;const v=ce(),h=l(r=>{var o;return(o=r.BarberLoggedInMiddleware)==null?void 0:o.barberSalonId}),$=l(r=>{var o;return(o=r.BarberLoggedInMiddleware)==null?void 0:o.barberEmail}),O=l(r=>{var o;return(o=r.BarberLoggedInMiddleware)==null?void 0:o.barberName}),F=l(r=>{var o;return(o=r.BarberLoggedInMiddleware)==null?void 0:o.barberId}),a=l(r=>{var o;return(o=r.BarberLoggedInMiddleware)==null?void 0:o.entiredata});t.useEffect(()=>{var r;((r=a==null?void 0:a.user[0])==null?void 0:r.isApproved)==!1&&v(ue())},[a]);const E=(r,o)=>(r==null?void 0:r.length)<=o?r:(r==null?void 0:r.slice(0,o))+"...",i=l(le)==="On",H=l(r=>r.connectSalonList),{loading:x,resolve:p,response:c}=H,[b,Q]=t.useState(""),[f,K]=t.useState({});t.useEffect(()=>{if(b){const r=c==null?void 0:c.find(o=>o.salonId===b);K(r)}},[b]);const[N,k]=t.useState([]),[P,Y]=t.useState([]);t.useEffect(()=>{var r;if(b){const o=(r=c.find(s=>s.salonId===b))==null?void 0:r.services;k(o),Y(o),y([])}},[b]);const[g,y]=t.useState([]),G=r=>{y([...g,{...r,barberServiceEWT:Number(r.serviceEWT),serviceEWT:Number(r.serviceEWT)}])},V=r=>{k(o=>o.map(d=>{if(d.serviceId===r.serviceId){const j=P.find(_=>_.serviceId===d.serviceId);return{...d,serviceEWT:(j==null?void 0:j.serviceEWT)||d.serviceEWT}}return d})),y(o=>o.filter(s=>s._id!==r._id))},z=(r,o)=>{const s=o.replace(/[^0-9]/g,"");k(d=>d.map(_=>_.serviceId===r?{..._,serviceEWT:Number(s)}:_)),y(d=>d.map(_=>_.serviceId===r?{..._,barberServiceEWT:Number(s),serviceEWT:Number(s)}:_))},J=()=>{if(g.length===0)return ve.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});v(xe({barberServices:g,email:$,salonId:b}))},U=l(r=>r.barberConnectSalon),{loading:X,resolve:sr,message:tr}=U,C=t.useRef(new AbortController);t.useEffect(()=>{var r;if((r=a==null?void 0:a.user[0])!=null&&r.isApproved){const o=new AbortController;return C.current=o,v(pe(h,F,o.signal)),()=>{C.current&&C.current.abort()}}},[h,v]);const Z=l(r=>r.getBarberQueueList),{loading:ee,resolve:re,queueList:u}=Z;t.useState(new Date);const I=t.useRef(new AbortController);t.useEffect(()=>{var r;if((r=a==null?void 0:a.user[0])!=null&&r.isApproved&&h!=0){const o=new AbortController;return I.current=o,v(je(h,o.signal)),()=>{I.current&&I.current.abort()}}},[h,v,a]);const ne=l(r=>r.barberDashboardSalonInfo),{loading:oe,resolve:ae,response:B}=ne;t.useEffect(()=>{var r;(r=a==null?void 0:a.user[0])!=null&&r.isApproved&&h!=0&&v(ge(h))},[h,a]);const se=l(r=>r.getAdminSalonImages),{loading:te,resolve:ie,response:m}=se;t.useState(!1);const w=[{name:"Page A",uv:4e3,pv:2400,amt:2400},{name:"Page B",uv:3e3,pv:1398,amt:2210},{name:"Page C",uv:2e3,pv:9800,amt:2290},{name:"Page D",uv:2780,pv:3908,amt:2e3},{name:"Page E",uv:1890,pv:4800,amt:2181},{name:"Page F",uv:2390,pv:3800,amt:2500},{name:"Page G",uv:3490,pv:4300,amt:2100}];return l(r=>r.adminGetDefaultSalon),(M=a==null?void 0:a.user[0])!=null&&M.isApproved?e.jsx(e.Fragment,{children:e.jsx("main",{className:n.dashboard,children:e.jsx("main",{className:n.dashboard_body,children:e.jsxs("div",{className:n.inner_container,children:[e.jsxs("div",{className:n.dashboard_container_one,children:[e.jsxs("div",{className:n.saloninfo_container,children:[e.jsx("div",{children:e.jsxs("h2",{children:["Welcome Back, ",E(O,11)]})}),e.jsx("div",{children:oe?e.jsx("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",paddingInline:"1rem"},children:e.jsx(S,{count:1,height:"4rem",style:{borderRadius:"0.3rem"},baseColor:i?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:i?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):ae&&B?e.jsx("i",{children:E(B,200)}):e.jsx("i",{children:"You currently have no salon information"})})]}),te?e.jsx("div",{className:n.salonadv_container_loader,children:e.jsx(S,{count:1,className:n.dashboard_advertise_loader,style:{borderRadius:"0.6vw"},baseColor:i?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:i?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):ie&&(m==null?void 0:m.length)>0?e.jsx("div",{className:n.salonadv_container,children:e.jsx(D.Carousel,{showThumbs:!1,infiniteLoop:!0,autoPlay:!0,interval:5e3,showStatus:!1,showArrows:!1,stopOnHover:!1,swipeable:!1,children:(W=m==null?void 0:m.slice(0,5))==null?void 0:W.map(r=>e.jsx("div",{className:n.carousel_item_container,children:e.jsx("img",{src:r.url,alt:"image_item"})},r._id))})}):e.jsx("div",{className:n.salonadv_container_error,children:e.jsx("img",{src:"./no-image.jpg",alt:"no_image"})}),e.jsx("div",{className:n.barber_report_container,children:e.jsx("div",{className:n.report_container,children:e.jsxs(D.Carousel,{showThumbs:!1,infiniteLoop:!0,autoPlay:!0,interval:5e3,showStatus:!1,showArrows:!1,stopOnHover:!0,swipeable:!0,renderIndicator:!1,children:[e.jsxs("div",{className:n.r_chart,children:[e.jsx("p",{children:"Report-Type One"}),e.jsx("div",{children:e.jsx(R,{width:"100%",height:"90%",style:{},children:e.jsx(A,{width:150,height:40,data:w,children:e.jsx(T,{dataKey:"uv",fill:"rgba(255, 0, 0, 0.393)",stroke:"#000000",strokeWidth:1})})})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Monthly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Weekly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Daily Report"})]})]})]}),e.jsxs("div",{className:n.r_chart,children:[e.jsx("p",{children:"Report-Type Two"}),e.jsx("div",{children:e.jsx(R,{width:"100%",height:"90%",style:{},children:e.jsx(A,{width:150,height:40,data:w,children:e.jsx(T,{dataKey:"uv",fill:"rgba(255, 149, 0, 0.419)",stroke:"#000000",strokeWidth:1})})})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Monthly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Weekly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Daily Report"})]})]})]}),e.jsxs("div",{className:n.r_chart,children:[e.jsx("p",{children:"Report-Type Three"}),e.jsx("div",{children:e.jsx(R,{width:"100%",height:"90%",style:{},children:e.jsx(A,{width:150,height:40,data:w,children:e.jsx(T,{dataKey:"uv",fill:"rgba(0, 0, 255, 0.438)",stroke:"#000000",strokeWidth:1})})})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Monthly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Weekly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Daily Report"})]})]})]})]})})})]}),e.jsx("div",{className:n.dashboard_container_two,children:e.jsxs("div",{className:n.queuelists_container,children:[e.jsxs("div",{className:n.queue_header,children:[e.jsx("div",{children:e.jsx("p",{children:"#"})}),e.jsx("div",{children:e.jsx("p",{children:"Name"})}),e.jsx("div",{children:e.jsx("p",{children:"Barber"})}),e.jsx("div",{children:e.jsx("p",{children:"EWT"})})]}),ee?e.jsx("div",{className:n.queue_body_loading,children:e.jsx(S,{count:7,height:"6rem",style:{marginBottom:"1rem"},baseColor:i?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:i?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):re&&(u==null?void 0:u.length)>0?e.jsx("div",{className:n.queue_body,children:u.map((r,o)=>e.jsxs("div",{className:n.queue_item,style:{borderBottom:o===u.length-1?"none":"1px solid rgba(0, 0, 0, 0.2)"},children:[e.jsx("div",{children:e.jsx("p",{children:r.qPosition})}),e.jsx("div",{children:e.jsx("p",{children:r.name.length>6?`${r.name.slice(0,6).concat("...")}`:r.name})}),e.jsx("div",{children:e.jsx("p",{children:r.barberName.length>6?`${r.barberName.slice(0,6).concat("...")}`:r.barberName})}),e.jsx("div",{children:e.jsxs("p",{children:[r.customerEWT," mins"]})})]},r._id))}):e.jsx("div",{className:n.queue_body_error,children:e.jsx("p",{children:"No queuelist available"})})]})})]})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${n.barber_connect_salon_container} ${i&&n.dark}`,children:[e.jsx("p",{children:"Connect To Your Salon"}),(q=a==null?void 0:a.user[0])!=null&&q.approvePendingMessage?e.jsx("div",{className:n.barber_approve_container,children:e.jsxs("div",{children:[e.jsx("p",{style:{color:i?"var(--primary-text-light-color1)":"var(--primary-text-light-color2)"},children:(L=a==null?void 0:a.user[0])==null?void 0:L.approvePendingMessage}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload"})]})}):e.jsxs("div",{className:`${n.barber_connect_salon_list_container} ${i&&n.dark}`,children:[e.jsxs("div",{className:`${n.barber_connect_salon_list} ${i&&n.dark}`,children:[e.jsx("p",{children:"Choose Your Salon"}),e.jsxs("div",{children:[e.jsxs("div",{className:n.barber_connect_salon_list_header,children:[e.jsx("p",{children:"Salon Logo"}),e.jsx("p",{children:"Salon Name"}),e.jsx("p",{children:"Select"})]}),x&&!p?e.jsx(e.Fragment,{children:e.jsx(S,{count:4,height:"5rem",style:{marginBottom:"1rem"},baseColor:i?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:i?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):!x&&p&&(c==null?void 0:c.length)>0?c==null?void 0:c.map(r=>{var o,s;return e.jsxs("div",{className:n.barber_connect_salon_list_body,children:[e.jsx("div",{children:e.jsx("img",{src:(s=(o=r==null?void 0:r.salonLogo)==null?void 0:o[0])==null?void 0:s.url,alt:"salon_logo"})}),e.jsx("p",{children:r.salonName}),e.jsx("div",{children:b==r.salonId?e.jsx("button",{className:n.check_connect_btn,children:e.jsx(de,{})}):e.jsx("button",{className:n.add_connect_btn,onClick:()=>Q(r.salonId),children:"+"})})]},r._id)}):!x&&p&&(c==null?void 0:c.length)==0?e.jsx("div",{className:n.barber_connect_salon_list_error,children:e.jsx("p",{children:"No Salons Available"})}):!x&&p&&e.jsx("div",{className:n.barber_connect_salon_list_error,children:e.jsx("p",{children:"No Salons Available"})})]})]}),e.jsxs("div",{className:`${n.barber_list_services_list} ${i&&n.dark}`,children:[e.jsx("p",{children:"List of Services"}),e.jsx("div",{children:N==null?void 0:N.map(r=>{var o;return e.jsxs("div",{className:`${n.service_item}`,children:[e.jsxs("div",{className:`${n.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(o=r==null?void 0:r.serviceIcon)==null?void 0:o.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${n.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[f==null?void 0:f.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(_e,{})}),e.jsx("input",{type:"text",value:r==null?void 0:r.serviceEWT,onChange:s=>z(r==null?void 0:r.serviceId,s.target.value)}),e.jsx("p",{children:"mins"})]})]})})]}),g.some(s=>s._id===(r==null?void 0:r._id))?e.jsx("button",{className:`${n.service_delete_icon}`,onClick:()=>V(r),children:e.jsx(he,{})}):e.jsx("button",{className:`${n.service_add_icon}`,onClick:()=>G(r),children:e.jsx(be,{})})]},r._id)})})]}),e.jsx("div",{children:X?e.jsx("button",{style:{display:"grid",placeItems:"center"},className:n.connect_btn,children:e.jsx(me,{})}):e.jsx("button",{onClick:J,className:n.connect_btn,children:"Connect Salon"})})]})]})})};export{jr as default};
