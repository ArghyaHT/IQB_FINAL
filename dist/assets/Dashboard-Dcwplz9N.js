import{u as re,b as l,r as s,d as ne,j as e,aI as oe,a5 as ae,o as se,ab as ce}from"./index-ChGKHjTm.js";import{S as x}from"./index-Dt1ZOVz1.js";import{j as q,R as k,B as C,a as I}from"./BarChart-C-AWmkWf.js";import{B as ie}from"./ButtonLoader-B0Wng9qo.js";import{c as te,b as le,a as de}from"./DashboardAction-DwvNmcl8.js";import{g as _e}from"./BarberQueueAction-Cs1GJ41e.js";import{i as he}from"./SalonAction-Dz6Sl11N.js";import"./index-BEFeMIXM.js";import"./clsx-B-dksMZM.js";import"./index-8JwjhRSi.js";const be="_barber_connect_salon_container_j0gc0_1",ve="_barber_connect_salon_list_container_j0gc0_21",je="_barber_connect_salon_list_j0gc0_21",me="_barber_connect_salon_list_header_j0gc0_49",ge="_barber_connect_salon_list_body_j0gc0_89",xe="_barber_connect_salon_list_error_j0gc0_137",ue="_barber_approve_container_j0gc0_147",pe="_add_connect_btn_j0gc0_193",ye="_check_connect_btn_j0gc0_219",Se="_barber_list_services_list_j0gc0_248",fe="_service_item_j0gc0_268",Ne="_service_add_icon_j0gc0_284",ke="_service_delete_icon_j0gc0_315",Ce="_service_item_top_j0gc0_346",Ie="_service_item_bottom_j0gc0_401",we="_connect_btn_j0gc0_469",Re="_dashboard_body_j0gc0_498",Ae="_inner_container_j0gc0_504",Me="_dashboard_container_one_j0gc0_512",Be="_saloninfo_container_j0gc0_516",qe="_salonadv_container_loader_j0gc0_557",Te="_salonadv_container_error_j0gc0_569",Le="_salonadv_container_j0gc0_557",De="_dashboard_advertise_loader_j0gc0_609",Ee="_carousel_item_container_j0gc0_620",We="_barber_report_container_j0gc0_637",$e="_report_container_j0gc0_647",Oe="_r_chart_j0gc0_659",Fe="_dashboard_container_two_j0gc0_713",He="_queuelists_container_j0gc0_717",Qe="_queue_header_j0gc0_729",Ke="_queue_body_loading_j0gc0_755",Ye="_queue_body_error_j0gc0_759",Ge="_queue_body_j0gc0_755",Pe="_queue_item_j0gc0_777",Ve="_barberitem_header_j0gc0_847",ze="_barberitem_j0gc0_847",n={barber_connect_salon_container:be,barber_connect_salon_list_container:ve,barber_connect_salon_list:je,barber_connect_salon_list_header:me,barber_connect_salon_list_body:ge,barber_connect_salon_list_error:xe,barber_approve_container:ue,add_connect_btn:pe,check_connect_btn:ye,barber_list_services_list:Se,service_item:fe,service_add_icon:Ne,service_delete_icon:ke,service_item_top:Ce,service_item_bottom:Ie,connect_btn:we,dashboard_body:Re,inner_container:Ae,dashboard_container_one:Me,saloninfo_container:Be,salonadv_container_loader:qe,salonadv_container_error:Te,salonadv_container:Le,dashboard_advertise_loader:De,carousel_item_container:Ee,barber_report_container:We,report_container:$e,r_chart:Oe,dashboard_container_two:Fe,queuelists_container:He,queue_header:Qe,queue_body_loading:Ke,queue_body_error:Ye,queue_body:Ge,queue_item:Pe,barberitem_header:Ve,barberitem:ze},lr=()=>{var A,M,B;const h=re(),d=l(r=>r.BarberLoggedInMiddleware.barberSalonId),T=l(r=>r.BarberLoggedInMiddleware.barberEmail),L=l(r=>r.BarberLoggedInMiddleware.barberName),D=l(r=>r.BarberLoggedInMiddleware.barberId),o=l(r=>r.BarberLoggedInMiddleware.entiredata);s.useEffect(()=>{var r;((r=o==null?void 0:o.user[0])==null?void 0:r.isApproved)==!1&&h(te())},[o]);const w=(r,a)=>(r==null?void 0:r.length)<=a?r:(r==null?void 0:r.slice(0,a))+"...",c=l(ne)==="On",E=l(r=>r.connectSalonList),{loading:v,resolve:j,response:i}=E,[_,W]=s.useState(""),[u,$]=s.useState({});s.useEffect(()=>{if(_){const r=i==null?void 0:i.find(a=>a.salonId===_);$(r)}},[_]);const[p,O]=s.useState([]);s.useEffect(()=>{var r;if(_){const a=(r=i.find(t=>t.salonId===_))==null?void 0:r.services;O(a),y([])}},[_]);const[m,y]=s.useState([]),F=r=>{if(!m.find(t=>t._id===r._id)){const t={...r,barberServiceEWT:Number(r.serviceEWT)};y([...m,t])}},H=r=>{y(a=>a.filter(t=>t._id!==r._id))},Q=()=>{h(de({barberServices:m,email:T,salonId:_}))},K=l(r=>r.barberConnectSalon),{loading:Y,resolve:Ue,message:Xe}=K,S=s.useRef(new AbortController);s.useEffect(()=>{var r;if((r=o==null?void 0:o.user[0])!=null&&r.isApproved){const a=new AbortController;return S.current=a,h(_e(d,D,a.signal)),()=>{S.current&&S.current.abort()}}},[d,h]);const G=l(r=>r.getBarberQueueList),{loading:P,resolve:V,queueList:b}=G;s.useState(new Date);const f=s.useRef(new AbortController);s.useEffect(()=>{var r;if((r=o==null?void 0:o.user[0])!=null&&r.isApproved&&d!=0){const a=new AbortController;return f.current=a,h(le(d,a.signal)),()=>{f.current&&f.current.abort()}}},[d,h,o]);const z=l(r=>r.barberDashboardSalonInfo),{loading:J,resolve:U,response:R}=z;s.useEffect(()=>{var r;(r=o==null?void 0:o.user[0])!=null&&r.isApproved&&d!=0&&h(he(d))},[d,o]);const X=l(r=>r.getAdminSalonImages),{loading:Z,resolve:ee,response:g}=X;s.useState(!1);const N=[{name:"Page A",uv:4e3,pv:2400,amt:2400},{name:"Page B",uv:3e3,pv:1398,amt:2210},{name:"Page C",uv:2e3,pv:9800,amt:2290},{name:"Page D",uv:2780,pv:3908,amt:2e3},{name:"Page E",uv:1890,pv:4800,amt:2181},{name:"Page F",uv:2390,pv:3800,amt:2500},{name:"Page G",uv:3490,pv:4300,amt:2100}];return l(r=>r.adminGetDefaultSalon),(A=o==null?void 0:o.user[0])!=null&&A.isApproved?e.jsx(e.Fragment,{children:e.jsx("main",{className:n.dashboard,children:e.jsx("main",{className:n.dashboard_body,children:e.jsxs("div",{className:n.inner_container,children:[e.jsxs("div",{className:n.dashboard_container_one,children:[e.jsxs("div",{className:n.saloninfo_container,children:[e.jsx("div",{children:e.jsxs("h2",{children:["Welcome Back, ",w(L,11)]})}),e.jsx("div",{children:J?e.jsx("div",{style:{width:"100%",height:"100%",alignContent:"center",paddingTop:"1rem"},children:e.jsx(x,{count:1,height:"6rem",style:{borderRadius:"0.3rem"},baseColor:c?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:c?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):U&&R?e.jsx("i",{children:w(R,200)}):e.jsx("i",{children:"You currently have no salon information"})})]}),Z?e.jsx("div",{className:n.salonadv_container_loader,children:e.jsx(x,{count:1,className:n.dashboard_advertise_loader,style:{borderRadius:"0.6vw"},baseColor:c?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:c?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):ee&&(g==null?void 0:g.length)>0?e.jsx("div",{className:n.salonadv_container,children:e.jsx(q.Carousel,{showThumbs:!1,infiniteLoop:!0,autoPlay:!0,interval:5e3,showStatus:!1,showArrows:!1,stopOnHover:!1,swipeable:!1,children:g.map(r=>e.jsx("div",{className:n.carousel_item_container,children:e.jsx("img",{src:r.url,alt:"image_item"})},r._id))})}):e.jsx("div",{className:n.salonadv_container_error,children:e.jsx("img",{src:"./no-image.jpg",alt:"no_image"})}),e.jsx("div",{className:n.barber_report_container,children:e.jsx("div",{className:n.report_container,children:e.jsxs(q.Carousel,{showThumbs:!1,infiniteLoop:!0,autoPlay:!0,interval:5e3,showStatus:!1,showArrows:!1,stopOnHover:!0,swipeable:!0,renderIndicator:!1,children:[e.jsxs("div",{className:n.r_chart,children:[e.jsx("p",{children:"Report-Type One"}),e.jsx("div",{children:e.jsx(k,{width:"100%",height:"90%",style:{},children:e.jsx(C,{width:150,height:40,data:N,children:e.jsx(I,{dataKey:"uv",fill:"rgba(255, 0, 0, 0.393)",stroke:"#000000",strokeWidth:1})})})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Monthly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Weekly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Daily Report"})]})]})]}),e.jsxs("div",{className:n.r_chart,children:[e.jsx("p",{children:"Report-Type Two"}),e.jsx("div",{children:e.jsx(k,{width:"100%",height:"90%",style:{},children:e.jsx(C,{width:150,height:40,data:N,children:e.jsx(I,{dataKey:"uv",fill:"rgba(255, 149, 0, 0.419)",stroke:"#000000",strokeWidth:1})})})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Monthly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Weekly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Daily Report"})]})]})]}),e.jsxs("div",{className:n.r_chart,children:[e.jsx("p",{children:"Report-Type Three"}),e.jsx("div",{children:e.jsx(k,{width:"100%",height:"90%",style:{},children:e.jsx(C,{width:150,height:40,data:N,children:e.jsx(I,{dataKey:"uv",fill:"rgba(0, 0, 255, 0.438)",stroke:"#000000",strokeWidth:1})})})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Monthly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Weekly Report"})]}),e.jsxs("div",{children:[e.jsx("div",{onClick:()=>alert("Monthly Report")}),e.jsx("p",{children:"Daily Report"})]})]})]})]})})})]}),e.jsx("div",{className:n.dashboard_container_two,children:e.jsxs("div",{className:n.queuelists_container,children:[e.jsxs("div",{className:n.queue_header,children:[e.jsx("div",{children:e.jsx("p",{children:"#"})}),e.jsx("div",{children:e.jsx("p",{children:"Name"})}),e.jsx("div",{children:e.jsx("p",{children:"Barber"})}),e.jsx("div",{children:e.jsx("p",{children:"EWT"})})]}),P?e.jsx("div",{className:n.queue_body_loading,children:e.jsx(x,{count:9,height:"6rem",style:{marginBottom:"1rem"},baseColor:c?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:c?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):V&&(b==null?void 0:b.length)>0?e.jsx("div",{className:n.queue_body,children:b.map((r,a)=>e.jsxs("div",{className:n.queue_item,style:{borderBottom:a===b.length-1?"none":"1px solid rgba(0, 0, 0, 0.2)"},children:[e.jsx("div",{children:e.jsx("p",{children:r.qPosition})}),e.jsx("div",{children:e.jsx("p",{children:r.name.length>6?`${r.name.slice(0,6).concat("...")}`:r.name})}),e.jsx("div",{children:e.jsx("p",{children:r.barberName.length>6?`${r.barberName.slice(0,6).concat("...")}`:r.barberName})}),e.jsx("div",{children:e.jsxs("p",{children:[r.customerEWT," mins"]})})]},r._id))}):e.jsx("div",{className:n.queue_body_error,children:e.jsx("p",{children:"No queuelist available"})})]})})]})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${n.barber_connect_salon_container} ${c&&n.dark}`,children:[e.jsx("p",{children:"Connect To Your Salon"}),(M=o==null?void 0:o.user[0])!=null&&M.approvePendingMessage?e.jsx("div",{className:n.barber_approve_container,children:e.jsxs("div",{children:[e.jsx("p",{style:{color:c?"var(--primary-text-light-color1)":"var(--primary-text-light-color2)"},children:(B=o==null?void 0:o.user[0])==null?void 0:B.approvePendingMessage}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload"})]})}):e.jsxs("div",{className:`${n.barber_connect_salon_list_container} ${c&&n.dark}`,children:[e.jsxs("div",{className:`${n.barber_connect_salon_list} ${c&&n.dark}`,children:[e.jsx("p",{children:"Choose Your Salon"}),e.jsxs("div",{children:[e.jsxs("div",{className:n.barber_connect_salon_list_header,children:[e.jsx("p",{children:"Salon Logo"}),e.jsx("p",{children:"Salon Name"}),e.jsx("p",{children:"Select"})]}),v&&!j?e.jsx(e.Fragment,{children:e.jsx(x,{count:4,height:"5rem",style:{marginBottom:"1rem"},baseColor:c?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:c?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):!v&&j&&(i==null?void 0:i.length)>0?i==null?void 0:i.map(r=>{var a,t;return e.jsxs("div",{className:n.barber_connect_salon_list_body,children:[e.jsx("div",{children:e.jsx("img",{src:(t=(a=r==null?void 0:r.salonLogo)==null?void 0:a[0])==null?void 0:t.url,alt:"salon_logo"})}),e.jsx("p",{children:r.salonName}),e.jsx("div",{children:_==r.salonId?e.jsx("button",{className:n.check_connect_btn,children:e.jsx(oe,{})}):e.jsx("button",{className:n.add_connect_btn,onClick:()=>W(r.salonId),children:"+"})})]},r._id)}):!v&&j&&(i==null?void 0:i.length)==0?e.jsx("div",{className:n.barber_connect_salon_list_error,children:e.jsx("p",{children:"No Salons Available"})}):!v&&j&&e.jsx("div",{className:n.barber_connect_salon_list_error,children:e.jsx("p",{children:"No Salons Available"})})]})]}),e.jsxs("div",{className:`${n.barber_list_services_list} ${c&&n.dark}`,children:[e.jsx("p",{children:"List of Services"}),e.jsx("div",{children:p==null?void 0:p.map(r=>{var a;return e.jsxs("div",{className:`${n.service_item}`,children:[e.jsxs("div",{className:`${n.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${n.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[u==null?void 0:u.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(ae,{})}),e.jsx("p",{children:r==null?void 0:r.serviceEWT}),e.jsx("p",{children:"mins"})]})]})})]}),m.some(t=>t._id===(r==null?void 0:r._id))?e.jsx("button",{className:`${n.service_delete_icon}`,onClick:()=>H(r),children:e.jsx(se,{})}):e.jsx("button",{className:`${n.service_add_icon}`,onClick:()=>F(r),children:e.jsx(ce,{})})]},r._id)})})]}),e.jsx("div",{children:Y?e.jsx("button",{style:{display:"grid",placeItems:"center"},className:n.connect_btn,children:e.jsx(ie,{})}):e.jsx("button",{onClick:Q,className:n.connect_btn,children:"Connect Salon"})})]})]})})};export{lr as default};
