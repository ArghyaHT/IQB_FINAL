import{b as c,u as te,a as oe,r as a,d as ae,j as n,C as ie,_ as re}from"./index-DGL6bZNG.js";import{S as le}from"./index-D7FDlyf2.js";import{g as se,a as de,b as ce}from"./SalonAction-co89W0qc.js";import{B as me}from"./ButtonLoader-CUfgKyF-.js";import{M as pe}from"./Modal-DS8-Mj-d.js";import{C as y}from"./ClickAwayListener-BOaotpq_.js";import"./index-DJRw1zUa.js";import"./clsx-B-dksMZM.js";import"./getReactElementRef-BML6FS2e.js";const _e="_salon_wrapper_1rh7t_1",he="_salon_content_wrapper_1rh7t_73",xe="_salon_content_body_1rh7t_84",ue="_salon_content_body_error_1rh7t_253",je="_modal_container_1rh7t_266",Se="_modal_content_container_1rh7t_332",ge="_salon_settings_btn_1rh7t_359",ve="_time_container_1rh7t_393",fe="_time_drop_container_1rh7t_397",t={salon_wrapper:_e,salon_content_wrapper:he,salon_content_body:xe,salon_content_body_error:ue,modal_container:je,modal_content_container:Se,salon_settings_btn:ge,time_container:ve,time_drop_container:fe},De=()=>{const h=c(e=>e.AdminLoggedInMiddleware.adminEmail),L=c(e=>e.AdminLoggedInMiddleware.adminSalonId),s=te(),k=oe(),M=()=>{s({type:"ADMIN_CREATE_SALON_SUCCESS"}),k("/admin-salon/createsalon")},x=a.useRef(new AbortController);a.useEffect(()=>{const e=new AbortController;return x.current=e,s(se(h,e.signal)),()=>{x.current&&x.current.abort()}},[h,s]);const H=c(e=>e.getAdminSalonList),{loading:m,resolve:p,salons:i}=H,O=e=>{k(`/admin-salon/editsalon/${e==null?void 0:e.salonId}`,{state:e})},R=(e,o)=>{L==e?re.error("You are currently in this salon",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}):window.confirm("Are you sure ?")&&s(de(e,o))},r=c(ae)==="On",[U,_]=a.useState(!1),[B,K]=a.useState(null),z=e=>{var o,l,d;K(e==null?void 0:e.salonId),N((o=e==null?void 0:e.appointmentSettings)==null?void 0:o.appointmentStartTime),w((l=e==null?void 0:e.appointmentSettings)==null?void 0:l.appointmentEndTime),$((d=e==null?void 0:e.appointmentSettings)==null?void 0:d.intervalInMinutes),_(!0)},[C,P]=a.useState([]),T=e=>(e<10?"0":"")+e,Y=()=>{const e=[];for(let o=0;o<24;o++)for(let l=0;l<60;l+=30){const d=T(o)+":"+T(l);e.push({value:d,label:d})}P(e)};a.useEffect(()=>{Y()},[]);const[u,N]=a.useState(""),[Z,j]=a.useState(!1),q=()=>{j(e=>!e)},A=e=>{N(e),j(!1)},[S,w]=a.useState(""),[F,I]=a.useState(!1),G=()=>{I(e=>!e)},g=e=>{w(e),I(!1)},[J,Q]=a.useState([]),V=()=>{const e=[];for(let o=1;o<=60;o++)e.push(o);Q(e)};a.useEffect(()=>{V()},[]);const[v,$]=a.useState(""),[W,D]=a.useState(!1),X=()=>{D(e=>!e)},f=e=>{$(e),D(!1)},E=()=>{s(ce({salonId:B,appointmentSettings:{startTime:u,endTime:S,intervalInMinutes:v}},_,h))},b=e=>{e.key==="Enter"&&E()},ee=c(e=>e.adminUpdateSalonSettings),{loading:ne}=ee;return n.jsxs("div",{className:`${t.salon_wrapper} ${r&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon List"}),n.jsxs("button",{onClick:M,children:[n.jsx("p",{children:"Create"}),n.jsx("div",{children:"+"})]})]}),n.jsxs("div",{className:`${t.salon_content_wrapper} ${r&&t.dark}`,children:[m&&!p?n.jsx("div",{className:`${t.salon_content_body} ${r&&t.dark}`,children:n.jsx(le,{count:6,height:"6rem",baseColor:r?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:r?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)",style:{marginBottom:"1rem"}})}):!m&&p&&(i==null?void 0:i.length)>0?n.jsxs("div",{className:`${t.salon_content_body} ${r&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon Name"}),n.jsx("p",{children:"Address"}),n.jsx("p",{children:"City"}),n.jsx("p",{children:"Salon Type"}),n.jsx("p",{children:"Edit"}),n.jsx("p",{children:"Delete"}),n.jsx("p",{children:"Setting"})]}),i.map((e,o)=>n.jsxs("div",{style:{borderBottom:i.length-1===o&&"none"},children:[n.jsx("p",{children:(e==null?void 0:e.salonName.length)>18?(e==null?void 0:e.salonName.slice(0,18))+"...":e==null?void 0:e.salonName}),n.jsx("p",{children:(e==null?void 0:e.address.length)>18?(e==null?void 0:e.address.slice(0,18))+"...":e==null?void 0:e.address}),n.jsx("p",{children:(e==null?void 0:e.city.length)>18?(e==null?void 0:e.city.slice(0,18))+"...":e==null?void 0:e.city}),n.jsx("p",{children:e==null?void 0:e.salonType}),n.jsx("div",{children:n.jsx("button",{onClick:()=>O(e),children:"Edit"})}),n.jsx("div",{children:n.jsx("button",{onClick:()=>R(e.salonId,e._id),children:"Delete"})}),n.jsx("div",{children:n.jsx("button",{onClick:()=>z(e),children:"Setting"})})]},e==null?void 0:e._id))]}):!m&&p&&(i==null?void 0:i.length)==0?n.jsx("div",{className:`${t.salon_content_body_error} ${r&&t.dark}`,children:n.jsx("p",{style:{margin:"2rem"},children:"Salons not available"})}):!m&&!p&&n.jsx("div",{className:`${t.salon_content_body_error} ${r&&t.dark}`,children:n.jsx("p",{children:"No salon available"})}),n.jsx(pe,{open:U,onClose:()=>{g(!1),A(!1),f(!1),_(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:n.jsxs("div",{className:t.modal_container,children:[n.jsxs("div",{children:[n.jsx("p",{children:" Appointment Settings"}),n.jsx("button",{onClick:()=>_(!1),children:n.jsx(ie,{})})]}),n.jsxs("div",{className:t.modal_content_container,children:[n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Start Time"}),n.jsx("input",{type:"text",value:`${u?`${u} hr`:""}`,onClick:()=>q(),onKeyDown:b}),Z&&n.jsx(y,{onClickAway:()=>j(!1),children:n.jsx("div",{className:t.time_drop_container,children:C.map(e=>n.jsxs("p",{onClick:()=>A(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"End Time"}),n.jsx("input",{type:"text",value:`${S?`${S} hr`:""}`,onClick:()=>G(),onKeyDown:b}),F&&n.jsx(y,{onClickAway:()=>g(!1),children:n.jsx("div",{className:t.time_drop_container,children:C.map(e=>n.jsxs("p",{onClick:()=>g(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Interval Time"}),n.jsx("input",{type:"text",value:`${v?`${v} mins`:""}`,onClick:()=>X(),onKeyDown:b}),W&&n.jsx(y,{onClickAway:()=>f(!1),children:n.jsx("div",{className:t.time_drop_container,children:J.map(e=>n.jsxs("p",{value:e,onClick:()=>f(e),children:[e," mins"]},e))})})]}),ne?n.jsx("button",{className:t.salon_settings_btn,children:n.jsx(me,{})}):n.jsx("button",{className:t.salon_settings_btn,onClick:E,children:"Update"})]})]})})]})]})};export{De as default};
