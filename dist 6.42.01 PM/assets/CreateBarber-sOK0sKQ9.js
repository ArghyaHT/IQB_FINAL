import{b as _,a as je,u as ge,r as i,d as Ne,j as e,a1 as X,o as Z,a6 as G,C as Se,_ as d}from"./index-u-AATrzO.js";import{f as we,h as ye}from"./BarberAction-CYuWmUtf.js";import{B as Ce}from"./ButtonLoader-CR5N2D0l.js";import{l as Ee,U as ke}from"./libphonenumber-jOZUm_53.js";import{S as ee}from"./Skeleton-Bl1IUrm_.js";import{M as Ie}from"./Modal-ghuyP4Rw.js";import"./clsx-B-dksMZM.js";import"./index-pYybFpgN.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-CWP5Jz8O.js";const $e="_admin_create_barber_wrapper_1tmda_1",Pe="_admin_create_barber_wrapper_left_1tmda_17",Ae="_admin_create_barber_content_wrapper_left_1tmda_35",Be="_create_barber_btn_1tmda_74",De="_admin_create_barber_wrapper_right_1tmda_105",Re="_admin_create_barber_content_wrapper_right_1tmda_127",Oe="_service_item_1tmda_166",Ve="_service_add_icon_1tmda_181",Me="_service_delete_icon_1tmda_212",Te="_service_item_top_1tmda_243",We="_service_item_bottom_1tmda_297",ze="_admin_create_barber_content_wrapper_right_error_1tmda_378",Ke="_admin_create_barber_content_wrapper_right_loading_1tmda_398",Le="_mobile_modal_1tmda_412",He="_add_services_btn_1tmda_413",Ue="_mobile_add_services_1tmda_414",Ye="_error_message_1tmda_418",Je="_mobile_service_container_1tmda_470",a={admin_create_barber_wrapper:$e,admin_create_barber_wrapper_left:Pe,admin_create_barber_content_wrapper_left:Ae,create_barber_btn:Be,admin_create_barber_wrapper_right:De,admin_create_barber_content_wrapper_right:Re,service_item:Oe,service_add_icon:Ve,service_delete_icon:Me,service_item_top:Te,service_item_bottom:We,admin_create_barber_content_wrapper_right_error:ze,admin_create_barber_content_wrapper_right_loading:Ke,mobile_modal:Le,add_services_btn:He,mobile_add_services:Ue,error_message:Ye,mobile_service_container:Je},sr=()=>{const f=_(r=>r.AdminLoggedInMiddleware.adminSalonId),re=je(),j=ge(),[m,E]=i.useState(""),[u,k]=i.useState(""),[b,I]=i.useState(""),[$,ae]=i.useState(""),[te,ie]=i.useState(""),[g,P]=i.useState(""),v=_(r=>r.AdminLoggedInMiddleware.entiredata.user[0]),N=i.useRef(new AbortController);i.useEffect(()=>{if((v==null?void 0:v.salonId)!==0){const r=new AbortController;return N.current=r,j(we(f,r.signal)),()=>{N.current&&N.current.abort()}}},[f,j,v]);const ne=_(r=>r.adminAllSalonServices),{loading:se,resolve:oe,response:s}=ne,[c,A]=i.useState([]),[p,S]=i.useState({});i.useEffect(()=>{if(s){const r={};s.forEach(t=>{r[t._id]=t.serviceEWT}),S(r)}},[s]);const B=r=>{A([...c,r])},D=r=>{A(c.filter(n=>n._id!==r._id));const t={};s.forEach(n=>{t[n._id]=n.serviceEWT}),S(t)},R=(r,t)=>{S({...p,[r]:Number(t)})};i.useEffect(()=>{const r=JSON.parse(localStorage.getItem("barberdata"))||{};E(r.name),k(r.email),I(r.nickName),P(r.dateOfBirth)},[]);const[O,w]=i.useState(""),[V,y]=i.useState(""),[M,C]=i.useState(""),[T,W]=i.useState(""),[z,K]=i.useState(""),[L,ce]=i.useState(""),[de,H]=i.useState(!1),le=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,U=()=>{if(!m)return d.error("Please enter name",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),w("Please enter name");if(m.length===0||m.length>20)return d.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),w("Name must be between 1 to 20 characters");if(!u)return d.error("Please enter email",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Please enter email");if(!le.test(u))return d.error("Invalid email format",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Invalid email format");if(!b)return d.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Please enter nickname");if(b.length===0||b.length>20)return d.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Nickname must be between 1 to 20 characters");if(de)return d.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),W("Invalid Number");if(!g)return d.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),K("Please select date of birth");if(c.length===0)return d.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),ce("Please provide a service");const r={name:m,email:u,nickName:b,mobileNumber:Number($),countryCode:Number(te),dateOfBirth:g,salonId:f,barberServices:c.map(t=>({...t,barberServiceEWT:p[t._id]}))};j(ye(r,re))},h=r=>{r.key==="Enter"&&U()},_e=_(r=>r.adminCreateBarber),{loading:me}=_e,Y=_(Ne)==="On",J=Ee.PhoneNumberUtil.getInstance(),be=r=>{try{return J.isValidNumber(J.parseAndKeepRawInput(r))}catch{return!1}},[he,ue]=i.useState("gb"),ve=(r,t,n)=>{W("");const{country:o,inputValue:Q}=t;be(r)?(ae(r),ie(o==null?void 0:o.dialCode),ue(o==null?void 0:o.iso2),H(!1)):H(!0)},x=(r,t,n,o)=>{o(""),r(t);const Q=JSON.parse(localStorage.getItem("barberdata"))||{};localStorage.setItem("barberdata",JSON.stringify({...Q,[n]:t}))},pe=_(r=>r.adminGetDefaultSalon),{response:l}=pe,[xe,F]=i.useState(!1),fe=()=>F(!0),q=()=>F(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${a.admin_create_barber_wrapper} ${Y&&a.dark}`,children:[e.jsxs("div",{className:`${a.admin_create_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),se?e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_right_loading}`,children:[e.jsx(ee,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}}),e.jsx(ee,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):oe&&(s==null?void 0:s.length)>0?e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right}`,children:s==null?void 0:s.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(X,{})}),e.jsx("input",{type:"text",value:p[r._id],onChange:n=>{const o=n.target.value.replace(/[^0-9]/g,"");R(r._id,o)}}),e.jsx("p",{children:"mins"})]})]})})]}),c.find(n=>n._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>D(r),children:e.jsx(Z,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>B(r),children:e.jsx(G,{})})]},r._id)})}):e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${a.admin_create_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Create Barber"}),e.jsx("button",{onClick:fe,className:a.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:m,placeholder:"Enter Name",onChange:r=>x(E,r.target.value,"name",w),onKeyDown:h,style:{border:O&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:O})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:u,placeholder:"Enter Email",onChange:r=>x(k,r.target.value,"email",y),onKeyDown:h,style:{border:V&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:V})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:b,placeholder:"Enter Nick Name",onChange:r=>x(I,r.target.value,"nickName",C),onKeyDown:h,style:{border:M&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:M})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:h,style:{border:T&&"0.1rem solid red"},children:e.jsx(ke,{forceDialCode:!0,defaultCountry:he,value:$,onChange:(r,t)=>ve(r,t)})})}),e.jsx("p",{className:a.error_message,children:T})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"DD/MM/YY",value:g,onChange:r=>x(P,r.target.value,"dateOfBirth",K),style:{colorScheme:Y?"dark":"light",border:z&&"0.1rem solid red"},onKeyDown:h}),e.jsx("p",{className:a.error_message,children:z})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:c==null?void 0:c.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:L&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:L})]}),me?e.jsx("button",{className:`${a.create_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(Ce,{})}):e.jsx("button",{className:`${a.create_barber_btn}`,onClick:U,children:"Create"}),e.jsx(Ie,{open:xe,onClose:q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:a.mobile_modal,children:e.jsxs("div",{className:a.mobile_service_container,children:[e.jsx("button",{onClick:q,children:e.jsx(Se,{})}),e.jsx("div",{children:s==null?void 0:s.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(X,{})}),e.jsx("input",{type:"text",value:p[r._id],onChange:n=>{const o=n.target.value.replace(/[^0-9]/g,"");R(r._id,o)}}),e.jsx("p",{children:"mins"})]})]})})]}),c.find(n=>n._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>D(r),children:e.jsx(Z,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>B(r),children:e.jsx(G,{})})]},r._id)})})]})})]})]})]})})};export{sr as default};
