import{u as t,a as f,r as _,d as Q,j as r,G as k,_ as w}from"./index-smej7xwq.js";import{S as C}from"./index-BfDBZXgS.js";import{g as I,b as S,c as L}from"./BarberQueueAction-CBaE-GqP.js";const N="_barber_queue_wrapper_19hxq_1",$="_barber_queue_content_wrapper_19hxq_29",B="_barber_queue_content_body_19hxq_39",E="_barber_queue_content_body_item_19hxq_96",A="_barber_queue_content_body_error_19hxq_183",M="_dark_19hxq_198",R="_modal_container_19hxq_223",n={barber_queue_wrapper:N,barber_queue_content_wrapper:$,barber_queue_content_body:B,barber_queue_content_body_item:E,barber_queue_content_body_error:A,dark:M,modal_container:R},H=()=>{const d=t(e=>e.BarberLoggedInMiddleware.barberSalonId),b=t(e=>e.BarberLoggedInMiddleware.barberId),c=t(e=>e.BarberLoggedInMiddleware.barberEmail),s=f(),l=_.useRef(new AbortController);_.useEffect(()=>{const e=new AbortController;return l.current=e,s(I(d,b,e.signal)),()=>{l.current&&l.current.abort()}},[d,s]);const h=t(e=>e.getBarberQueueList),{loading:m,resolve:x,queueList:o}=h,a=t(Q)==="On",p=e=>{if(e.qPosition!==1)return w.error("Queue position is not 1",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});const i=window.confirm("Are you Sure ?"),u={servedByEmail:c,barberEmail:c,barberId:e.barberId,salonId:d,services:e.services,_id:e._id};i&&s(S(u,d,e.barberId))},j=e=>{const i=window.confirm("Are you Sure ?"),u={barberEmail:c,barberId:e.barberId,salonId:d,_id:e._id};i&&s(L(u,d,e.barberId))},g=t(e=>e.adminServeQueue),{loading:q}=g,v=t(e=>e.adminCancelQueue),{loading:y}=v;return r.jsxs("div",{className:`${n.barber_queue_wrapper} ${a&&n.dark}`,children:[r.jsx("div",{children:r.jsx("p",{children:"Queue List"})}),r.jsx("div",{className:`${n.barber_queue_content_wrapper} ${a&&n.dark}`,children:m?r.jsx("div",{className:n.barber_queue_content_body,children:r.jsx(C,{count:6,height:"6rem",style:{marginBottom:"1rem"},baseColor:a?"var(--dark-loader-bg-color)":"var(--light-loader-bg-color)",highlightColor:a?"var(--dark-loader-highlight-color)":"var(--light-loader-highlight-color)"})}):x&&(o==null?void 0:o.length)>0?r.jsx(r.Fragment,{children:r.jsxs("div",{className:`${n.barber_queue_content_body} ${a&&n.dark}`,children:[r.jsxs("div",{children:[r.jsx("p",{children:"#"}),r.jsx("p",{children:"Name"}),r.jsx("p",{children:"Barber Name"}),r.jsx("p",{children:"Time Joined Q"}),r.jsx("div",{children:r.jsx("p",{children:"Qg Code"})}),r.jsx("div",{children:r.jsx("p",{children:"EWT"})}),r.jsx("div",{children:r.jsx("p",{children:"Type"})}),r.jsx("div",{children:r.jsx("p",{children:"Serve"})}),r.jsx("div",{children:r.jsx("p",{children:"Cancel"})})]}),o==null?void 0:o.map((e,i)=>r.jsxs("div",{className:`${n.barber_queue_content_body_item} ${a&&n.dark}`,style:{borderBottom:o.length-1===i&&"none"},children:[r.jsx("p",{children:i===0?"Next":e.qPosition}),r.jsx("p",{children:e.name}),r.jsx("p",{children:e.barberName}),r.jsx("p",{children:e.timeJoinedQ}),r.jsx("p",{children:e==null?void 0:e.qgCode}),r.jsxs("p",{children:[e==null?void 0:e.customerEWT," mins"]}),r.jsx("div",{children:e.serviceType==="VIP"?r.jsx(k,{}):"-"}),r.jsx("div",{children:r.jsx("button",{onClick:()=>p(e),disabled:q,children:"Serve"})}),r.jsx("div",{children:r.jsx("button",{onClick:()=>j(e),disabled:y,children:"Cancel"})})]},e._id))]})}):r.jsx("div",{className:`${n.barber_queue_content_body_error} ${a&&n.dark}`,children:r.jsx("p",{children:"Queue not available"})})})]})};export{H as default};
