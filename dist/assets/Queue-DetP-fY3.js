import{b as t,u as y,r as m,d as f,j as r,z as w,_ as Q}from"./index-DC23I7Q_.js";import{S as I}from"./index-B0iQmoiR.js";import{g as S,b as C,a as $}from"./BarberQueueAction-CXhNQFSu.js";const N="_barber_queue_wrapper_phzks_1",z="_barber_queue_content_wrapper_phzks_29",L="_barber_queue_content_body_phzks_39",A="_barber_queue_content_body_item_phzks_121",B="_barber_queue_content_body_error_phzks_208",E="_modal_container_phzks_221",n={barber_queue_wrapper:N,barber_queue_content_wrapper:z,barber_queue_content_body:L,barber_queue_content_body_item:A,barber_queue_content_body_error:B,modal_container:E},T=()=>{const d=t(e=>e.BarberLoggedInMiddleware.barberSalonId),h=t(e=>e.BarberLoggedInMiddleware.barberId),b=t(e=>e.BarberLoggedInMiddleware.barberEmail),i=y(),u=m.useRef(new AbortController);m.useEffect(()=>{const e=new AbortController;return u.current=e,i(S(d,h,e.signal)),()=>{u.current&&u.current.abort()}},[d,i]);const p=t(e=>e.getBarberQueueList),{loading:c,resolve:l,queueList:o}=p,a=t(f)==="On",g=e=>{if(e.qPosition!==1)return Q.error("Queue position is not 1",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});const s=window.confirm("Are you Sure ?"),_={barberEmail:b,barberId:e.barberId,salonId:d,services:e.services,_id:e._id};s&&i(C(_,d,e.barberId))},x=e=>{const s=window.confirm("Are you Sure ?"),_={barberEmail:b,barberId:e.barberId,salonId:d,_id:e._id};s&&i($(_,d,e.barberId))},j=t(e=>e.adminServeQueue),{loading:v}=j,q=t(e=>e.adminCancelQueue),{loading:k}=q;return r.jsxs("div",{className:`${n.barber_queue_wrapper} ${a&&n.dark}`,children:[r.jsx("div",{children:r.jsx("p",{children:"Queue List"})}),r.jsx("div",{className:`${n.barber_queue_content_wrapper} ${a&&n.dark}`,children:c&&!l?r.jsx("div",{className:n.barber_queue_content_body,children:r.jsx(I,{count:6,height:"6rem",style:{marginBottom:"1rem"},baseColor:a?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:a?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):!c&&l&&(o==null?void 0:o.length)>0?r.jsx(r.Fragment,{children:r.jsxs("div",{className:`${n.barber_queue_content_body} ${a&&n.dark}`,children:[r.jsxs("div",{children:[r.jsx("p",{children:"Name"}),r.jsx("p",{children:"Time Joined Q"}),r.jsx("p",{children:"Barber Name"}),r.jsx("p",{children:"Q Postion"}),r.jsx("p",{children:"Type"}),r.jsx("p",{children:"Serve"}),r.jsx("p",{children:"Cancel"})]}),o==null?void 0:o.map((e,s)=>r.jsxs("div",{className:`${n.barber_queue_content_body_item} ${a&&n.dark}`,style:{borderBottom:o.length-1===s&&"none"},children:[r.jsx("p",{children:e.name}),r.jsx("p",{children:e.timeJoinedQ}),r.jsx("p",{children:e.barberName}),r.jsx("p",{children:e.qPosition}),r.jsx("div",{children:e.serviceType==="VIP"?r.jsx(w,{}):"-"}),r.jsx("div",{children:r.jsx("button",{onClick:()=>g(e),disabled:v,children:"Serve"})}),r.jsx("div",{children:r.jsx("button",{onClick:()=>x(e),disabled:k,children:"Cancel"})})]},e._id))]})}):!c&&l&&(o==null?void 0:o.length)==0?r.jsx("div",{className:`${n.barber_queue_content_body_error} ${a&&n.dark}`,children:r.jsx("p",{children:"Queue not available"})}):!c&&!l&&r.jsx("div",{className:`${n.barber_queue_content_body_error} ${a&&n.dark}`,children:r.jsx("p",{children:"Queue not available"})})})]})};export{T as default};
