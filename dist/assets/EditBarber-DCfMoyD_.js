import{r as s,b as v,c as ae,a as se,u as ce,d as oe,j as e,a5 as U,o as V,ab as K,C as _e,_ as le}from"./index-LM_i2ckE.js";import{f as me,i as ve}from"./BarberAction-B-_LzqZc.js";import{B as be}from"./ButtonLoader-BtnBP41U.js";import{l as pe,U as he}from"./libphonenumber-CwkKWUiL.js";import{S as M}from"./Skeleton-D9zihpVu.js";import{M as xe}from"./Modal-Csg6tum7.js";import"./clsx-B-dksMZM.js";import"./index-B-Fco__9.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-BWJB0fH6.js";const je="_admin_edit_barber_wrapper_10bxt_1",ue="_admin_edit_barber_wrapper_left_10bxt_17",ge="_admin_edit_barber_content_wrapper_left_10bxt_35",fe="_edit_barber_btn_10bxt_72",Ne="_admin_edit_barber_wrapper_right_10bxt_103",Ie="_admin_edit_barber_content_wrapper_right_10bxt_125",we="_service_item_10bxt_164",ye="_service_add_icon_10bxt_179",Se="_service_delete_icon_10bxt_210",Ce="_service_item_top_10bxt_241",Ee="_service_item_bottom_10bxt_295",ke="_admin_edit_barber_content_wrapper_right_error_10bxt_376",$e="_admin_edit_barber_content_wrapper_right_loading_10bxt_396",Te="_mobile_modal_10bxt_410",De="_add_services_btn_10bxt_411",We="_mobile_add_services_10bxt_412",Ae="_mobile_service_container_10bxt_464",d={admin_edit_barber_wrapper:je,admin_edit_barber_wrapper_left:ue,admin_edit_barber_content_wrapper_left:ge,edit_barber_btn:fe,admin_edit_barber_wrapper_right:Ne,admin_edit_barber_content_wrapper_right:Ie,service_item:we,service_add_icon:ye,service_delete_icon:Se,service_item_top:Ce,service_item_bottom:Ee,admin_edit_barber_content_wrapper_right_error:ke,admin_edit_barber_content_wrapper_right_loading:$e,mobile_modal:Te,add_services_btn:De,mobile_add_services:We,mobile_service_container:Ae},qe=()=>{var A,P;const[_,b]=s.useState([]),O=v(i=>i.adminAllSalonServices),{loading:L,resolve:R,response:o}=O;s.useEffect(()=>{o&&b(o)},[o]);const p=v(i=>i.AdminLoggedInMiddleware.adminSalonId),h=ae(),H=se(),x=ce(),t=h==null?void 0:h.state,[g,F]=s.useState(t==null?void 0:t.name),[f,Pe]=s.useState(t==null?void 0:t.email),[N,Y]=s.useState(t==null?void 0:t.nickName),[I,z]=s.useState(`${t==null?void 0:t.mobileCountryCode}${(A=t==null?void 0:t.mobileNumber)==null?void 0:A.toString()}`),[q,J]=s.useState(t==null?void 0:t.mobileCountryCode),[w,Q]=s.useState((P=t==null?void 0:t.dateOfBirth)==null?void 0:P.split("T")[0]),[n,j]=s.useState(t==null?void 0:t.barberServices);s.useEffect(()=>{x(me(p))},[p,x]);const y=i=>{n.includes(i)||j([...n,{...i,barberServiceEWT:i.serviceEWT}])},S=i=>{const a=o.find(r=>r.serviceId===i.serviceId);a&&(j(n.filter(r=>r.serviceId!==i.serviceId)),b(_.map(r=>r.serviceId===i.serviceId?{...r,serviceEWT:a.serviceEWT}:r)))},[X,C]=s.useState(!1),E=()=>{if(X)le.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const i={name:g,email:f,nickName:N,mobileNumber:Number(I),countryCode:Number(q),dateOfBirth:w,salonId:p,barberServices:n};x(ve(i,H))}},l=i=>{i.key==="Enter"&&E()},Z=v(i=>i.adminUpdateBarber),{loading:G}=Z,k=v(oe)==="On",$=(i,a)=>{const r=i.target.value.replace(/[^0-9]/g,""),u=r===""?"":Number(r);n.find(c=>c.serviceId===a.serviceId)?j(n.map(c=>c.serviceId===a.serviceId?{...c,barberServiceEWT:u}:c)):b(o.map(c=>c.serviceId===a.serviceId?{...c,serviceEWT:u}:c))},T=pe.PhoneNumberUtil.getInstance(),B=i=>{try{return T.isValidNumber(T.parseAndKeepRawInput(i))}catch{return!1}},[ee,ie]=s.useState("gb"),re=(i,a)=>{const{country:r,inputValue:u}=a;B(i)?(z(i),J(r==null?void 0:r.dialCode),ie(r==null?void 0:r.iso2),C(!1)):C(!0)},te=v(i=>i.adminGetDefaultSalon),{response:m}=te,[ne,D]=s.useState(!1),de=()=>D(!0),W=()=>D(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${d.admin_edit_barber_wrapper} ${k&&d.dark}`,children:[e.jsxs("div",{className:`${d.admin_edit_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),L?e.jsxs("div",{className:`${d.admin_edit_barber_content_wrapper_right_loading}`,children:[e.jsx(M,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}}),e.jsx(M,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}})]}):R&&(o==null?void 0:o.length)>0?e.jsx("div",{className:`${d.admin_edit_barber_content_wrapper_right}`,children:_==null?void 0:_.map(i=>{var a;return e.jsxs("div",{className:`${d.service_item}`,children:[e.jsxs("div",{className:`${d.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=i==null?void 0:i.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:i==null?void 0:i.serviceName}),e.jsx("p",{children:i!=null&&i.vipService?"VIP":"Regular"}),e.jsx("p",{children:i==null?void 0:i.serviceDesc})]})]}),e.jsxs("div",{className:`${d.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,i==null?void 0:i.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(U,{})}),e.jsx("input",{type:"text",value:n!=null&&n.find(r=>r.serviceId===i.serviceId)?n==null?void 0:n.find(r=>r.serviceId===i.serviceId).barberServiceEWT:i.serviceEWT,onChange:r=>$(r,i)}),e.jsx("p",{children:"mins"})]})]})})]}),n.find(r=>r.serviceId===i.serviceId)?e.jsx("button",{className:`${d.service_delete_icon}`,onClick:()=>S(i),children:e.jsx(V,{})}):e.jsx("button",{className:`${d.service_add_icon}`,onClick:()=>y(i),children:e.jsx(K,{})})]},i._id)})}):e.jsx("div",{className:`${d.admin_edit_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${d.admin_edit_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Edit Barber"}),e.jsx("button",{onClick:de,className:d.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${d.admin_edit_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:g,onChange:i=>F(i.target.value),placeholder:"Enter Name",onKeyDown:l})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:f,placeholder:"Enter Email",onKeyDown:l})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:N,onChange:i=>Y(i.target.value),placeholder:"Enter Nick Name",onKeyDown:l})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:l,children:e.jsx(he,{forceDialCode:!0,defaultCountry:ee,value:I,onChange:(i,a)=>re(i,a)})})})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"dd/mm/yy",value:w,onChange:i=>Q(i.target.value),style:{colorScheme:k?"dark":"light"},onKeyDown:l})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:n==null?void 0:n.map(i=>" "+i.serviceName),placeholder:"Your Services",onKeyDown:l})]}),G?e.jsx("button",{className:`${d.edit_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(be,{})}):e.jsx("button",{className:`${d.edit_barber_btn}`,onClick:E,children:"Update"}),e.jsx(xe,{open:ne,onClose:W,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:d.mobile_modal,children:e.jsxs("div",{className:d.mobile_service_container,children:[e.jsx("button",{onClick:W,children:e.jsx(_e,{})}),e.jsx("div",{children:_==null?void 0:_.map(i=>{var a;return e.jsxs("div",{className:`${d.service_item}`,children:[e.jsxs("div",{className:`${d.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=i==null?void 0:i.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:i==null?void 0:i.serviceName}),e.jsx("p",{children:i!=null&&i.vipService?"VIP":"Regular"}),e.jsx("p",{children:i==null?void 0:i.serviceDesc})]})]}),e.jsxs("div",{className:`${d.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,i==null?void 0:i.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(U,{})}),e.jsx("input",{type:"text",value:n!=null&&n.find(r=>r.serviceId===i.serviceId)?n==null?void 0:n.find(r=>r.serviceId===i.serviceId).barberServiceEWT:i.serviceEWT,onChange:r=>$(r,i)}),e.jsx("p",{children:"mins"})]})]})})]}),n.find(r=>r.serviceId===i.serviceId)?e.jsx("button",{className:`${d.service_delete_icon}`,onClick:()=>S(i),children:e.jsx(V,{})}):e.jsx("button",{className:`${d.service_add_icon}`,onClick:()=>y(i),children:e.jsx(K,{})})]},i._id)})})]})})]})]})]})})};export{qe as default};
