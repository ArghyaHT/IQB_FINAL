import{b as _,a as ne,u as ce,r as n,d as se,j as e,a5 as W,o as P,ab as K,C as de,_ as oe}from"./index-BzyIvIPz.js";import{h as le,i as _e}from"./BarberAction-DcqRU9JJ.js";import{B as me}from"./ButtonLoader-DSyBHFHr.js";import{l as he,U as be}from"./libphonenumber-CZU5jU9c.js";import{S as R}from"./Skeleton-CiZCk65s.js";import{M as pe}from"./Modal-BZFy21ue.js";import"./clsx-B-dksMZM.js";import"./index-DLEqpiVj.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-B0Sa57LF.js";const ve="_admin_create_barber_wrapper_h3w8h_1",xe="_admin_create_barber_wrapper_left_h3w8h_17",ue="_admin_create_barber_content_wrapper_left_h3w8h_35",je="_create_barber_btn_h3w8h_72",ge="_admin_create_barber_wrapper_right_h3w8h_120",we="_admin_create_barber_content_wrapper_right_h3w8h_142",Ne="_service_item_h3w8h_181",fe="_service_add_icon_h3w8h_196",Ce="_service_delete_icon_h3w8h_227",Se="_service_item_top_h3w8h_258",ye="_service_item_bottom_h3w8h_312",Ee="_admin_create_barber_content_wrapper_right_error_h3w8h_393",ke="_admin_create_barber_content_wrapper_right_loading_h3w8h_413",Ie="_mobile_modal_h3w8h_427",$e="_add_services_btn_h3w8h_428",Ae="_mobile_add_services_h3w8h_429",De="_mobile_service_container_h3w8h_481",t={admin_create_barber_wrapper:ve,admin_create_barber_wrapper_left:xe,admin_create_barber_content_wrapper_left:ue,create_barber_btn:je,admin_create_barber_wrapper_right:ge,admin_create_barber_content_wrapper_right:we,service_item:Ne,service_add_icon:fe,service_delete_icon:Ce,service_item_top:Se,service_item_bottom:ye,admin_create_barber_content_wrapper_right_error:Ee,admin_create_barber_content_wrapper_right_loading:ke,mobile_modal:Ie,add_services_btn:$e,mobile_add_services:Ae,mobile_service_container:De},Je=()=>{const p=_(r=>r.AdminLoggedInMiddleware.adminSalonId),L=ne(),v=ce(),[j,g]=n.useState(""),[w,N]=n.useState(""),[f,C]=n.useState(""),[S,H]=n.useState(""),[U,Y]=n.useState(""),[y,E]=n.useState(""),m=_(r=>r.AdminLoggedInMiddleware.entiredata.user[0]),x=n.useRef(new AbortController);n.useEffect(()=>{if((m==null?void 0:m.salonId)!==0){const r=new AbortController;return x.current=r,v(le(p,r.signal)),()=>{x.current&&x.current.abort()}}},[p,v,m]);const J=_(r=>r.adminAllSalonServices),{loading:F,resolve:z,response:c}=J,[d,k]=n.useState([]),[h,u]=n.useState({});n.useEffect(()=>{if(c){const r={};c.forEach(a=>{r[a._id]=a.serviceEWT}),u(r)}},[c]);const I=r=>{k([...d,r])},$=r=>{k(d.filter(i=>i._id!==r._id));const a={};c.forEach(i=>{a[i._id]=i.serviceEWT}),u(a)},A=(r,a)=>{u({...h,[r]:Number(a)})};n.useEffect(()=>{const r=JSON.parse(localStorage.getItem("barberdata"))||{};g(r.name),N(r.email),C(r.nickName),E(r.dateOfBirth)},[]);const[q,D]=n.useState(!1),B=()=>{if(q)oe.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const r={name:j,email:w,nickName:f,mobileNumber:Number(S),countryCode:Number(U),dateOfBirth:y,salonId:p,barberServices:d.map(a=>({...a,barberServiceEWT:h[a._id]}))};v(_e(r,L))}},o=r=>{r.key==="Enter"&&B()},Q=_(r=>r.adminCreateBarber),{loading:X}=Q,O=_(se)==="On",V=he.PhoneNumberUtil.getInstance(),Z=r=>{try{return V.isValidNumber(V.parseAndKeepRawInput(r))}catch{return!1}},[G,ee]=n.useState("gb"),re=(r,a,i)=>{const{country:s,inputValue:Oe}=a;Z(r)?(H(r),Y(s==null?void 0:s.dialCode),ee(s==null?void 0:s.iso2),D(!1)):D(!0)},b=(r,a,i)=>{r(a);const s=JSON.parse(localStorage.getItem("barberdata"))||{};localStorage.setItem("barberdata",JSON.stringify({...s,[i]:a}))},ae=_(r=>r.adminGetDefaultSalon),{response:l}=ae,[te,M]=n.useState(!1),ie=()=>M(!0),T=()=>M(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${t.admin_create_barber_wrapper} ${O&&t.dark}`,children:[e.jsxs("div",{className:`${t.admin_create_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),F?e.jsxs("div",{className:`${t.admin_create_barber_content_wrapper_right_loading}`,children:[e.jsx(R,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}}),e.jsx(R,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):z&&(c==null?void 0:c.length)>0?e.jsx("div",{className:`${t.admin_create_barber_content_wrapper_right}`,children:c==null?void 0:c.map(r=>{var a;return e.jsxs("div",{className:`${t.service_item}`,children:[e.jsxs("div",{className:`${t.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${t.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(W,{})}),e.jsx("input",{type:"text",value:h[r._id],onChange:i=>{const s=i.target.value.replace(/[^0-9]/g,"");A(r._id,s)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(i=>i._id===r._id)?e.jsx("button",{className:`${t.service_delete_icon}`,onClick:()=>$(r),children:e.jsx(P,{})}):e.jsx("button",{className:`${t.service_add_icon}`,onClick:()=>I(r),children:e.jsx(K,{})})]},r._id)})}):e.jsx("div",{className:`${t.admin_create_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${t.admin_create_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Create Barber"}),e.jsx("button",{onClick:ie,className:t.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${t.admin_create_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:j,placeholder:"Enter Name",onChange:r=>b(g,r.target.value,"name"),onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:w,placeholder:"Enter Email",onChange:r=>b(N,r.target.value,"email"),onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:f,placeholder:"Enter Nick Name",onChange:r=>b(C,r.target.value,"nickName"),onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:o,children:e.jsx(be,{forceDialCode:!0,defaultCountry:G,value:S,onChange:(r,a)=>re(r,a)})})})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"DD/MM/YY",value:y,onChange:r=>b(E,r.target.value,"dateOfBirth"),style:{colorScheme:O?"dark":"light"},onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:d==null?void 0:d.map(r=>" "+r.serviceName),placeholder:"Your Services",onKeyDown:o})]}),X?e.jsx("button",{className:`${t.create_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(me,{})}):e.jsxs("button",{className:`${t.create_barber_btn}`,onClick:B,children:[e.jsx("p",{children:"Create"}),e.jsx("div",{children:"+"})]}),e.jsx(pe,{open:te,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:t.mobile_modal,children:e.jsxs("div",{className:t.mobile_service_container,children:[e.jsx("button",{onClick:T,children:e.jsx(de,{})}),e.jsx("div",{children:c==null?void 0:c.map(r=>{var a;return e.jsxs("div",{className:`${t.service_item}`,children:[e.jsxs("div",{className:`${t.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${t.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(W,{})}),e.jsx("input",{type:"text",value:h[r._id],onChange:i=>{const s=i.target.value.replace(/[^0-9]/g,"");A(r._id,s)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(i=>i._id===r._id)?e.jsx("button",{className:`${t.service_delete_icon}`,onClick:()=>$(r),children:e.jsx(P,{})}):e.jsx("button",{className:`${t.service_add_icon}`,onClick:()=>I(r),children:e.jsx(K,{})})]},r._id)})})]})})]})]})]})})};export{Je as default};
