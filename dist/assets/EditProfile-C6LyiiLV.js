import{u as Fe,a as Ge,b as x,r as s,d as Pe,j as e,a4 as $e,aI as le,C as I,aJ as We,E as V,N as R,aK as Te,aL as He,_,p as de,aM as Je}from"./index-DswqzyJH.js";import{l as Ye,U as qe}from"./libphonenumber-5vSWho__.js";import{a as Qe,b as Xe,c as Ze,d as et,e as tt,f as nt}from"./AdminProfileAction-CLy1QDfD.js";import{B as ce}from"./ButtonLoader-DEiwYJeU.js";import{S as at}from"./Skeleton-CUBIYqiW.js";import{M as K}from"./Modal-Bvpc9ZkB.js";import{C as ot}from"./ClickAwayListener-BEVLq7MX.js";import"./clsx-B-dksMZM.js";import"./index-pXkuTEkE.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-DGXGC95N.js";const st="_admin_edit_profile_container_ke4fg_1",it="_admin_edit_profile_container_left_ke4fg_18",rt="_admin_edit_profile_content_left_ke4fg_31",lt="_admin_edit_profile_container_right_ke4fg_70",dt="_edit_profile_btn_ke4fg_135",ct="_upload_image_container_ke4fg_212",_t="_admin_profile_loader_ke4fg_257",mt="_profile_skeleton_img_ke4fg_267",pt="_admin_edit_email_container_ke4fg_273",ut="_admin_verified_icon_ke4fg_312",ft="_admin_notverified_icon_ke4fg_329",ht="_admin_edit_mobile_container_ke4fg_346",jt="_admin_edit_gender_container_ke4fg_415",gt="_modal_container_ke4fg_458",xt="_modal_content_container_ke4fg_524",bt="_edit_modal_btn_ke4fg_569",vt="_modal_common_container_ke4fg_604",i={admin_edit_profile_container:st,admin_edit_profile_container_left:it,admin_edit_profile_content_left:rt,admin_edit_profile_container_right:lt,edit_profile_btn:dt,upload_image_container:ct,admin_profile_loader:_t,profile_skeleton_img:mt,admin_edit_email_container:pt,admin_verified_icon:ut,admin_notverified_icon:ft,admin_edit_mobile_container:ht,admin_edit_gender_container:jt,modal_container:gt,modal_content_container:xt,edit_modal_btn:bt,modal_common_container:vt},Vt=()=>{var oe;const c=Fe(),A=Ge(),n=x(t=>t.AdminLoggedInMiddleware.entiredata.user[0]),[m,_e]=s.useState(n==null?void 0:n.emailVerified),[p,me]=s.useState(n==null?void 0:n.mobileVerified),[b,U]=s.useState(""),[L,z]=s.useState(""),[v,B]=s.useState(""),[F,G]=s.useState(""),[pe,P]=s.useState("");s.useEffect(()=>{var t,a,o,u;n&&(G(`${(t=n==null?void 0:n.mobileCountryCode)==null?void 0:t.toString()}${(a=n==null?void 0:n.mobileNumber)==null?void 0:a.toString()}`),U(n==null?void 0:n.name),z((o=n==null?void 0:n.dateOfBirth)==null?void 0:o.split("T")[0]),B(n==null?void 0:n.gender),P((u=n==null?void 0:n.mobileCountryCode)==null?void 0:u.toString()))},[n]);const $=s.useRef(null),ue=()=>{$.current.click()},[fe,y]=s.useState(!1),he=async t=>{var se,ie,re;const a=t.target.files[0];if(!["image/jpeg","image/webp","image/png"].includes(a.type)){_.error("Please upload only valid image files (JPEG, WebP, PNG).",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}const u=2*1024*1024;if(a.size>u){_.error("File size must be lower than 2mb",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}const f=new FormData;f.append("email",n==null?void 0:n.email),f.append("profile",a),f.append("salonId",n==null?void 0:n.salonId);try{y(!0),await de.post("/api/admin/uploadAdminProfilePicture",f,{headers:{"Content-Type":"multipart/form-data"}}),y(!1);const{data:d}=await de.get("/api/admin/adminloggedin");c({type:Je,payload:d}),_.success("Profile upload successfully",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}})}catch(d){if(y(!1),((se=d==null?void 0:d.response)==null?void 0:se.status)===500){_.error("Something went wrong !",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}_.error((re=(ie=d==null?void 0:d.response)==null?void 0:ie.data)==null?void 0:re.message,{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}})}},W=()=>{m||c(Qe(n==null?void 0:n.email,g))},[r,C]=s.useState(["","","",""]),k=s.useRef([]),je=(t,a)=>{const o=[...r];o[t]=a,a&&t<r.length-1&&k.current[t+1].focus(),C(o)},ge=(t,a)=>{if(a.key==="Backspace"&&t>0&&!r[t]){const o=[...r];o[t-1]="",k.current[t-1].focus(),C(o)}a.key==="Enter"&&Y()},T=()=>{p||c(Xe(n==null?void 0:n.email,j))},[l,w]=s.useState(["","","",""]),S=s.useRef([]),xe=(t,a)=>{const o=[...l];o[t]=a,a&&t<l.length-1&&S.current[t+1].focus(),w(o)},be=(t,a)=>{if(a.key==="Backspace"&&t>0&&!l[t]){const o=[...l];o[t-1]="",S.current[t-1].focus(),w(o)}a.key==="Enter"&&q()},[ve,N]=s.useState(!1),ye=()=>{N(t=>!t)},E=t=>{B(t),N(!1)},[Ce,H]=s.useState(!1),J=()=>{if(Ce)_.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const t={email:n==null?void 0:n.email,dateOfBirth:L,mobileNumber:Number(F),countryCode:Number(pe),name:b,gender:v};c(Ze(t,A))}},h=t=>{t.key==="Enter"&&J()},M=t=>{t.key==="Enter"&&Z()},Y=()=>{const t=r==null?void 0:r.join("");c(et(n==null?void 0:n.email,t,g,C,_e))},q=()=>{const t=l==null?void 0:l.join("");c(tt(n==null?void 0:n.email,t,j,w,me))},[Q,ke]=s.useState(""),[O,we]=s.useState(""),[X,Se]=s.useState(""),Ne=x(t=>t.adminUpdateProfile),{loading:Ee}=Ne,Z=()=>{if(O!==X)_.error("New and confirm password donot match",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const t={email:n==null?void 0:n.email,password:O,oldPassword:Q};c(nt(t,A))}},Me=x(t=>t.adminUpdatePassword),{loading:Oe}=Me;x(Pe);const[ee,De]=s.useState(!1),[te,Ie]=s.useState(!1),[ne,Ve]=s.useState(!1),ae=Ye.PhoneNumberUtil.getInstance(),Re=t=>{try{return ae.isValidNumber(ae.parseAndKeepRawInput(t))}catch{return!1}},[Ke,Ae]=s.useState("gb"),Ue=(t,a)=>{const{country:o,inputValue:u}=a;Re(t)?(G(t),P(o==null?void 0:o.dialCode),Ae(o==null?void 0:o.iso2),H(!1)):H(!0)},[Le,D]=s.useState(!1),[ze,j]=s.useState(!1),[Be,g]=s.useState(!1);return e.jsxs("main",{className:i.admin_edit_profile_container,children:[e.jsxs("div",{className:i.admin_edit_profile_container_left,children:[e.jsx("div",{children:e.jsx("p",{children:"Your Profile"})}),e.jsxs("div",{className:i.admin_edit_profile_content_left,children:[e.jsxs("div",{children:[fe?e.jsx(at,{variant:"rectangular",className:i.admin_profile_loader,style:{backgroundColor:!1}}):e.jsx("img",{src:(oe=n==null?void 0:n.profile[0])==null?void 0:oe.url,alt:"profile"}),e.jsx("button",{className:i.upload_image_container,onClick:()=>ue(),children:e.jsx($e,{})}),e.jsx("input",{type:"file",ref:$,style:{display:"none"},onChange:he})]}),e.jsx("p",{children:b}),e.jsx("p",{children:n==null?void 0:n.email})]})]}),e.jsxs("div",{className:i.admin_edit_profile_container_right,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter Name",value:b,onChange:t=>U(t.target.value),onKeyDown:h})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsxs("div",{className:i.admin_edit_email_container,children:[e.jsx("input",{type:"text",placeholder:"Enter Email",value:n==null?void 0:n.email,readOnly:!0}),e.jsx("button",{onClick:()=>W(),className:m?i.admin_verified_icon:i.admin_notverified_icon,title:m?"Verified":"NotVerified",style:{cursor:m?"not-allowed":"pointer"},children:m?e.jsx(le,{}):e.jsx(I,{})})]})]}),e.jsx(K,{open:Be,onClose:()=>g(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:i.modal_common_container,children:[e.jsx("div",{children:e.jsx(We,{})}),e.jsxs("div",{children:[e.jsx("p",{children:"Please check your email"}),e.jsxs("p",{children:["We have sent a code to your ",e.jsx("span",{style:{fontWeight:"600",color:"#0866ff"},children:n==null?void 0:n.email})]}),e.jsx("div",{children:r.map((t,a)=>e.jsx("input",{type:"text",maxLength:1,value:t,autoFocus:a===0,ref:o=>k.current[a]=o,onChange:o=>je(a,o.target.value),onKeyDown:o=>ge(a,o)},a))}),e.jsxs("p",{children:["Didn't get the code ? ",e.jsx("span",{onClick:()=>W(),children:"Click to resend"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{onClick:Y,children:"Verify"})]})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Password"}),e.jsx("input",{type:"text",value:"********",onClick:()=>D(!0),readOnly:!0})]}),e.jsx(K,{open:Le,onClose:()=>D(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:i.modal_container,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Change your password"}),e.jsx("button",{onClick:()=>D(!1),children:e.jsx(I,{})})]}),e.jsxs("div",{className:i.modal_content_container,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Old Password"}),e.jsxs("div",{children:[e.jsx("input",{type:`${te?"text":"password"}`,value:Q,onChange:t=>ke(t.target.value),placeholder:"Enter Old Password",onKeyDown:M}),e.jsx("div",{onClick:()=>Ie(t=>!t),children:te?e.jsx(V,{}):e.jsx(R,{})})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"New Password"}),e.jsxs("div",{children:[e.jsx("input",{type:`${ee?"text":"password"}`,value:O,onChange:t=>we(t.target.value),placeholder:"Enter New Password",onKeyDown:M}),e.jsx("div",{onClick:()=>De(t=>!t),children:ee?e.jsx(V,{}):e.jsx(R,{})})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Confirm Password"}),e.jsxs("div",{children:[e.jsx("input",{type:`${ne?"text":"password"}`,value:X,onChange:t=>Se(t.target.value),placeholder:"Enter Confirm Password",onKeyDown:M}),e.jsx("div",{onClick:()=>Ve(t=>!t),children:ne?e.jsx(V,{}):e.jsx(R,{})})]})]}),e.jsx("button",{className:i.edit_modal_btn,onClick:Z,children:Oe?e.jsx(ce,{}):"Save"})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsxs("div",{className:i.admin_edit_mobile_container,children:[e.jsx("div",{onKeyDown:h,children:e.jsx(qe,{forceDialCode:!0,defaultCountry:Ke,value:F,onChange:(t,a)=>Ue(t,a)})}),e.jsx("button",{onClick:()=>T(),className:p?i.admin_verified_icon:i.admin_notverified_icon,title:p?"Verified":"NotVerified",style:{cursor:p?"not-allowed":"pointer"},children:p?e.jsx(le,{}):e.jsx(I,{})})]})]}),e.jsx(K,{open:ze,onClose:()=>j(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:i.modal_common_container,children:[e.jsx("div",{children:e.jsx(Te,{})}),e.jsxs("div",{children:[e.jsx("p",{children:"Please check your message"}),e.jsxs("p",{children:["We have sent a code to your ",e.jsx("span",{style:{fontWeight:"600",color:"#0866ff"},children:n==null?void 0:n.mobileNumber})]}),e.jsx("div",{children:l.map((t,a)=>e.jsx("input",{type:"text",maxLength:1,value:t,autoFocus:a===0,ref:o=>S.current[a]=o,onChange:o=>xe(a,o.target.value),onKeyDown:o=>be(a,o)},a))}),e.jsxs("p",{children:["Didn't get the code ? ",e.jsx("span",{onClick:()=>T(),children:"Click to resend"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>j(!1),children:"Cancel"}),e.jsx("button",{onClick:q,children:"Verify"})]})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",value:L,onChange:t=>z(t.target.value),onKeyDown:h})]}),e.jsxs("div",{className:i.admin_edit_gender_container,children:[e.jsx("p",{children:"Gender"}),e.jsx("input",{type:"text",value:`${v?`${v}`:""}`,onClick:()=>ye(),readOnly:!0,onKeyDown:h}),ve&&e.jsx(ot,{onClickAway:()=>N(!1),children:e.jsxs("div",{children:[e.jsx("p",{onClick:()=>E("Male"),children:"Male"}),e.jsx("p",{onClick:()=>E("Female"),children:"Female"}),e.jsx("p",{onClick:()=>E("Other"),children:"Other"})]})})]}),e.jsx("button",{className:i.edit_profile_btn,onClick:J,children:Ee?e.jsx(ce,{}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Save"}),e.jsx("div",{children:e.jsx(He,{})})]})})]})]})};export{Vt as default};
