import{r as n,b as h,c as ue,a as xe,u as je,d as fe,j as e,a1 as Y,o as q,a6 as J,C as ge,_}from"./index-u-AATrzO.js";import{f as Ne,i as Se}from"./BarberAction-CYuWmUtf.js";import{B as ye}from"./ButtonLoader-CR5N2D0l.js";import{l as Ie,U as we}from"./libphonenumber-jOZUm_53.js";import{S as Q}from"./Skeleton-Bl1IUrm_.js";import{M as Ee}from"./Modal-ghuyP4Rw.js";import"./clsx-B-dksMZM.js";import"./index-pYybFpgN.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-CWP5Jz8O.js";const ke="_admin_edit_barber_wrapper_1bi5m_1",Ce="_admin_edit_barber_wrapper_left_1bi5m_17",$e="_admin_edit_barber_content_wrapper_left_1bi5m_35",Pe="_edit_barber_btn_1bi5m_74",Te="_admin_edit_barber_wrapper_right_1bi5m_105",We="_admin_edit_barber_content_wrapper_right_1bi5m_127",De="_service_item_1bi5m_166",Oe="_service_add_icon_1bi5m_181",Re="_service_delete_icon_1bi5m_212",Ae="_service_item_top_1bi5m_243",Ue="_service_item_bottom_1bi5m_297",Ve="_admin_edit_barber_content_wrapper_right_error_1bi5m_378",ze="_admin_edit_barber_content_wrapper_right_loading_1bi5m_398",Me="_mobile_modal_1bi5m_412",Ke="_add_services_btn_1bi5m_413",Le="_mobile_add_services_1bi5m_414",He="_error_message_1bi5m_418",Fe="_mobile_service_container_1bi5m_471",t={admin_edit_barber_wrapper:ke,admin_edit_barber_wrapper_left:Ce,admin_edit_barber_content_wrapper_left:$e,edit_barber_btn:Pe,admin_edit_barber_wrapper_right:Te,admin_edit_barber_content_wrapper_right:We,service_item:De,service_add_icon:Oe,service_delete_icon:Re,service_item_top:Ae,service_item_bottom:Ue,admin_edit_barber_content_wrapper_right_error:Ve,admin_edit_barber_content_wrapper_right_loading:ze,mobile_modal:Me,add_services_btn:Ke,mobile_add_services:Le,error_message:He,mobile_service_container:Fe},ar=()=>{var H,F;const[l,u]=n.useState([]),X=h(r=>r.adminAllSalonServices),{loading:Z,resolve:G,response:c}=X;n.useEffect(()=>{c&&u(c)},[c]);const x=h(r=>r.AdminLoggedInMiddleware.adminSalonId),j=ue(),B=xe(),f=je(),a=j==null?void 0:j.state,[b,ee]=n.useState(a==null?void 0:a.name),[w,Ye]=n.useState(a==null?void 0:a.email),[v,re]=n.useState(a==null?void 0:a.nickName),[E,ie]=n.useState(`${a==null?void 0:a.mobileCountryCode}${(H=a==null?void 0:a.mobileNumber)==null?void 0:H.toString()}`),[te,ae]=n.useState(a==null?void 0:a.mobileCountryCode),[g,se]=n.useState((F=a==null?void 0:a.dateOfBirth)==null?void 0:F.split("T")[0]),[s,N]=n.useState(a==null?void 0:a.barberServices);n.useEffect(()=>{f(Ne(x))},[x,f]);const k=r=>{s.includes(r)||N([...s,{...r,barberServiceEWT:r.serviceEWT}])},C=r=>{const d=c.find(i=>i.serviceId===r.serviceId);d&&(N(s.filter(i=>i.serviceId!==r.serviceId)),u(l.map(i=>i.serviceId===r.serviceId?{...i,serviceEWT:d.serviceEWT}:i)))},[$,S]=n.useState("");n.useState("");const[P,y]=n.useState(""),[T,W]=n.useState(""),[D,O]=n.useState(""),[R,ne]=n.useState(""),[de,A]=n.useState(!1),U=()=>{if(!b)return _.error("Please enter name",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Please enter name");if(b.length===0||b.length>20)return _.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Name must be between 1 to 20 characters");if(!v)return _.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Please enter nickname");if(v.length===0||v.length>20)return _.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Nickname must be between 1 to 20 characters");if(de)return _.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),W("Invalid Number");if(!g)return _.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),O("Please select date of birth");if(s.length===0)return _.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),ne("Please provide a service");const r={name:b,email:w,nickName:v,mobileNumber:Number(E),countryCode:Number(te),dateOfBirth:g,salonId:x,barberServices:s};f(Se(r,B))},p=r=>{r.key==="Enter"&&U()},oe=h(r=>r.adminUpdateBarber),{loading:ce}=oe,V=h(fe)==="On",z=(r,d)=>{const i=r.target.value.replace(/[^0-9]/g,""),I=i===""?"":Number(i);s.find(o=>o.serviceId===d.serviceId)?N(s.map(o=>o.serviceId===d.serviceId?{...o,barberServiceEWT:I}:o)):u(c.map(o=>o.serviceId===d.serviceId?{...o,serviceEWT:I}:o))},M=Ie.PhoneNumberUtil.getInstance(),le=r=>{try{return M.isValidNumber(M.parseAndKeepRawInput(r))}catch{return!1}},[_e,me]=n.useState("gb"),be=(r,d)=>{W("");const{country:i,inputValue:I}=d;le(r)?(ie(r),ae(i==null?void 0:i.dialCode),me(i==null?void 0:i.iso2),A(!1)):A(!0)},ve=h(r=>r.adminGetDefaultSalon),{response:m}=ve,[he,K]=n.useState(!1),pe=()=>K(!0),L=()=>K(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${t.admin_edit_barber_wrapper} ${V&&t.dark}`,children:[e.jsxs("div",{className:`${t.admin_edit_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),Z?e.jsxs("div",{className:`${t.admin_edit_barber_content_wrapper_right_loading}`,children:[e.jsx(Q,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}}),e.jsx(Q,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}})]}):G&&(c==null?void 0:c.length)>0?e.jsx("div",{className:`${t.admin_edit_barber_content_wrapper_right}`,children:l==null?void 0:l.map(r=>{var d;return e.jsxs("div",{className:`${t.service_item}`,children:[e.jsxs("div",{className:`${t.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(d=r==null?void 0:r.serviceIcon)==null?void 0:d.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${t.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Y,{})}),e.jsx("input",{type:"text",value:s!=null&&s.find(i=>i.serviceId===r.serviceId)?s==null?void 0:s.find(i=>i.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:i=>z(i,r)}),e.jsx("p",{children:"mins"})]})]})})]}),s.find(i=>i.serviceId===r.serviceId)?e.jsx("button",{className:`${t.service_delete_icon}`,onClick:()=>C(r),children:e.jsx(q,{})}):e.jsx("button",{className:`${t.service_add_icon}`,onClick:()=>k(r),children:e.jsx(J,{})})]},r._id)})}):e.jsx("div",{className:`${t.admin_edit_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${t.admin_edit_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Edit Barber"}),e.jsx("button",{onClick:pe,className:t.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${t.admin_edit_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:b,onChange:r=>{S(""),ee(r.target.value)},placeholder:"Enter Name",onKeyDown:p,style:{border:$&&"0.1rem solid red"}}),e.jsx("p",{className:t.error_message,children:$})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:w,placeholder:"Enter Email",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:v,onChange:r=>{y(""),re(r.target.value)},placeholder:"Enter Nick Name",onKeyDown:p,style:{border:P&&"0.1rem solid red"}}),e.jsx("p",{className:t.error_message,children:P})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:p,style:{border:T&&"0.1rem solid red"},children:e.jsx(we,{forceDialCode:!0,defaultCountry:_e,value:E,onChange:(r,d)=>be(r,d)})})}),e.jsx("p",{className:t.error_message,children:T})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"dd/mm/yy",value:g,onChange:r=>{O(""),se(r.target.value)},style:{colorScheme:V?"dark":"light",border:D&&"0.1rem solid red"},onKeyDown:p}),e.jsx("p",{className:t.error_message,children:D})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:s==null?void 0:s.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:R&&"0.1rem solid red"}}),e.jsx("p",{className:t.error_message,children:R})]}),ce?e.jsx("button",{className:`${t.edit_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(ye,{})}):e.jsx("button",{className:`${t.edit_barber_btn}`,onClick:U,children:"Update"}),e.jsx(Ee,{open:he,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:t.mobile_modal,children:e.jsxs("div",{className:t.mobile_service_container,children:[e.jsx("button",{onClick:L,children:e.jsx(ge,{})}),e.jsx("div",{children:l==null?void 0:l.map(r=>{var d;return e.jsxs("div",{className:`${t.service_item}`,children:[e.jsxs("div",{className:`${t.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(d=r==null?void 0:r.serviceIcon)==null?void 0:d.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${t.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Y,{})}),e.jsx("input",{type:"text",value:s!=null&&s.find(i=>i.serviceId===r.serviceId)?s==null?void 0:s.find(i=>i.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:i=>z(i,r)}),e.jsx("p",{children:"mins"})]})]})})]}),s.find(i=>i.serviceId===r.serviceId)?e.jsx("button",{className:`${t.service_delete_icon}`,onClick:()=>C(r),children:e.jsx(q,{})}):e.jsx("button",{className:`${t.service_add_icon}`,onClick:()=>k(r),children:e.jsx(J,{})})]},r._id)})})]})})]})]})]})})};export{ar as default};
