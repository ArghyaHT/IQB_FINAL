import{r as s,u as p,c as ue,b as xe,a as je,d as fe,j as e,a7 as Q,w as X,ac as Z,C as ge,_ as m}from"./index-zklAvn-K.js";import{f as Ne,i as we}from"./BarberAction-BTxzqJAm.js";import{B as ye}from"./ButtonLoader-DrEEcdA8.js";import{l as ke,U as Se}from"./libphonenumber-D0iGPoNL.js";import{g as Ie}from"./Date-BdTqWCFt.js";import{S as x}from"./Skeleton-OhtcnlLv.js";import{M as Ee}from"./Modal-KFQkxZ6b.js";import"./clsx-B-dksMZM.js";import"./index-DikGMDqK.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-C0jiAxVM.js";const Ce="_admin_edit_barber_wrapper_14auh_1",$e="_admin_edit_barber_wrapper_left_14auh_17",Pe="_admin_edit_barber_content_wrapper_left_14auh_35",ze="_edit_barber_btn_14auh_74",Re="_admin_edit_barber_wrapper_right_14auh_105",Te="_admin_edit_barber_content_wrapper_right_14auh_127",De="_service_item_14auh_140",We="_service_add_icon_14auh_155",Oe="_service_delete_icon_14auh_186",Ae="_service_item_top_14auh_217",Ue="_service_item_bottom_14auh_271",Ve="_admin_edit_barber_content_wrapper_right_error_14auh_352",Me="_admin_edit_barber_content_wrapper_right_loading_14auh_372",Ke="_mobile_modal_14auh_386",Le="_add_services_btn_14auh_387",He="_mobile_add_services_14auh_388",Fe="_error_message_14auh_392",Ye="_mobile_container_14auh_398",qe="_dark_14auh_410",Je="_mobile_service_container_14auh_510",Qe="_admin_mobile_edit_barber_content_wrapper_right_error_14auh_573",i={admin_edit_barber_wrapper:Ce,admin_edit_barber_wrapper_left:$e,admin_edit_barber_content_wrapper_left:Pe,edit_barber_btn:ze,admin_edit_barber_wrapper_right:Re,admin_edit_barber_content_wrapper_right:Te,service_item:De,service_add_icon:We,service_delete_icon:Oe,service_item_top:Ae,service_item_bottom:Ue,admin_edit_barber_content_wrapper_right_error:Ve,admin_edit_barber_content_wrapper_right_loading:Me,mobile_modal:Ke,add_services_btn:Le,mobile_add_services:He,error_message:Fe,mobile_container:Ye,dark:qe,mobile_service_container:Je,admin_mobile_edit_barber_content_wrapper_right_error:Qe},cr=()=>{var q,J;const[_,j]=s.useState([]),G=p(r=>r.adminAllSalonServices),{loading:E,resolve:C,response:c}=G;s.useEffect(()=>{c&&j(c)},[c]);const f=p(r=>r.AdminLoggedInMiddleware.adminSalonId),g=ue(),B=xe(),N=je(),a=g==null?void 0:g.state,[b,ee]=s.useState(a==null?void 0:a.name),[$,Xe]=s.useState(a==null?void 0:a.email),[v,re]=s.useState(a==null?void 0:a.nickName),[P,ie]=s.useState(`${a==null?void 0:a.mobileCountryCode}${(q=a==null?void 0:a.mobileNumber)==null?void 0:q.toString()}`),[te,ae]=s.useState(a==null?void 0:a.mobileCountryCode),[w,ne]=s.useState((J=a==null?void 0:a.dateOfBirth)==null?void 0:J.split("T")[0]),[n,y]=s.useState(a==null?void 0:a.barberServices);s.useEffect(()=>{N(Ne(f))},[f,N]);const z=r=>{n.includes(r)||y([...n,{...r,barberServiceEWT:r.serviceEWT}])},R=r=>{const d=c.find(t=>t.serviceId===r.serviceId);d&&(y(n.filter(t=>t.serviceId!==r.serviceId)),j(_.map(t=>t.serviceId===r.serviceId?{...t,serviceEWT:d.serviceEWT}:t)))},[T,k]=s.useState("");s.useState("");const[D,S]=s.useState(""),[W,O]=s.useState(""),[A,U]=s.useState(""),[V,se]=s.useState(""),[de,M]=s.useState(!1),K=()=>{if(!b)return m.error("Please enter name",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),k("Please enter name");if(b.length===0||b.length>20)return m.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),k("Name must be between 1 to 20 characters");if(!v)return m.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Please enter nickname");if(v.length===0||v.length>20)return m.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Nickname must be between 1 to 20 characters");if(de)return m.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),O("Invalid Number");if(!w)return m.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),U("Please select date of birth");if(n.length===0)return m.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),se("Please provide a service");const r={name:b,email:$,nickName:v,mobileNumber:Number(P),countryCode:Number(te),dateOfBirth:w,salonId:f,barberServices:n};N(we(r,B))},u=r=>{r.key==="Enter"&&K()},oe=p(r=>r.adminUpdateBarber),{loading:ce}=oe,o=p(fe)==="On",L=(r,d)=>{const t=r.target.value.replace(/[^0-9]/g,""),I=t===""?"":Number(t);n.find(l=>l.serviceId===d.serviceId)?y(n.map(l=>l.serviceId===d.serviceId?{...l,barberServiceEWT:I}:l)):j(c.map(l=>l.serviceId===d.serviceId?{...l,serviceEWT:I}:l))},H=ke.PhoneNumberUtil.getInstance(),le=r=>{try{return H.isValidNumber(H.parseAndKeepRawInput(r))}catch{return!1}},[_e,me]=s.useState("gb"),he=(r,d)=>{O("");const{country:t,inputValue:I}=d;le(r)?(ie(r),ae(t==null?void 0:t.dialCode),me(t==null?void 0:t.iso2),M(!1)):M(!0)},be=p(r=>r.adminGetDefaultSalon),{response:h}=be,[ve,F]=s.useState(!1),pe=()=>F(!0),Y=()=>F(!1);return s.useEffect(()=>{const r=document.querySelector(".react-international-phone-input-container .react-international-phone-input");r&&(r.style.color=o?"var(--light-color-4)":"var(--light-color-2)")},[o]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${i.admin_edit_barber_wrapper} ${o&&i.dark}`,children:[e.jsxs("div",{className:`${i.admin_edit_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),E?e.jsxs("div",{className:`${i.admin_edit_barber_content_wrapper_right_loading} ${o&&i.dark}`,children:[e.jsx(x,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}}),e.jsx(x,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}})]}):C&&(c==null?void 0:c.length)>0?e.jsx("div",{className:`${i.admin_edit_barber_content_wrapper_right} ${o&&i.dark}`,children:_==null?void 0:_.map(r=>{var d;return e.jsxs("div",{className:`${i.service_item} ${o&&i.dark}`,children:[e.jsxs("div",{className:`${i.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(d=r==null?void 0:r.serviceIcon)==null?void 0:d.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${i.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[h==null?void 0:h.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Q,{})}),e.jsx("input",{type:"text",value:n!=null&&n.find(t=>t.serviceId===r.serviceId)?n==null?void 0:n.find(t=>t.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:t=>L(t,r)}),e.jsx("p",{children:"mins"})]})]})})]}),n.find(t=>t.serviceId===r.serviceId)?e.jsx("button",{className:`${i.service_delete_icon}`,onClick:()=>R(r),children:e.jsx(X,{})}):e.jsx("button",{className:`${i.service_add_icon}`,onClick:()=>z(r),children:e.jsx(Z,{})})]},r._id)})}):e.jsx("div",{className:`${i.admin_edit_barber_content_wrapper_right_error} ${o&&i.dark}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${i.admin_edit_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Edit Barber"}),e.jsx("button",{onClick:pe,className:i.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${i.admin_edit_barber_content_wrapper_left} ${o&&i.dark}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:b,onChange:r=>{k(""),ee(r.target.value)},placeholder:"Enter Name",onKeyDown:u,style:{border:T&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:T})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:$,placeholder:"Enter Email",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:v,onChange:r=>{S(""),re(r.target.value)},placeholder:"Enter Nick Name",onKeyDown:u,style:{border:D&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:D})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{className:`${i.mobile_container} ${o&&i.dark}`,children:e.jsx("div",{onKeyDown:u,style:{border:W&&"0.1rem solid red"},children:e.jsx(Se,{forceDialCode:!0,defaultCountry:_e,value:P,onChange:(r,d)=>he(r,d)})})}),e.jsx("p",{className:i.error_message,children:W})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"dd/mm/yy",value:w,onChange:r=>{U(""),ne(r.target.value)},style:{colorScheme:o?"dark":"light",border:A&&"0.1rem solid red"},onKeyDown:u,max:Ie()}),e.jsx("p",{className:i.error_message,children:A})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:n==null?void 0:n.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:V&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:V})]}),ce?e.jsx("button",{className:`${i.edit_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(ye,{})}):e.jsx("button",{className:`${i.edit_barber_btn}`,onClick:K,children:"Update"}),e.jsx(Ee,{open:ve,onClose:Y,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:i.mobile_modal,children:e.jsxs("div",{className:`${i.mobile_service_container} ${o&&i.dark}`,children:[e.jsx("button",{onClick:Y,children:e.jsx(ge,{})}),E?e.jsxs("div",{children:[e.jsx(x,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)",marginBottom:"1rem"}}),e.jsx(x,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):C&&(c==null?void 0:c.length)>0?e.jsx("div",{children:_==null?void 0:_.map(r=>{var d;return e.jsxs("div",{className:`${i.service_item} ${o&&i.dark}`,children:[e.jsxs("div",{className:`${i.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(d=r==null?void 0:r.serviceIcon)==null?void 0:d.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${i.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[h==null?void 0:h.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Q,{})}),e.jsx("input",{type:"text",value:n!=null&&n.find(t=>t.serviceId===r.serviceId)?n==null?void 0:n.find(t=>t.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:t=>L(t,r)}),e.jsx("p",{children:"mins"})]})]})})]}),n.find(t=>t.serviceId===r.serviceId)?e.jsx("button",{className:`${i.service_delete_icon}`,onClick:()=>R(r),children:e.jsx(X,{})}):e.jsx("button",{className:`${i.service_add_icon}`,onClick:()=>z(r),children:e.jsx(Z,{})})]},r._id)})}):e.jsx("div",{className:`${i.admin_mobile_edit_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]})})]})]})]})})};export{cr as default};
