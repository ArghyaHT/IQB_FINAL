import{b as l,d as v,u as q,r as c,j as e,t as f,v as C,aB as N,C as k}from"./index-LE4wwcdg.js";import{S}from"./index-BAtn3kHc.js";import{g as L}from"./QueueAction-IuVvU23l.js";const $="_quehistory_wrapper_wbsxw_1",A="_customer_search_wbsxw_26",Q="_quehistory_wrapper_content_wbsxw_62",I="_quehistory_wrapper_content_body_wbsxw_72",E="_quehistory_wrapper_content_body_error_wbsxw_159",s={quehistory_wrapper:$,customer_search:A,quehistory_wrapper_content:Q,quehistory_wrapper_content_body:I,quehistory_wrapper_content_body_error:E},M=()=>{const n=l(v)==="On",h=l(r=>r.AdminLoggedInMiddleware.adminSalonId),_=q(),d=c.useRef(new AbortController);c.useEffect(()=>{const r=new AbortController;return d.current=r,_(L(h,r.signal)),()=>{d.current&&d.current.abort()}},[h,_]);const u=l(r=>r.getAdminQueueListHistory),{loading:x,resolve:m,queueListHistory:t}=u,[o,a]=c.useState([]);c.useEffect(()=>{t&&a(t)},[t]);const[j,y]=c.useState(""),g=r=>{y(r);const i=r.toLowerCase().trim();if(!i)a(t);else{const w=t==null?void 0:t.filter(p=>p.barberName.toLowerCase().includes(i)||p.customerName.toLowerCase().includes(i));a(w)}};return e.jsxs("div",{className:`${s.quehistory_wrapper}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Queue History"}),e.jsxs("div",{className:`${s.customer_search} ${n&&s.dark}`,children:[e.jsx("input",{type:"text",placeholder:"Search Queue",value:j,onChange:r=>g(r.target.value)}),e.jsx("div",{children:e.jsx(f,{})})]})]}),e.jsx("div",{className:`${s.quehistory_wrapper_content}`,children:x?e.jsx("div",{className:s.quehistory_wrapper_content_body,children:e.jsx(S,{count:6,height:"6rem",style:{marginBottom:"1rem"},baseColor:n?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:n?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):m&&(o==null?void 0:o.length)>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${s.quehistory_wrapper_content_body} ${n&&s.dark}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"#"}),e.jsx("p",{children:"Name"}),e.jsx("p",{children:"Barber Name"}),e.jsx("p",{children:"Time Joined Q"}),e.jsx("div",{children:e.jsx("p",{children:"Qg Code"})}),e.jsx("div",{children:e.jsx("p",{children:"EWT"})}),e.jsx("div",{children:e.jsx("p",{children:"Type"})}),e.jsx("div",{children:e.jsx("p",{children:"isAdmin"})}),e.jsx("div",{children:e.jsx("p",{children:"Status"})})]}),o==null?void 0:o.map((r,i)=>e.jsxs("div",{className:`${s.barber_queue_history_content_body_item} ${n&&s.dark}`,style:{borderBottom:o.length-1===i&&"none"},children:[e.jsx("p",{children:r==null?void 0:r.qPosition}),e.jsx("p",{children:r==null?void 0:r.customerName}),e.jsx("p",{children:r==null?void 0:r.barberName}),e.jsx("p",{children:r==null?void 0:r.timeJoinedQ}),e.jsx("div",{children:e.jsx("p",{children:r==null?void 0:r.qgCode})}),e.jsx("div",{children:e.jsx("p",{children:r==null?void 0:r.serviceEWT})}),e.jsx("div",{children:e.jsx("p",{children:(r==null?void 0:r.serviceType)==="Regular"?"-":e.jsx(C,{})})}),e.jsx("div",{children:r!=null&&r.isAdmin?e.jsx("p",{style:{color:"green"},children:e.jsx(N,{})}):e.jsx("p",{style:{fontSize:"2rem",fontWeight:"700",color:"red"},children:e.jsx(k,{})})}),e.jsx("div",{children:e.jsx("p",{style:{color:(r==null?void 0:r.status)=="served"?"green":"red"},children:r==null?void 0:r.status})})]},r==null?void 0:r._id))]})}):e.jsx("div",{className:`${s.quehistory_wrapper_content_body_error} ${n&&s.dark}`,children:e.jsx("p",{children:"No Queue history available"})})})]})};export{M as default};
