import{u as m,b as ge,a as je,r as i,d as Ne,j as e,a6 as ee,w as re,ab as ae,C as we,_ as l}from"./index-BkwjXYND.js";import{f as Se,h as ke}from"./BarberAction-C0S_rnsc.js";import{B as ye}from"./ButtonLoader-nFX9mHfd.js";import{l as Ce,U as ze}from"./libphonenumber-1ls9yItr.js";import{g as Ee}from"./Date-WuVdnklq.js";import{S as g}from"./Skeleton-Ch09blIa.js";import{M as $e}from"./Modal-E2nwvVH8.js";import"./clsx-B-dksMZM.js";import"./index-Dpc-w2NQ.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-BdBgpDHV.js";const Ie="_admin_create_barber_wrapper_1pvzq_1",qe="_admin_create_barber_wrapper_left_1pvzq_17",Pe="_admin_create_barber_content_wrapper_left_1pvzq_35",Re="_create_barber_btn_1pvzq_74",Be="_admin_create_barber_wrapper_right_1pvzq_105",De="_admin_create_barber_content_wrapper_right_1pvzq_127",Ae="_service_item_1pvzq_140",Oe="_service_add_icon_1pvzq_155",Ve="_service_delete_icon_1pvzq_186",Me="_service_item_top_1pvzq_217",Te="_service_item_bottom_1pvzq_271",We="_admin_create_barber_content_wrapper_right_error_1pvzq_352",Ke="_admin_create_barber_content_wrapper_right_loading_1pvzq_372",Le="_mobile_modal_1pvzq_386",He="_add_services_btn_1pvzq_387",Ue="_mobile_add_services_1pvzq_388",Ye="_error_message_1pvzq_392",Je="_mobile_container_1pvzq_398",Fe="_dark_1pvzq_409",Qe="_mobile_service_container_1pvzq_508",Xe="_admin_mobile_create_barber_content_wrapper_right_error_1pvzq_571",a={admin_create_barber_wrapper:Ie,admin_create_barber_wrapper_left:qe,admin_create_barber_content_wrapper_left:Pe,create_barber_btn:Re,admin_create_barber_wrapper_right:Be,admin_create_barber_content_wrapper_right:De,service_item:Ae,service_add_icon:Oe,service_delete_icon:Ve,service_item_top:Me,service_item_bottom:Te,admin_create_barber_content_wrapper_right_error:We,admin_create_barber_content_wrapper_right_loading:Ke,mobile_modal:Le,add_services_btn:He,mobile_add_services:Ue,error_message:Ye,mobile_container:Je,dark:Fe,mobile_service_container:Qe,admin_mobile_create_barber_content_wrapper_right_error:Xe},_r=()=>{const j=m(r=>r.AdminLoggedInMiddleware.adminSalonId),te=ge(),N=je(),[b,E]=i.useState(""),[h,$]=i.useState(""),[p,I]=i.useState(""),[q,ie]=i.useState(""),[ne,se]=i.useState(""),[w,P]=i.useState(""),u=m(r=>r.AdminLoggedInMiddleware.entiredata.user[0]),S=i.useRef(new AbortController);i.useEffect(()=>{if((u==null?void 0:u.salonId)!==0){const r=new AbortController;return S.current=r,N(Se(j,r.signal)),()=>{S.current&&S.current.abort()}}},[j,N,u]);const oe=m(r=>r.adminAllSalonServices),{loading:R,resolve:B,response:n}=oe,[d,D]=i.useState([]),[x,k]=i.useState({});i.useEffect(()=>{if(n){const r={};n.forEach(t=>{r[t._id]=t.serviceEWT}),k(r)}},[n]);const A=r=>{D([...d,r])},O=r=>{D(d.filter(s=>s._id!==r._id));const t={};n.forEach(s=>{t[s._id]=s.serviceEWT}),k(t)},V=(r,t)=>{k({...x,[r]:Number(t)})};i.useEffect(()=>{const r=JSON.parse(localStorage.getItem("barberdata"))||{};E(r.name),$(r.email),I(r.nickName),P(r.dateOfBirth)},[]);const[M,y]=i.useState(""),[T,C]=i.useState(""),[W,z]=i.useState(""),[K,L]=i.useState(""),[H,U]=i.useState(""),[Y,ce]=i.useState(""),[de,J]=i.useState(!1),le=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,F=()=>{if(!b)return l.error("Please enter name",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Please enter name");if(b.length===0||b.length>20)return l.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Name must be between 1 to 20 characters");if(!h)return l.error("Please enter email",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Please enter email");if(!le.test(h))return l.error("Invalid email format",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Invalid email format");if(!p)return l.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),z("Please enter nickname");if(p.length===0||p.length>20)return l.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),z("Nickname must be between 1 to 20 characters");if(de)return l.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),L("Invalid Number");if(!w)return l.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),U("Please select date of birth");if(d.length===0)return l.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),ce("Please provide a service");const r={name:b,email:h,nickName:p,mobileNumber:Number(q),countryCode:Number(ne),dateOfBirth:w,salonId:j,barberServices:d.map(t=>({...t,barberServiceEWT:x[t._id]}))};N(ke(r,te))},v=r=>{r.key==="Enter"&&F()},_e=m(r=>r.adminCreateBarber),{loading:me}=_e,o=m(Ne)==="On",Q=Ce.PhoneNumberUtil.getInstance(),be=r=>{try{return Q.isValidNumber(Q.parseAndKeepRawInput(r))}catch{return!1}},[pe,ve]=i.useState("gb"),he=(r,t,s)=>{L("");const{country:c,inputValue:G}=t;be(r)?(ie(r),se(c==null?void 0:c.dialCode),ve(c==null?void 0:c.iso2),J(!1)):J(!0)},f=(r,t,s,c)=>{c(""),r(t);const G=JSON.parse(localStorage.getItem("barberdata"))||{};localStorage.setItem("barberdata",JSON.stringify({...G,[s]:t}))},ue=m(r=>r.adminGetDefaultSalon),{response:_}=ue,[xe,X]=i.useState(!1),fe=()=>X(!0),Z=()=>X(!1);return i.useEffect(()=>{const r=document.querySelector(".react-international-phone-input-container .react-international-phone-input");r&&(r.style.color=o?"var(--light-color-4)":"var(--light-color-2)")},[o]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${a.admin_create_barber_wrapper} ${o&&a.dark}`,children:[e.jsxs("div",{className:`${a.admin_create_barber_wrapper_right} ${o&&a.dark}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),R?e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_right_loading} ${o&&a.dark}`,children:[e.jsx(g,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}}),e.jsx(g,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):B&&(n==null?void 0:n.length)>0?e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right} ${o&&a.dark}`,children:n==null?void 0:n.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item} ${o&&a.dark}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[_==null?void 0:_.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(ee,{})}),e.jsx("input",{type:"text",value:x[r._id],onChange:s=>{const c=s.target.value.replace(/[^0-9]/g,"");V(r._id,c)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(s=>s._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>O(r),children:e.jsx(re,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>A(r),children:e.jsx(ae,{})})]},r._id)})}):e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right_error} ${o&&a.dark}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${a.admin_create_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Create Barber"}),e.jsx("button",{onClick:fe,className:a.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_left} ${o&&a.dark}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:b,placeholder:"Enter Name",onChange:r=>f(E,r.target.value,"name",y),onKeyDown:v,style:{border:M&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:M})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:h,placeholder:"Enter Email",onChange:r=>f($,r.target.value,"email",C),onKeyDown:v,style:{border:T&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:T})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:p,placeholder:"Enter Nick Name",onChange:r=>f(I,r.target.value,"nickName",z),onKeyDown:v,style:{border:W&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:W})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{className:`${a.mobile_container} ${o&&a.dark}`,children:e.jsx("div",{onKeyDown:v,style:{border:K&&"0.1rem solid red"},children:e.jsx(ze,{forceDialCode:!0,defaultCountry:pe,value:q,onChange:(r,t)=>he(r,t)})})}),e.jsx("p",{className:a.error_message,children:K})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"DD/MM/YY",value:w,onChange:r=>f(P,r.target.value,"dateOfBirth",U),style:{colorScheme:o?"dark":"light",border:H&&"0.1rem solid red"},onKeyDown:v,max:Ee()}),e.jsx("p",{className:a.error_message,children:H})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:d==null?void 0:d.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:Y&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:Y})]}),me?e.jsx("button",{className:`${a.create_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(ye,{})}):e.jsx("button",{className:`${a.create_barber_btn}`,onClick:F,children:"Create"}),e.jsx($e,{open:xe,onClose:Z,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:a.mobile_modal,children:e.jsxs("div",{className:`${a.mobile_service_container} ${o&&a.dark}`,children:[e.jsx("button",{onClick:Z,children:e.jsx(we,{})}),R?e.jsxs("div",{children:[e.jsx(g,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)",marginBottom:"1rem"}}),e.jsx(g,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):B&&(n==null?void 0:n.length)>0?e.jsx("div",{children:n==null?void 0:n.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item} ${o&&a.dark}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[_==null?void 0:_.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(ee,{})}),e.jsx("input",{type:"text",value:x[r._id],onChange:s=>{const c=s.target.value.replace(/[^0-9]/g,"");V(r._id,c)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(s=>s._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>O(r),children:e.jsx(re,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>A(r),children:e.jsx(ae,{})})]},r._id)})}):e.jsx("div",{className:`${a.admin_mobile_create_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]})})]})]})]})})};export{_r as default};
