import{b as _,a as ge,u as Ne,r as i,d as ye,j as e,a2 as X,p as Z,a7 as G,C as Se,_ as d}from"./index-LE4wwcdg.js";import{f as we,h as Ce}from"./BarberAction-C1pW1p8U.js";import{B as Ee}from"./ButtonLoader-evyw5ydJ.js";import{l as ke,U as Ie}from"./libphonenumber-B8L-nP3C.js";import{g as ee}from"./Date-Cuhd30XP.js";import{S as re}from"./Skeleton-BjsL4Azr.js";import{M as $e}from"./Modal-2aVE2EVH.js";import"./clsx-B-dksMZM.js";import"./index-C8qIyj46.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-Difek1I8.js";const Pe="_admin_create_barber_wrapper_12ya3_1",De="_admin_create_barber_wrapper_left_12ya3_17",Ae="_admin_create_barber_content_wrapper_left_12ya3_35",Be="_create_barber_btn_12ya3_74",Re="_admin_create_barber_wrapper_right_12ya3_105",Oe="_admin_create_barber_content_wrapper_right_12ya3_127",Ve="_service_item_12ya3_166",Me="_service_add_icon_12ya3_181",Te="_service_delete_icon_12ya3_212",We="_service_item_top_12ya3_243",ze="_service_item_bottom_12ya3_297",Ke="_admin_create_barber_content_wrapper_right_error_12ya3_378",Le="_admin_create_barber_content_wrapper_right_loading_12ya3_398",He="_mobile_modal_12ya3_412",Ue="_add_services_btn_12ya3_413",Ye="_mobile_add_services_12ya3_414",Je="_error_message_12ya3_418",Fe="_mobile_service_container_12ya3_471",a={admin_create_barber_wrapper:Pe,admin_create_barber_wrapper_left:De,admin_create_barber_content_wrapper_left:Ae,create_barber_btn:Be,admin_create_barber_wrapper_right:Re,admin_create_barber_content_wrapper_right:Oe,service_item:Ve,service_add_icon:Me,service_delete_icon:Te,service_item_top:We,service_item_bottom:ze,admin_create_barber_content_wrapper_right_error:Ke,admin_create_barber_content_wrapper_right_loading:Le,mobile_modal:He,add_services_btn:Ue,mobile_add_services:Ye,error_message:Je,mobile_service_container:Fe},cr=()=>{const f=_(r=>r.AdminLoggedInMiddleware.adminSalonId),ae=ge(),j=Ne(),[m,E]=i.useState(""),[p,k]=i.useState(""),[b,I]=i.useState(""),[$,te]=i.useState(""),[ie,ne]=i.useState(""),[g,P]=i.useState(""),u=_(r=>r.AdminLoggedInMiddleware.entiredata.user[0]),N=i.useRef(new AbortController);i.useEffect(()=>{if((u==null?void 0:u.salonId)!==0){const r=new AbortController;return N.current=r,j(we(f,r.signal)),()=>{N.current&&N.current.abort()}}},[f,j,u]);const se=_(r=>r.adminAllSalonServices),{loading:oe,resolve:ce,response:s}=se,[c,D]=i.useState([]),[v,y]=i.useState({});i.useEffect(()=>{if(s){const r={};s.forEach(t=>{r[t._id]=t.serviceEWT}),y(r)}},[s]);const A=r=>{D([...c,r])},B=r=>{D(c.filter(n=>n._id!==r._id));const t={};s.forEach(n=>{t[n._id]=n.serviceEWT}),y(t)},R=(r,t)=>{y({...v,[r]:Number(t)})};i.useEffect(()=>{const r=JSON.parse(localStorage.getItem("barberdata"))||{};E(r.name),k(r.email),I(r.nickName),P(r.dateOfBirth)},[]);const[O,S]=i.useState(""),[V,w]=i.useState(""),[M,C]=i.useState(""),[T,W]=i.useState(""),[z,K]=i.useState(""),[L,de]=i.useState(""),[le,H]=i.useState(!1),_e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,U=()=>{if(!m)return d.error("Please enter name",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Please enter name");if(m.length===0||m.length>20)return d.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Name must be between 1 to 20 characters");if(!p)return d.error("Please enter email",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),w("Please enter email");if(!_e.test(p))return d.error("Invalid email format",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),w("Invalid email format");if(!b)return d.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Please enter nickname");if(b.length===0||b.length>20)return d.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Nickname must be between 1 to 20 characters");if(le)return d.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),W("Invalid Number");if(!g)return d.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),K("Please select date of birth");if(c.length===0)return d.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),de("Please provide a service");const r={name:m,email:p,nickName:b,mobileNumber:Number($),countryCode:Number(ie),dateOfBirth:g,salonId:f,barberServices:c.map(t=>({...t,barberServiceEWT:v[t._id]}))};j(Ce(r,ae))},h=r=>{r.key==="Enter"&&U()},me=_(r=>r.adminCreateBarber),{loading:be}=me,Y=_(ye)==="On",J=ke.PhoneNumberUtil.getInstance(),he=r=>{try{return J.isValidNumber(J.parseAndKeepRawInput(r))}catch{return!1}},[pe,ue]=i.useState("gb"),ve=(r,t,n)=>{W("");const{country:o,inputValue:Q}=t;he(r)?(te(r),ne(o==null?void 0:o.dialCode),ue(o==null?void 0:o.iso2),H(!1)):H(!0)},x=(r,t,n,o)=>{o(""),r(t);const Q=JSON.parse(localStorage.getItem("barberdata"))||{};localStorage.setItem("barberdata",JSON.stringify({...Q,[n]:t}))},xe=_(r=>r.adminGetDefaultSalon),{response:l}=xe,[fe,F]=i.useState(!1),je=()=>F(!0),q=()=>F(!1);return console.log(ee()),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${a.admin_create_barber_wrapper} ${Y&&a.dark}`,children:[e.jsxs("div",{className:`${a.admin_create_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),oe?e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_right_loading}`,children:[e.jsx(re,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}}),e.jsx(re,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):ce&&(s==null?void 0:s.length)>0?e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right}`,children:s==null?void 0:s.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(X,{})}),e.jsx("input",{type:"text",value:v[r._id],onChange:n=>{const o=n.target.value.replace(/[^0-9]/g,"");R(r._id,o)}}),e.jsx("p",{children:"mins"})]})]})})]}),c.find(n=>n._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>B(r),children:e.jsx(Z,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>A(r),children:e.jsx(G,{})})]},r._id)})}):e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${a.admin_create_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Create Barber"}),e.jsx("button",{onClick:je,className:a.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:m,placeholder:"Enter Name",onChange:r=>x(E,r.target.value,"name",S),onKeyDown:h,style:{border:O&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:O})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:p,placeholder:"Enter Email",onChange:r=>x(k,r.target.value,"email",w),onKeyDown:h,style:{border:V&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:V})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:b,placeholder:"Enter Nick Name",onChange:r=>x(I,r.target.value,"nickName",C),onKeyDown:h,style:{border:M&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:M})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:h,style:{border:T&&"0.1rem solid red"},children:e.jsx(Ie,{forceDialCode:!0,defaultCountry:pe,value:$,onChange:(r,t)=>ve(r,t)})})}),e.jsx("p",{className:a.error_message,children:T})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"DD/MM/YY",value:g,onChange:r=>x(P,r.target.value,"dateOfBirth",K),style:{colorScheme:Y?"dark":"light",border:z&&"0.1rem solid red"},onKeyDown:h,max:ee()}),e.jsx("p",{className:a.error_message,children:z})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:c==null?void 0:c.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:L&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:L})]}),be?e.jsx("button",{className:`${a.create_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(Ee,{})}):e.jsx("button",{className:`${a.create_barber_btn}`,onClick:U,children:"Create"}),e.jsx($e,{open:fe,onClose:q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:a.mobile_modal,children:e.jsxs("div",{className:a.mobile_service_container,children:[e.jsx("button",{onClick:q,children:e.jsx(Se,{})}),e.jsx("div",{children:s==null?void 0:s.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(X,{})}),e.jsx("input",{type:"text",value:v[r._id],onChange:n=>{const o=n.target.value.replace(/[^0-9]/g,"");R(r._id,o)}}),e.jsx("p",{children:"mins"})]})]})})]}),c.find(n=>n._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>B(r),children:e.jsx(Z,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>A(r),children:e.jsx(G,{})})]},r._id)})})]})})]})]})]})})};export{cr as default};
