import{u as rt,a as nt,b as w,r as s,d as st,j as e,a1 as at,aB as we,C as T,aC as it,E as K,N as U,aD as lt,_ as i,q as Ce,aE as dt}from"./index-AHqq0E29.js";import{l as ct,U as mt}from"./libphonenumber-Nqty8yVb.js";import{a as ut,b as _t,c as ft,d as pt,e as ht,f as gt}from"./AdminProfileAction-B--auT7m.js";import{B as Se}from"./ButtonLoader-BZxjNflc.js";import{g as bt}from"./Date-DzNLgd7P.js";import{S as jt}from"./Skeleton-nhWmRQh_.js";import{M as $}from"./Modal-DA7WooJg.js";import{C as xt}from"./ClickAwayListener-DAEYeS7-.js";import"./clsx-B-dksMZM.js";import"./index-B_Pz8DSX.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-0KpZG8d3.js";const yt="_admin_edit_profile_container_1gfec_1",vt="_admin_edit_profile_container_left_1gfec_18",wt="_admin_edit_profile_content_left_1gfec_31",Ct="_admin_edit_profile_container_right_1gfec_70",St="_edit_profile_btn_1gfec_138",kt="_upload_image_container_1gfec_198",Nt="_admin_profile_loader_1gfec_243",Et="_profile_skeleton_img_1gfec_253",Ot="_admin_edit_email_container_1gfec_259",Mt="_admin_verified_icon_1gfec_298",Dt="_admin_notverified_icon_1gfec_315",Rt="_admin_edit_mobile_container_1gfec_332",It="_admin_edit_gender_container_1gfec_401",Vt="_modal_container_1gfec_444",Pt="_modal_content_container_1gfec_510",At="_edit_modal_btn_1gfec_555",Lt="_modal_common_container_1gfec_590",zt="_error_message_1gfec_725",a={admin_edit_profile_container:yt,admin_edit_profile_container_left:vt,admin_edit_profile_content_left:wt,admin_edit_profile_container_right:Ct,edit_profile_btn:St,upload_image_container:kt,admin_profile_loader:Nt,profile_skeleton_img:Et,admin_edit_email_container:Ot,admin_verified_icon:Mt,admin_notverified_icon:Dt,admin_edit_mobile_container:Rt,admin_edit_gender_container:It,modal_container:Vt,modal_content_container:Pt,edit_modal_btn:At,modal_common_container:Lt,error_message:zt},Qt=()=>{var je;const u=rt(),B=nt(),o=w(t=>t.AdminLoggedInMiddleware.entiredata.user[0]),[_,ke]=s.useState(o==null?void 0:o.emailVerified),[f,Ne]=s.useState(o==null?void 0:o.mobileVerified),[l,G]=s.useState(""),[F,W]=s.useState(""),[C,H]=s.useState(""),[Y,q]=s.useState(""),[Ee,J]=s.useState("");s.useEffect(()=>{var t,r,n,h;o&&(q(`${(t=o==null?void 0:o.mobileCountryCode)==null?void 0:t.toString()}${(r=o==null?void 0:o.mobileNumber)==null?void 0:r.toString()}`),G(o==null?void 0:o.name),W((n=o==null?void 0:o.dateOfBirth)==null?void 0:n.split("T")[0]),H(o==null?void 0:o.gender),J((h=o==null?void 0:o.mobileCountryCode)==null?void 0:h.toString()))},[o]);const Q=s.useRef(null),Oe=()=>{Q.current.click()},[Me,S]=s.useState(!1),De=async t=>{var xe,ye,ve;const r=t.target.files[0];if(!["image/jpeg","image/webp","image/png"].includes(r.type)){i.error("Please upload only valid image files (JPEG, WebP, PNG).",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}const h=2*1024*1024;if(r.size>h){i.error("File size must be lower than 2mb",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}const g=new FormData;g.append("email",o==null?void 0:o.email),g.append("profile",r),g.append("salonId",o==null?void 0:o.salonId);try{S(!0),await Ce.post("/api/admin/uploadAdminProfilePicture",g,{headers:{"Content-Type":"multipart/form-data"}}),S(!1);const{data:m}=await Ce.get("/api/admin/adminloggedin");u({type:dt,payload:m}),i.success("Profile upload successfully",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}})}catch(m){if(S(!1),((xe=m==null?void 0:m.response)==null?void 0:xe.status)===500){i.error("Something went wrong !",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}i.error((ve=(ye=m==null?void 0:m.response)==null?void 0:ye.data)==null?void 0:ve.message,{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}})}},X=s.useRef(30),Z="lastEmailVerificationTime",ee=()=>{if(!_){const t=localStorage.getItem(Z),r=Math.floor(Date.now()/1e3);if(t&&r-t<X.current){const n=X.current-(r-t);alert(`Please wait ${n} seconds before resending.`);return}localStorage.setItem(Z,r),u(ut(o==null?void 0:o.email,v))}},[d,k]=s.useState(["","","",""]),N=s.useRef([]),Re=(t,r)=>{const n=[...d];n[t]=r,r&&t<d.length-1&&N.current[t+1].focus(),k(n)},Ie=(t,r)=>{if(r.key==="Backspace"&&t>0&&!d[t]){const n=[...d];n[t-1]="",N.current[t-1].focus(),k(n)}r.key==="Enter"&&le()},te=s.useRef(30),oe="lastMobileVerificationTime",re=()=>{if(!f){const t=localStorage.getItem(oe),r=Math.floor(Date.now()/1e3);if(t&&r-t<te.current){const n=te.current-(r-t);alert(`Please wait ${n} seconds before resending.`);return}localStorage.setItem(oe,r),u(_t(o==null?void 0:o.email,y))}},[c,E]=s.useState(["","","",""]),O=s.useRef([]),Ve=(t,r)=>{const n=[...c];n[t]=r,r&&t<c.length-1&&O.current[t+1].focus(),E(n)},Pe=(t,r)=>{if(r.key==="Backspace"&&t>0&&!c[t]){const n=[...c];n[t-1]="",O.current[t-1].focus(),E(n)}r.key==="Enter"&&de()},[Ae,M]=s.useState(!1),Le=()=>{M(t=>!t)},D=t=>{H(t),M(!1)},[ze,R]=s.useState(!1),[ne,se]=s.useState(""),[ae,Te]=s.useState(""),ie=()=>{if(l.length===0||l.length>20)return i.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),se("Name must be between 1 to 20 characters");if(ze)return i.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),Te("Invalid Number");const t={email:o==null?void 0:o.email,dateOfBirth:F,mobileNumber:Number(Y),countryCode:Number(Ee),name:l,gender:C};u(ft(t,B))},b=t=>{t.key==="Enter"&&ie()},I=t=>{t.key==="Enter"&&fe()},le=()=>{const t=d==null?void 0:d.join("");u(pt(o==null?void 0:o.email,t,v,k,ke))},de=()=>{const t=c==null?void 0:c.join("");u(ht(o==null?void 0:o.email,t,y,E,Ne))},[j,Ke]=s.useState(""),[p,Ue]=s.useState(""),[x,$e]=s.useState(""),Be=w(t=>t.adminUpdateProfile),{loading:Ge}=Be,[ce,V]=s.useState(""),[me,P]=s.useState(""),[ue,A]=s.useState(""),[_e,L]=s.useState(""),fe=()=>{if(!j)return i.error("Please enter password",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),V("Please enter old password");if(j.length<8)return i.error("Password length must be 8 charecters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),V("Old password length must be 8 charecters");if(!p)return i.error("Please enter password",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),P("Please enter new password");if(p.length<8)return i.error("Password length must be 8 charecters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),P("New password length must be 8 charecters");if(!x)return i.error("Please enter confirm password",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),A("Please enter confirm password");if(x.length<8)return i.error("Confirm password length must be 8 charecters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),A("Confirm password length must be 8 charecters");if(p!==x)return i.error("Password and confirm password do not match",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),L("Password and confirm password do not match");const t={email:o==null?void 0:o.email,password:p,oldPassword:j};u(gt(t,B))},Fe=w(t=>t.adminUpdatePassword),{loading:We}=Fe;w(st);const[pe,He]=s.useState(!1),[he,Ye]=s.useState(!1),[ge,qe]=s.useState(!1),be=ct.PhoneNumberUtil.getInstance(),Je=t=>{try{return be.isValidNumber(be.parseAndKeepRawInput(t))}catch{return!1}},[Qe,Xe]=s.useState("gb"),Ze=(t,r)=>{R("");const{country:n,inputValue:h}=r;Je(t)?(q(t),J(n==null?void 0:n.dialCode),Xe(n==null?void 0:n.iso2),R(!1)):R(!0)},[et,z]=s.useState(!1),[tt,y]=s.useState(!1),[ot,v]=s.useState(!1);return e.jsxs("main",{className:a.admin_edit_profile_container,children:[e.jsxs("div",{className:a.admin_edit_profile_container_left,children:[e.jsx("div",{children:e.jsx("p",{children:"Your Profile"})}),e.jsxs("div",{className:a.admin_edit_profile_content_left,children:[e.jsxs("div",{children:[Me?e.jsx(jt,{variant:"rectangular",className:a.admin_profile_loader,style:{backgroundColor:!1}}):e.jsx("img",{src:(je=o==null?void 0:o.profile[0])==null?void 0:je.url,alt:"profile"}),e.jsx("button",{className:a.upload_image_container,onClick:()=>Oe(),children:e.jsx(at,{})}),e.jsx("input",{type:"file",ref:Q,style:{display:"none"},onChange:De})]}),e.jsx("p",{children:(l==null?void 0:l.length)>20?`${l.slice(0,20)}...`:l}),e.jsx("p",{children:o==null?void 0:o.email})]})]}),e.jsxs("div",{className:a.admin_edit_profile_container_right,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter Name",value:l,onChange:t=>{se(""),G(t.target.value)},onKeyDown:b,style:{border:ne?"0.1rem solid red":"none"}}),e.jsx("p",{className:a.error_message,children:ne})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsxs("div",{className:a.admin_edit_email_container,children:[e.jsx("input",{type:"text",placeholder:"Enter Email",value:o==null?void 0:o.email,readOnly:!0}),e.jsx("button",{onClick:()=>ee(),className:_?a.admin_verified_icon:a.admin_notverified_icon,title:_?"Verified":"NotVerified",style:{cursor:_?"not-allowed":"pointer"},children:_?e.jsx(we,{}):e.jsx(T,{})})]})]}),e.jsx($,{open:ot,onClose:()=>v(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:a.modal_common_container,children:[e.jsx("div",{children:e.jsx(it,{})}),e.jsxs("div",{children:[e.jsx("p",{children:"Please check your email"}),e.jsxs("p",{children:["We have sent a code to your ",e.jsx("span",{style:{fontWeight:"600",color:"#000"},children:o==null?void 0:o.email})]}),e.jsx("div",{children:d.map((t,r)=>e.jsx("input",{type:"text",maxLength:1,value:t,autoFocus:r===0,ref:n=>N.current[r]=n,onChange:n=>{/^\d*$/.test(n.target.value)&&Re(r,n.target.value)},onKeyDown:n=>Ie(r,n)},r))}),e.jsxs("p",{children:["Didn't get the code ? ",e.jsx("span",{onClick:()=>ee(),children:"Click to resend"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>v(!1),children:"Cancel"}),e.jsx("button",{onClick:le,children:"Verify"})]})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Password"}),e.jsx("input",{type:"text",value:"********",onClick:()=>z(!0),readOnly:!0})]}),e.jsx($,{open:et,onClose:()=>z(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:a.modal_container,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Change your password"}),e.jsx("button",{onClick:()=>z(!1),children:e.jsx(T,{})})]}),e.jsxs("div",{className:a.modal_content_container,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Old Password"}),e.jsxs("div",{style:{border:ce?"0.1rem solid red":void 0},children:[e.jsx("input",{type:`${he?"text":"password"}`,value:j,onChange:t=>{V(""),Ke(t.target.value)},placeholder:"Enter Old Password",onKeyDown:I}),e.jsx("div",{onClick:()=>Ye(t=>!t),children:he?e.jsx(K,{}):e.jsx(U,{})})]}),e.jsx("p",{className:a.error_message,style:{marginTop:"1rem"},children:ce})]}),e.jsxs("div",{children:[e.jsx("p",{children:"New Password"}),e.jsxs("div",{style:{border:me?"0.1rem solid red":void 0},children:[e.jsx("input",{type:`${pe?"text":"password"}`,value:p,onChange:t=>{L(""),P(""),Ue(t.target.value)},placeholder:"Enter New Password",onKeyDown:I}),e.jsx("div",{onClick:()=>He(t=>!t),children:pe?e.jsx(K,{}):e.jsx(U,{})})]}),e.jsx("p",{className:a.error_message,style:{marginTop:"1rem"},children:me})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Confirm Password"}),e.jsxs("div",{style:{border:ue||_e?"0.1rem solid red":void 0},children:[e.jsx("input",{type:`${ge?"text":"password"}`,value:x,onChange:t=>{L(""),A(""),$e(t.target.value)},placeholder:"Enter Confirm Password",onKeyDown:I}),e.jsx("div",{onClick:()=>qe(t=>!t),children:ge?e.jsx(K,{}):e.jsx(U,{})})]}),e.jsx("p",{className:a.error_message,style:{marginTop:"1rem"},children:ue||_e})]}),e.jsx("button",{className:a.edit_modal_btn,onClick:fe,children:We?e.jsx(Se,{}):"Save"})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsxs("div",{className:a.admin_edit_mobile_container,style:{outline:ae&&"0.1rem solid red"},children:[e.jsx("div",{onKeyDown:b,children:e.jsx(mt,{forceDialCode:!0,defaultCountry:Qe,value:Y,onChange:(t,r)=>Ze(t,r)})}),e.jsx("button",{onClick:()=>re(),className:f?a.admin_verified_icon:a.admin_notverified_icon,title:f?"Verified":"NotVerified",style:{cursor:f?"not-allowed":"pointer"},children:f?e.jsx(we,{}):e.jsx(T,{})})]}),e.jsx("p",{className:a.error_message,children:ae})]}),e.jsx($,{open:tt,onClose:()=>y(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:a.modal_common_container,children:[e.jsx("div",{children:e.jsx(lt,{})}),e.jsxs("div",{children:[e.jsx("p",{children:"Please check your message"}),e.jsxs("p",{children:["We have sent a code to your ",e.jsx("span",{style:{fontWeight:"600",color:"#000"},children:o==null?void 0:o.mobileNumber})]}),e.jsx("div",{children:c.map((t,r)=>e.jsx("input",{type:"text",maxLength:1,value:t,autoFocus:r===0,ref:n=>O.current[r]=n,onChange:n=>{/^\d*$/.test(n.target.value)&&Ve(r,n.target.value)},onKeyDown:n=>Pe(r,n)},r))}),e.jsxs("p",{children:["Didn't get the code ?",e.jsx("span",{onClick:()=>re(),children:"Click to resend"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>y(!1),children:"Cancel"}),e.jsx("button",{onClick:de,children:"Verify"})]})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",value:F,onChange:t=>W(t.target.value),onKeyDown:b,max:bt()})]}),e.jsxs("div",{className:a.admin_edit_gender_container,children:[e.jsx("p",{children:"Gender"}),e.jsx("input",{type:"text",value:`${C?`${C}`:""}`,onClick:()=>Le(),readOnly:!0,onKeyDown:b}),Ae&&e.jsx(xt,{onClickAway:()=>M(!1),children:e.jsxs("div",{children:[e.jsx("p",{onClick:()=>D("Male"),children:"Male"}),e.jsx("p",{onClick:()=>D("Female"),children:"Female"}),e.jsx("p",{onClick:()=>D("Other"),children:"Other"})]})})]}),e.jsx("button",{className:a.edit_profile_btn,onClick:ie,children:Ge?e.jsx(Se,{}):"Save"})]})]})};export{Qt as default};
