import{u as Fe,a as Ge,b,r as s,d as Pe,j as e,a4 as $e,aF as le,C as V,aG as We,E as I,N as R,aH as He,_,p as de,aI as Te}from"./index-BDulmyhd.js";import{l as Je,U as Ye}from"./libphonenumber-igepCbRD.js";import{a as qe,b as Qe,c as Xe,d as Ze,e as et,f as tt}from"./AdminProfileAction-cm1g-gft.js";import{B as ce}from"./ButtonLoader-vWa1RlZO.js";import{S as nt}from"./Skeleton-mFzNuG0T.js";import{M as A}from"./Modal-DMpTHr2n.js";import{C as at}from"./ClickAwayListener-BJ2-LDSU.js";import"./clsx-B-dksMZM.js";import"./index-vZnjeNda.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-WAPy6O1C.js";const ot="_admin_edit_profile_container_1cabx_1",st="_admin_edit_profile_container_left_1cabx_18",it="_admin_edit_profile_content_left_1cabx_31",rt="_admin_edit_profile_container_right_1cabx_70",lt="_edit_profile_btn_1cabx_135",dt="_upload_image_container_1cabx_195",ct="_admin_profile_loader_1cabx_240",_t="_profile_skeleton_img_1cabx_250",mt="_admin_edit_email_container_1cabx_256",pt="_admin_verified_icon_1cabx_295",ut="_admin_notverified_icon_1cabx_312",ft="_admin_edit_mobile_container_1cabx_329",ht="_admin_edit_gender_container_1cabx_398",xt="_modal_container_1cabx_441",jt="_modal_content_container_1cabx_507",bt="_edit_modal_btn_1cabx_552",gt="_modal_common_container_1cabx_587",i={admin_edit_profile_container:ot,admin_edit_profile_container_left:st,admin_edit_profile_content_left:it,admin_edit_profile_container_right:rt,edit_profile_btn:lt,upload_image_container:dt,admin_profile_loader:ct,profile_skeleton_img:_t,admin_edit_email_container:mt,admin_verified_icon:pt,admin_notverified_icon:ut,admin_edit_mobile_container:ft,admin_edit_gender_container:ht,modal_container:xt,modal_content_container:jt,edit_modal_btn:bt,modal_common_container:gt},Vt=()=>{var oe;const c=Fe(),K=Ge(),n=b(t=>t.AdminLoggedInMiddleware.entiredata.user[0]),[m,_e]=s.useState(n==null?void 0:n.emailVerified),[p,me]=s.useState(n==null?void 0:n.mobileVerified),[g,U]=s.useState(""),[L,z]=s.useState(""),[y,B]=s.useState(""),[F,G]=s.useState(""),[pe,P]=s.useState("");s.useEffect(()=>{var t,a,o,u;n&&(G(`${(t=n==null?void 0:n.mobileCountryCode)==null?void 0:t.toString()}${(a=n==null?void 0:n.mobileNumber)==null?void 0:a.toString()}`),U(n==null?void 0:n.name),z((o=n==null?void 0:n.dateOfBirth)==null?void 0:o.split("T")[0]),B(n==null?void 0:n.gender),P((u=n==null?void 0:n.mobileCountryCode)==null?void 0:u.toString()))},[n]);const $=s.useRef(null),ue=()=>{$.current.click()},[fe,v]=s.useState(!1),he=async t=>{var se,ie,re;const a=t.target.files[0];if(!["image/jpeg","image/webp","image/png"].includes(a.type)){_.error("Please upload only valid image files (JPEG, WebP, PNG).",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}const u=2*1024*1024;if(a.size>u){_.error("File size must be lower than 2mb",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}const f=new FormData;f.append("email",n==null?void 0:n.email),f.append("profile",a),f.append("salonId",n==null?void 0:n.salonId);try{v(!0),await de.post("/api/admin/uploadAdminProfilePicture",f,{headers:{"Content-Type":"multipart/form-data"}}),v(!1);const{data:d}=await de.get("/api/admin/adminloggedin");c({type:Te,payload:d}),_.success("Profile upload successfully",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}})}catch(d){if(v(!1),((se=d==null?void 0:d.response)==null?void 0:se.status)===500){_.error("Something went wrong !",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});return}_.error((re=(ie=d==null?void 0:d.response)==null?void 0:ie.data)==null?void 0:re.message,{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}})}},W=()=>{m||c(qe(n==null?void 0:n.email,j))},[r,C]=s.useState(["","","",""]),w=s.useRef([]),xe=(t,a)=>{const o=[...r];o[t]=a,a&&t<r.length-1&&w.current[t+1].focus(),C(o)},je=(t,a)=>{if(a.key==="Backspace"&&t>0&&!r[t]){const o=[...r];o[t-1]="",w.current[t-1].focus(),C(o)}a.key==="Enter"&&Y()},H=()=>{p||c(Qe(n==null?void 0:n.email,x))},[l,S]=s.useState(["","","",""]),k=s.useRef([]),be=(t,a)=>{const o=[...l];o[t]=a,a&&t<l.length-1&&k.current[t+1].focus(),S(o)},ge=(t,a)=>{if(a.key==="Backspace"&&t>0&&!l[t]){const o=[...l];o[t-1]="",k.current[t-1].focus(),S(o)}a.key==="Enter"&&q()},[ye,N]=s.useState(!1),ve=()=>{N(t=>!t)},E=t=>{B(t),N(!1)},[Ce,T]=s.useState(!1),J=()=>{if(Ce)_.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const t={email:n==null?void 0:n.email,dateOfBirth:L,mobileNumber:Number(F),countryCode:Number(pe),name:g,gender:y};c(Xe(t,K))}},h=t=>{t.key==="Enter"&&J()},O=t=>{t.key==="Enter"&&Z()},Y=()=>{const t=r==null?void 0:r.join("");c(Ze(n==null?void 0:n.email,t,j,C,_e))},q=()=>{const t=l==null?void 0:l.join("");c(et(n==null?void 0:n.email,t,x,S,me))},[Q,we]=s.useState(""),[M,Se]=s.useState(""),[X,ke]=s.useState(""),Ne=b(t=>t.adminUpdateProfile),{loading:Ee}=Ne,Z=()=>{if(M!==X)_.error("New and confirm password donot match",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const t={email:n==null?void 0:n.email,password:M,oldPassword:Q};c(tt(t,K))}},Oe=b(t=>t.adminUpdatePassword),{loading:Me}=Oe;b(Pe);const[ee,De]=s.useState(!1),[te,Ve]=s.useState(!1),[ne,Ie]=s.useState(!1),ae=Je.PhoneNumberUtil.getInstance(),Re=t=>{try{return ae.isValidNumber(ae.parseAndKeepRawInput(t))}catch{return!1}},[Ae,Ke]=s.useState("gb"),Ue=(t,a)=>{const{country:o,inputValue:u}=a;Re(t)?(G(t),P(o==null?void 0:o.dialCode),Ke(o==null?void 0:o.iso2),T(!1)):T(!0)},[Le,D]=s.useState(!1),[ze,x]=s.useState(!1),[Be,j]=s.useState(!1);return e.jsxs("main",{className:i.admin_edit_profile_container,children:[e.jsxs("div",{className:i.admin_edit_profile_container_left,children:[e.jsx("div",{children:e.jsx("p",{children:"Your Profile"})}),e.jsxs("div",{className:i.admin_edit_profile_content_left,children:[e.jsxs("div",{children:[fe?e.jsx(nt,{variant:"rectangular",className:i.admin_profile_loader,style:{backgroundColor:!1}}):e.jsx("img",{src:(oe=n==null?void 0:n.profile[0])==null?void 0:oe.url,alt:"profile"}),e.jsx("button",{className:i.upload_image_container,onClick:()=>ue(),children:e.jsx($e,{})}),e.jsx("input",{type:"file",ref:$,style:{display:"none"},onChange:he})]}),e.jsx("p",{children:g}),e.jsx("p",{children:n==null?void 0:n.email})]})]}),e.jsxs("div",{className:i.admin_edit_profile_container_right,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter Name",value:g,onChange:t=>U(t.target.value),onKeyDown:h})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsxs("div",{className:i.admin_edit_email_container,children:[e.jsx("input",{type:"text",placeholder:"Enter Email",value:n==null?void 0:n.email,readOnly:!0}),e.jsx("button",{onClick:()=>W(),className:m?i.admin_verified_icon:i.admin_notverified_icon,title:m?"Verified":"NotVerified",style:{cursor:m?"not-allowed":"pointer"},children:m?e.jsx(le,{}):e.jsx(V,{})})]})]}),e.jsx(A,{open:Be,onClose:()=>j(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:i.modal_common_container,children:[e.jsx("div",{children:e.jsx(We,{})}),e.jsxs("div",{children:[e.jsx("p",{children:"Please check your email"}),e.jsxs("p",{children:["We have sent a code to your ",e.jsx("span",{style:{fontWeight:"600",color:"#0866ff"},children:n==null?void 0:n.email})]}),e.jsx("div",{children:r.map((t,a)=>e.jsx("input",{type:"text",maxLength:1,value:t,autoFocus:a===0,ref:o=>w.current[a]=o,onChange:o=>xe(a,o.target.value),onKeyDown:o=>je(a,o)},a))}),e.jsxs("p",{children:["Didn't get the code ? ",e.jsx("span",{onClick:()=>W(),children:"Click to resend"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>j(!1),children:"Cancel"}),e.jsx("button",{onClick:Y,children:"Verify"})]})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Password"}),e.jsx("input",{type:"text",value:"********",onClick:()=>D(!0),readOnly:!0})]}),e.jsx(A,{open:Le,onClose:()=>D(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:i.modal_container,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Change your password"}),e.jsx("button",{onClick:()=>D(!1),children:e.jsx(V,{})})]}),e.jsxs("div",{className:i.modal_content_container,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Old Password"}),e.jsxs("div",{children:[e.jsx("input",{type:`${te?"text":"password"}`,value:Q,onChange:t=>we(t.target.value),placeholder:"Enter Old Password",onKeyDown:O}),e.jsx("div",{onClick:()=>Ve(t=>!t),children:te?e.jsx(I,{}):e.jsx(R,{})})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"New Password"}),e.jsxs("div",{children:[e.jsx("input",{type:`${ee?"text":"password"}`,value:M,onChange:t=>Se(t.target.value),placeholder:"Enter New Password",onKeyDown:O}),e.jsx("div",{onClick:()=>De(t=>!t),children:ee?e.jsx(I,{}):e.jsx(R,{})})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Confirm Password"}),e.jsxs("div",{children:[e.jsx("input",{type:`${ne?"text":"password"}`,value:X,onChange:t=>ke(t.target.value),placeholder:"Enter Confirm Password",onKeyDown:O}),e.jsx("div",{onClick:()=>Ie(t=>!t),children:ne?e.jsx(I,{}):e.jsx(R,{})})]})]}),e.jsx("button",{className:i.edit_modal_btn,onClick:Z,children:Me?e.jsx(ce,{}):"Save"})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsxs("div",{className:i.admin_edit_mobile_container,children:[e.jsx("div",{onKeyDown:h,children:e.jsx(Ye,{forceDialCode:!0,defaultCountry:Ae,value:F,onChange:(t,a)=>Ue(t,a)})}),e.jsx("button",{onClick:()=>H(),className:p?i.admin_verified_icon:i.admin_notverified_icon,title:p?"Verified":"NotVerified",style:{cursor:p?"not-allowed":"pointer"},children:p?e.jsx(le,{}):e.jsx(V,{})})]})]}),e.jsx(A,{open:ze,onClose:()=>x(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:i.modal_common_container,children:[e.jsx("div",{children:e.jsx(He,{})}),e.jsxs("div",{children:[e.jsx("p",{children:"Please check your message"}),e.jsxs("p",{children:["We have sent a code to your ",e.jsx("span",{style:{fontWeight:"600",color:"#0866ff"},children:n==null?void 0:n.mobileNumber})]}),e.jsx("div",{children:l.map((t,a)=>e.jsx("input",{type:"text",maxLength:1,value:t,autoFocus:a===0,ref:o=>k.current[a]=o,onChange:o=>be(a,o.target.value),onKeyDown:o=>ge(a,o)},a))}),e.jsxs("p",{children:["Didn't get the code ? ",e.jsx("span",{onClick:()=>H(),children:"Click to resend"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>x(!1),children:"Cancel"}),e.jsx("button",{onClick:q,children:"Verify"})]})]})]})}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",value:L,onChange:t=>z(t.target.value),onKeyDown:h})]}),e.jsxs("div",{className:i.admin_edit_gender_container,children:[e.jsx("p",{children:"Gender"}),e.jsx("input",{type:"text",value:`${y?`${y}`:""}`,onClick:()=>ve(),readOnly:!0,onKeyDown:h}),ye&&e.jsx(at,{onClickAway:()=>N(!1),children:e.jsxs("div",{children:[e.jsx("p",{onClick:()=>E("Male"),children:"Male"}),e.jsx("p",{onClick:()=>E("Female"),children:"Female"}),e.jsx("p",{onClick:()=>E("Other"),children:"Other"})]})})]}),e.jsx("button",{className:i.edit_profile_btn,onClick:J,children:Ee?e.jsx(ce,{}):"Save"})]})]})};export{Vt as default};
