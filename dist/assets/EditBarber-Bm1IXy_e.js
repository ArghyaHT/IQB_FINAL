import{r as d,u,f as ye,b as Se,a as ke,d as Ce,j as e,a7 as G,C as Ee,_ as m}from"./index-smej7xwq.js";import{f as Ie,i as $e}from"./BarberAction-B1rG4jqV.js";import{B as De}from"./ButtonLoader-BLdiC7PJ.js";import{l as Pe,U as ze}from"./libphonenumber-PSfFT2tU.js";import{g as Ae,C as Re}from"./Date-gKmymVnx.js";import{S as f}from"./Skeleton-D-WD51In.js";import{C as Te}from"./ClickAwayListener-CmpceTmi.js";import{M as Oe}from"./Modal-CbCgZbhR.js";import"./clsx-B-dksMZM.js";import"./index-CtLL9ryC.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-CSb6vkGd.js";const We="_admin_edit_barber_wrapper_10gj3_1",Me="_admin_edit_barber_wrapper_left_10gj3_17",Ve="_admin_edit_barber_content_wrapper_left_10gj3_35",Ue="_edit_barber_btn_10gj3_74",Le="_admin_edit_barber_wrapper_right_10gj3_105",Ye="_admin_edit_barber_content_wrapper_right_10gj3_127",Ke="_service_item_10gj3_140",He="_service_add_icon_10gj3_155",Fe="_service_delete_icon_10gj3_187",qe="_service_item_top_10gj3_219",Je="_service_item_bottom_10gj3_273",Qe="_admin_edit_barber_content_wrapper_right_error_10gj3_354",Xe="_admin_edit_barber_content_wrapper_right_loading_10gj3_374",Ze="_mobile_modal_10gj3_388",Ge="_add_services_btn_10gj3_389",Be="_mobile_add_services_10gj3_390",er="_error_message_10gj3_394",rr="_mobile_container_10gj3_400",ir="_calender_container_10gj3_409",tr="_calender_drop_container_10gj3_413",ar="_dark_10gj3_423",nr="_mobile_service_container_10gj3_525",sr="_admin_mobile_edit_barber_content_wrapper_right_error_10gj3_588",i={admin_edit_barber_wrapper:We,admin_edit_barber_wrapper_left:Me,admin_edit_barber_content_wrapper_left:Ve,edit_barber_btn:Ue,admin_edit_barber_wrapper_right:Le,admin_edit_barber_content_wrapper_right:Ye,service_item:Ke,service_add_icon:He,service_delete_icon:Fe,service_item_top:qe,service_item_bottom:Je,admin_edit_barber_content_wrapper_right_error:Qe,admin_edit_barber_content_wrapper_right_loading:Xe,mobile_modal:Ze,add_services_btn:Ge,mobile_add_services:Be,error_message:er,mobile_container:rr,calender_container:ir,calender_drop_container:tr,dark:ar,mobile_service_container:nr,admin_mobile_edit_barber_content_wrapper_right_error:sr},fr=()=>{var X,Z;const[_,N]=d.useState([]),B=u(r=>r.adminAllSalonServices),{loading:D,resolve:P,response:l}=B;d.useEffect(()=>{l&&N(l)},[l]);const w=u(r=>r.AdminLoggedInMiddleware.adminSalonId),y=ye(),ee=Se(),S=ke(),n=y==null?void 0:y.state,[b,re]=d.useState(n==null?void 0:n.name),[z,dr]=d.useState(n==null?void 0:n.email),[v,ie]=d.useState(n==null?void 0:n.nickName),[A,te]=d.useState(`${n==null?void 0:n.mobileCountryCode}${(X=n==null?void 0:n.mobileNumber)==null?void 0:X.toString()}`),[ae,ne]=d.useState(n==null?void 0:n.mobileCountryCode),[j,R]=d.useState((Z=n==null?void 0:n.dateOfBirth)==null?void 0:Z.split("T")[0]),[s,k]=d.useState(n==null?void 0:n.barberServices);d.useEffect(()=>{S(Ie(w))},[w,S]);const T=r=>{s.includes(r)||k([...s,{...r,barberServiceEWT:r.serviceEWT}])},O=r=>{const a=l.find(t=>t.serviceId===r.serviceId);a&&(k(s.filter(t=>t.serviceId!==r.serviceId)),N(_.map(t=>t.serviceId===r.serviceId?{...t,serviceEWT:a.serviceEWT}:t)))},[W,C]=d.useState("");d.useState("");const[M,E]=d.useState(""),[V,U]=d.useState(""),[g,I]=d.useState(""),[L,se]=d.useState(""),[de,Y]=d.useState(!1),K=()=>{if(!b)return m.error("Please enter name",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Please enter name");if(b.length===0||b.length>20)return m.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),C("Name must be between 1 to 20 characters");if(!v)return m.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),E("Please enter nickname");if(v.length===0||v.length>20)return m.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),E("Nickname must be between 1 to 20 characters");if(de)return m.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),U("Invalid Number");if(!j)return m.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),I("Please select date of birth");if(s.length===0)return m.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),se("Please provide a service");const r={name:b,email:z,nickName:v,mobileNumber:Number(A),countryCode:Number(ae),dateOfBirth:j,salonId:w,barberServices:s};S($e(r,ee))},x=r=>{r.key==="Enter"&&K()},oe=u(r=>r.adminUpdateBarber),{loading:ce}=oe,o=u(Ce)==="On",H=(r,a)=>{const t=r.target.value.replace(/[^0-9]/g,""),h=t===""?"":Number(t);s.find(c=>c.serviceId===a.serviceId)?k(s.map(c=>c.serviceId===a.serviceId?{...c,barberServiceEWT:h}:c)):N(l.map(c=>c.serviceId===a.serviceId?{...c,serviceEWT:h}:c))},F=Pe.PhoneNumberUtil.getInstance(),le=r=>{try{return F.isValidNumber(F.parseAndKeepRawInput(r))}catch{return!1}},[_e,me]=d.useState("gb"),pe=(r,a)=>{U("");const{country:t,inputValue:h}=a;le(r)?(te(r),ne(t==null?void 0:t.dialCode),me(t==null?void 0:t.iso2),Y(!1)):Y(!0)},be=u(r=>r.adminGetDefaultSalon),{response:p}=be,[ve,q]=d.useState(!1),he=()=>q(!0),J=()=>q(!1);d.useEffect(()=>{const r=document.querySelector(".react-international-phone-input-container .react-international-phone-input");r&&(r.style.color=o?"var(--light-color-4)":"var(--light-color-2)")},[o]);const[ue,$]=d.useState(!1),je=()=>{$(!1)},[ge,xe]=d.useState(new Date),fe=r=>{const a=new Date(r),t=a.getFullYear(),h=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0");return`${t}-${h}-${c}`},Ne=r=>{const a=fe(r);xe(a),I(""),R(a),$(!1)},[we,Q]=d.useState(!1);return d.useEffect(()=>{const r=()=>{window.innerWidth<=576?Q(!0):Q(!1)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${i.admin_edit_barber_wrapper} ${o&&i.dark}`,children:[e.jsxs("div",{className:`${i.admin_edit_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),D?e.jsxs("div",{className:`${i.admin_edit_barber_content_wrapper_right_loading} ${o&&i.dark}`,children:[e.jsx(f,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}}),e.jsx(f,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}})]}):P&&(l==null?void 0:l.length)>0?e.jsx("div",{className:`${i.admin_edit_barber_content_wrapper_right} ${o&&i.dark}`,children:_==null?void 0:_.map(r=>{var a;return e.jsxs("div",{className:`${i.service_item} ${o&&i.dark}`,children:[e.jsxs("div",{className:`${i.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${i.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[p==null?void 0:p.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(G,{})}),e.jsx("input",{type:"text",value:s!=null&&s.find(t=>t.serviceId===r.serviceId)?s==null?void 0:s.find(t=>t.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:t=>H(t,r)}),e.jsx("p",{children:"mins"})]})]})})]}),s.find(t=>t.serviceId===r.serviceId)?e.jsx("button",{className:`${i.service_delete_icon}`,onClick:()=>O(r),children:"Delete"}):e.jsx("button",{className:`${i.service_add_icon}`,onClick:()=>T(r),children:"Add"})]},r._id)})}):e.jsx("div",{className:`${i.admin_edit_barber_content_wrapper_right_error} ${o&&i.dark}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${i.admin_edit_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Edit Barber"}),e.jsx("button",{onClick:he,className:i.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${i.admin_edit_barber_content_wrapper_left} ${o&&i.dark}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:b,onChange:r=>{C(""),re(r.target.value)},placeholder:"Enter Name",onKeyDown:x,style:{border:W&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:W})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:z,placeholder:"Enter Email",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:v,onChange:r=>{E(""),ie(r.target.value)},placeholder:"Enter Nick Name",onKeyDown:x,style:{border:M&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:M})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{className:`${i.mobile_container} ${o&&i.dark}`,children:e.jsx("div",{onKeyDown:x,style:{border:V&&"0.1rem solid red"},children:e.jsx(ze,{forceDialCode:!0,defaultCountry:_e,value:A,onChange:(r,a)=>pe(r,a)})})}),e.jsx("p",{className:i.error_message,children:V})]}),we?e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"dd/mm/yy",value:j,onChange:r=>{I(""),R(r.target.value)},style:{colorScheme:o?"dark":"light",border:g&&"0.1rem solid red"},onKeyDown:x,max:Ae()}),e.jsx("p",{className:i.error_message,children:g})]}):e.jsxs("div",{className:i.calender_container,children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"text",placeholder:"Select Date",value:j,onClick:()=>$(!0),readOnly:!0,style:{border:g&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:g}),ue&&e.jsx(Te,{onClickAway:je,children:e.jsx("div",{className:i.calender_drop_container,children:e.jsx(Re,{onChange:Ne,value:ge,maxDate:new Date})})})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:s==null?void 0:s.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:L&&"0.1rem solid red"}}),e.jsx("p",{className:i.error_message,children:L})]}),ce?e.jsx("button",{className:`${i.edit_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(De,{})}):e.jsx("button",{className:`${i.edit_barber_btn}`,onClick:K,children:"Update"}),e.jsx(Oe,{open:ve,onClose:J,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:i.mobile_modal,children:e.jsxs("div",{className:`${i.mobile_service_container} ${o&&i.dark}`,children:[e.jsx("button",{onClick:J,children:e.jsx(Ee,{})}),D?e.jsxs("div",{children:[e.jsx(f,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)",marginBottom:"1rem"}}),e.jsx(f,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):P&&(l==null?void 0:l.length)>0?e.jsx("div",{children:_==null?void 0:_.map(r=>{var a;return e.jsxs("div",{className:`${i.service_item} ${o&&i.dark}`,children:[e.jsxs("div",{className:`${i.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${i.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[p==null?void 0:p.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(G,{})}),e.jsx("input",{type:"text",value:s!=null&&s.find(t=>t.serviceId===r.serviceId)?s==null?void 0:s.find(t=>t.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:t=>H(t,r)}),e.jsx("p",{children:"mins"})]})]})})]}),s.find(t=>t.serviceId===r.serviceId)?e.jsx("button",{className:`${i.service_delete_icon}`,onClick:()=>O(r),children:"Delete"}):e.jsx("button",{className:`${i.service_add_icon}`,onClick:()=>T(r),children:"Add"})]},r._id)})}):e.jsx("div",{className:`${i.admin_mobile_edit_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]})})]})]})]})})};export{fr as default};
