import{u as m,b as Se,a as Ce,r as n,d as Ee,j as e,a7 as ae,C as $e,_ as l}from"./index-smej7xwq.js";import{f as De,h as Ie}from"./BarberAction-B1rG4jqV.js";import{B as Ae}from"./ButtonLoader-BLdiC7PJ.js";import{l as Be,U as Pe}from"./libphonenumber-PSfFT2tU.js";import{g as Re,C as Oe}from"./Date-gKmymVnx.js";import{S as k}from"./Skeleton-D-WD51In.js";import{C as Me}from"./ClickAwayListener-CmpceTmi.js";import{M as Ve}from"./Modal-CbCgZbhR.js";import"./clsx-B-dksMZM.js";import"./index-CtLL9ryC.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-CSb6vkGd.js";const Te="_admin_create_barber_wrapper_kzyxz_1",We="_admin_create_barber_wrapper_left_kzyxz_17",Ye="_admin_create_barber_content_wrapper_left_kzyxz_35",Le="_create_barber_btn_kzyxz_74",Ke="_admin_create_barber_wrapper_right_kzyxz_105",He="_admin_create_barber_content_wrapper_right_kzyxz_127",Ue="_service_item_kzyxz_140",Fe="_service_add_icon_kzyxz_155",Je="_service_delete_icon_kzyxz_187",qe="_service_item_top_kzyxz_219",Qe="_service_item_bottom_kzyxz_273",Xe="_admin_create_barber_content_wrapper_right_error_kzyxz_354",Ze="_admin_create_barber_content_wrapper_right_loading_kzyxz_374",Ge="_mobile_modal_kzyxz_388",er="_add_services_btn_kzyxz_389",rr="_mobile_add_services_kzyxz_390",ar="_error_message_kzyxz_394",tr="_mobile_container_kzyxz_400",nr="_calender_container_kzyxz_409",ir="_calender_drop_container_kzyxz_413",sr="_dark_kzyxz_422",or="_mobile_service_container_kzyxz_522",cr="_admin_mobile_create_barber_content_wrapper_right_error_kzyxz_585",a={admin_create_barber_wrapper:Te,admin_create_barber_wrapper_left:We,admin_create_barber_content_wrapper_left:Ye,create_barber_btn:Le,admin_create_barber_wrapper_right:Ke,admin_create_barber_content_wrapper_right:He,service_item:Ue,service_add_icon:Fe,service_delete_icon:Je,service_item_top:qe,service_item_bottom:Qe,admin_create_barber_content_wrapper_right_error:Xe,admin_create_barber_content_wrapper_right_loading:Ze,mobile_modal:Ge,add_services_btn:er,mobile_add_services:rr,error_message:ar,mobile_container:tr,calender_container:nr,calender_drop_container:ir,dark:sr,mobile_service_container:or,admin_mobile_create_barber_content_wrapper_right_error:cr},kr=()=>{const N=m(r=>r.AdminLoggedInMiddleware.adminSalonId),te=Se(),z=Ce(),[b,B]=n.useState(""),[v,P]=n.useState(""),[h,R]=n.useState(""),[O,ne]=n.useState(""),[ie,se]=n.useState(""),[x,w]=n.useState(""),f=m(r=>r.AdminLoggedInMiddleware.entiredata.user[0]),S=n.useRef(new AbortController);n.useEffect(()=>{if((f==null?void 0:f.salonId)!==0){const r=new AbortController;return S.current=r,z(De(N,r.signal)),()=>{S.current&&S.current.abort()}}},[N,z,f]);const oe=m(r=>r.adminAllSalonServices),{loading:M,resolve:V,response:s}=oe,[d,T]=n.useState([]),[g,C]=n.useState({});n.useEffect(()=>{if(s){const r={};s.forEach(t=>{r[t._id]=t.serviceEWT}),C(r)}},[s]);const W=r=>{T([...d,r])},Y=r=>{T(d.filter(i=>i._id!==r._id));const t={};s.forEach(i=>{t[i._id]=i.serviceEWT}),C(t)},L=(r,t)=>{C({...g,[r]:Number(t)})};n.useEffect(()=>{const r=JSON.parse(localStorage.getItem("barberdata"))||{};B(r.name),P(r.email),R(r.nickName),w(r.dateOfBirth)},[]);const[K,E]=n.useState(""),[H,$]=n.useState(""),[U,D]=n.useState(""),[F,J]=n.useState(""),[j,I]=n.useState(""),[q,ce]=n.useState(""),[de,Q]=n.useState(!1),le=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,X=()=>{if(!b)return l.error("Please enter name",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),E("Please enter name");if(b.length===0||b.length>20)return l.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),E("Name must be between 1 to 20 characters");if(!v)return l.error("Please enter email",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),$("Please enter email");if(!le.test(v))return l.error("Invalid email format",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),$("Invalid email format");if(!h)return l.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),D("Please enter nickname");if(h.length===0||h.length>20)return l.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),D("Nickname must be between 1 to 20 characters");if(de)return l.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),J("Invalid Number");if(!x)return l.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),I("Please select date of birth");if(d.length===0)return l.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--font-size-2)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),ce("Please provide a service");const r={name:b,email:v,nickName:h,mobileNumber:Number(O),countryCode:Number(ie),dateOfBirth:x,salonId:N,barberServices:d.map(t=>({...t,barberServiceEWT:g[t._id]}))};z(Ie(r,te))},p=r=>{r.key==="Enter"&&X()},_e=m(r=>r.adminCreateBarber),{loading:me}=_e,c=m(Ee)==="On",Z=Be.PhoneNumberUtil.getInstance(),be=r=>{try{return Z.isValidNumber(Z.parseAndKeepRawInput(r))}catch{return!1}},[he,pe]=n.useState("gb"),ue=(r,t,i)=>{J("");const{country:o,inputValue:y}=t;be(r)?(ne(r),se(o==null?void 0:o.dialCode),pe(o==null?void 0:o.iso2),Q(!1)):Q(!0)},u=(r,t,i,o)=>{o(""),r(t);const y=JSON.parse(localStorage.getItem("barberdata"))||{};localStorage.setItem("barberdata",JSON.stringify({...y,[i]:t}))},ve=m(r=>r.adminGetDefaultSalon),{response:_}=ve,[xe,G]=n.useState(!1),fe=()=>G(!0),ee=()=>G(!1);n.useEffect(()=>{const r=document.querySelector(".react-international-phone-input-container .react-international-phone-input");r&&(r.style.color=c?"var(--light-color-4)":"var(--light-color-2)")},[c]);const[ge,A]=n.useState(!1),je=()=>{A(!1)},[ye,ke]=n.useState(new Date),Ne=r=>{const t=new Date(r),i=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),y=String(t.getDate()).padStart(2,"0");return`${i}-${o}-${y}`},ze=r=>{const t=Ne(r);ke(t),u(w,t,"dateOfBirth",I),A(!1)},[we,re]=n.useState(!1);return n.useEffect(()=>{const r=()=>{window.innerWidth<=576?re(!0):re(!1)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${a.admin_create_barber_wrapper} ${c&&a.dark}`,children:[e.jsxs("div",{className:`${a.admin_create_barber_wrapper_right} ${c&&a.dark}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),M?e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_right_loading} ${c&&a.dark}`,children:[e.jsx(k,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}}),e.jsx(k,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):V&&(s==null?void 0:s.length)>0?e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right} ${c&&a.dark}`,children:s==null?void 0:s.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item} ${c&&a.dark}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[_==null?void 0:_.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(ae,{})}),e.jsx("input",{type:"text",value:g[r._id],onChange:i=>{const o=i.target.value.replace(/[^0-9]/g,"");L(r._id,o)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(i=>i._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>Y(r),children:"Delete"}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>W(r),children:"Add"})]},r._id)})}):e.jsx("div",{className:`${a.admin_create_barber_content_wrapper_right_error} ${c&&a.dark}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${a.admin_create_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Create Barber"}),e.jsx("button",{onClick:fe,className:a.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${a.admin_create_barber_content_wrapper_left} ${c&&a.dark}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:b,placeholder:"Enter Name",onChange:r=>u(B,r.target.value,"name",E),onKeyDown:p,style:{border:K&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:K})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:v,placeholder:"Enter Email",onChange:r=>u(P,r.target.value,"email",$),onKeyDown:p,style:{border:H&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:H})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:h,placeholder:"Enter Nick Name",onChange:r=>u(R,r.target.value,"nickName",D),onKeyDown:p,style:{border:U&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:U})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{className:`${a.mobile_container} ${c&&a.dark}`,children:e.jsx("div",{onKeyDown:p,style:{border:F&&"0.1rem solid red"},children:e.jsx(Pe,{forceDialCode:!0,defaultCountry:he,value:O,onChange:(r,t)=>ue(r,t)})})}),e.jsx("p",{className:a.error_message,children:F})]}),we?e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"DD/MM/YY",value:x,onChange:r=>u(w,r.target.value,"dateOfBirth",I),style:{colorScheme:c?"dark":"light",border:j&&"0.1rem solid red"},onKeyDown:p,max:Re()}),e.jsx("p",{className:a.error_message,children:j})]}):e.jsxs("div",{className:a.calender_container,children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"text",placeholder:"Select Date",value:x,onClick:()=>A(!0),style:{border:j&&"0.1rem solid red"},readOnly:!0}),e.jsx("p",{className:a.error_message,children:j}),ge&&e.jsx(Me,{onClickAway:je,children:e.jsx("div",{className:a.calender_drop_container,children:e.jsx(Oe,{onChange:ze,value:ye,maxDate:new Date})})})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:d==null?void 0:d.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:q&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:q})]}),me?e.jsx("button",{className:`${a.create_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(Ae,{})}):e.jsx("button",{className:`${a.create_barber_btn}`,onClick:X,children:"Create"}),e.jsx(Ve,{open:xe,onClose:ee,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:a.mobile_modal,children:e.jsxs("div",{className:`${a.mobile_service_container} ${c&&a.dark}`,children:[e.jsx("button",{onClick:ee,children:e.jsx($e,{})}),M?e.jsxs("div",{children:[e.jsx(k,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)",marginBottom:"1rem"}}),e.jsx(k,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):V&&(s==null?void 0:s.length)>0?e.jsx("div",{children:s==null?void 0:s.map(r=>{var t;return e.jsxs("div",{className:`${a.service_item} ${c&&a.dark}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(t=r==null?void 0:r.serviceIcon)==null?void 0:t.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[_==null?void 0:_.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(ae,{})}),e.jsx("input",{type:"text",value:g[r._id],onChange:i=>{const o=i.target.value.replace(/[^0-9]/g,"");L(r._id,o)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(i=>i._id===r._id)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>Y(r),children:"Delete"}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>W(r),children:"Add"})]},r._id)})}):e.jsx("div",{className:`${a.admin_mobile_create_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]})})]})]})]})})};export{kr as default};
