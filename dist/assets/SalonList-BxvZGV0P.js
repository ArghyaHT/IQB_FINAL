import{b as d,u as ee,a as ne,r as a,d as te,j as n,C as ae}from"./index-DOAdIdml.js";import{S as oe}from"./index-DuU_Esms.js";import{g as ie,a as re}from"./SalonAction-B1bs3lxB.js";import{B as se}from"./ButtonLoader-3KQroCoW.js";import{M as le}from"./Modal-CfcomtXx.js";import{C as y}from"./ClickAwayListener-DPnNokqp.js";import"./index-DgyrL9Ho.js";import"./clsx-B-dksMZM.js";import"./getReactElementRef-BlL0XndY.js";const de="_salon_wrapper_pf980_1",ce="_salon_content_wrapper_pf980_73",me="_salon_content_body_pf980_84",pe="_salon_content_body_error_pf980_254",_e="_modal_container_pf980_267",he="_modal_content_container_pf980_333",xe="_salon_settings_btn_pf980_360",je="_time_container_pf980_394",ge="_time_drop_container_pf980_398",t={salon_wrapper:de,salon_content_wrapper:ce,salon_content_body:me,salon_content_body_error:pe,modal_container:_e,modal_content_container:he,salon_settings_btn:xe,time_container:je,time_drop_container:ge},Ae=()=>{const h=d(e=>e.AdminLoggedInMiddleware.adminEmail);d(e=>e.AdminLoggedInMiddleware.adminSalonId);const c=ee(),k=ne(),L=()=>{c({type:"ADMIN_CREATE_SALON_SUCCESS"}),k("/admin-salon/createsalon")},x=a.useRef(new AbortController);a.useEffect(()=>{const e=new AbortController;return x.current=e,c(ie(h,e.signal)),()=>{x.current&&x.current.abort()}},[h,c]);const M=d(e=>e.getAdminSalonList),{loading:m,resolve:p,salons:i}=M,O=e=>{k(`/admin-salon/editsalon/${e==null?void 0:e.salonId}`,{state:e})},r=d(te)==="On",[H,_]=a.useState(!1),[U,B]=a.useState(null),R=e=>{var o,s,l;B(e==null?void 0:e.salonId),N((o=e==null?void 0:e.appointmentSettings)==null?void 0:o.appointmentStartTime),w((s=e==null?void 0:e.appointmentSettings)==null?void 0:s.appointmentEndTime),$((l=e==null?void 0:e.appointmentSettings)==null?void 0:l.intervalInMinutes),_(!0)},[C,K]=a.useState([]),T=e=>(e<10?"0":"")+e,P=()=>{const e=[];for(let o=0;o<24;o++)for(let s=0;s<60;s+=30){const l=T(o)+":"+T(s);e.push({value:l,label:l})}K(e)};a.useEffect(()=>{P()},[]);const[j,N]=a.useState(""),[Z,g]=a.useState(!1),q=()=>{g(e=>!e)},A=e=>{N(e),g(!1)},[u,w]=a.useState(""),[z,I]=a.useState(!1),F=()=>{I(e=>!e)},S=e=>{w(e),I(!1)},[G,J]=a.useState([]),Q=()=>{const e=[];for(let o=1;o<=60;o++)e.push(o);J(e)};a.useEffect(()=>{Q()},[]);const[v,$]=a.useState(""),[V,E]=a.useState(!1),W=()=>{E(e=>!e)},f=e=>{$(e),E(!1)},D=()=>{c(re({salonId:U,appointmentSettings:{startTime:j,endTime:u,intervalInMinutes:v}},_,h))},b=e=>{e.key==="Enter"&&D()},X=d(e=>e.adminUpdateSalonSettings),{loading:Y}=X;return n.jsxs("div",{className:`${t.salon_wrapper} ${r&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon List"}),n.jsxs("button",{onClick:L,children:[n.jsx("p",{children:"Create"}),n.jsx("div",{children:"+"})]})]}),n.jsxs("div",{className:`${t.salon_content_wrapper} ${r&&t.dark}`,children:[m&&!p?n.jsx("div",{className:`${t.salon_content_body} ${r&&t.dark}`,children:n.jsx(oe,{count:6,height:"6rem",baseColor:r?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:r?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)",style:{marginBottom:"1rem"}})}):!m&&p&&(i==null?void 0:i.length)>0?n.jsxs("div",{className:`${t.salon_content_body} ${r&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon Name"}),n.jsx("p",{children:"Address"}),n.jsx("p",{children:"City"}),n.jsx("p",{children:"Salon Type"}),n.jsx("p",{children:"Edit"}),n.jsx("p",{children:"Setting"})]}),i.map((e,o)=>n.jsxs("div",{style:{borderBottom:i.length-1===o&&"none"},children:[n.jsx("p",{children:(e==null?void 0:e.salonName.length)>18?(e==null?void 0:e.salonName.slice(0,18))+"...":e==null?void 0:e.salonName}),n.jsx("p",{children:(e==null?void 0:e.address.length)>18?(e==null?void 0:e.address.slice(0,18))+"...":e==null?void 0:e.address}),n.jsx("p",{children:(e==null?void 0:e.city.length)>18?(e==null?void 0:e.city.slice(0,18))+"...":e==null?void 0:e.city}),n.jsx("p",{children:e==null?void 0:e.salonType}),n.jsx("div",{children:n.jsx("button",{onClick:()=>O(e),children:"Edit"})}),n.jsx("div",{children:n.jsx("button",{onClick:()=>R(e),children:"Setting"})})]},e==null?void 0:e._id))]}):!m&&p&&(i==null?void 0:i.length)==0?n.jsx("div",{className:`${t.salon_content_body_error} ${r&&t.dark}`,children:n.jsx("p",{style:{margin:"2rem"},children:"Salons not available"})}):!m&&!p&&n.jsx("div",{className:`${t.salon_content_body_error} ${r&&t.dark}`,children:n.jsx("p",{children:"No salon available"})}),n.jsx(le,{open:H,onClose:()=>{S(!1),A(!1),f(!1),_(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:n.jsxs("div",{className:t.modal_container,children:[n.jsxs("div",{children:[n.jsx("p",{children:" Appointment Settings"}),n.jsx("button",{onClick:()=>_(!1),children:n.jsx(ae,{})})]}),n.jsxs("div",{className:t.modal_content_container,children:[n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Start Time"}),n.jsx("input",{type:"text",value:`${j?`${j} hr`:""}`,onClick:()=>q(),onKeyDown:b}),Z&&n.jsx(y,{onClickAway:()=>g(!1),children:n.jsx("div",{className:t.time_drop_container,children:C.map(e=>n.jsxs("p",{onClick:()=>A(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"End Time"}),n.jsx("input",{type:"text",value:`${u?`${u} hr`:""}`,onClick:()=>F(),onKeyDown:b}),z&&n.jsx(y,{onClickAway:()=>S(!1),children:n.jsx("div",{className:t.time_drop_container,children:C.map(e=>n.jsxs("p",{onClick:()=>S(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Interval Time"}),n.jsx("input",{type:"text",value:`${v?`${v} mins`:""}`,onClick:()=>W(),onKeyDown:b}),V&&n.jsx(y,{onClickAway:()=>f(!1),children:n.jsx("div",{className:t.time_drop_container,children:G.map(e=>n.jsxs("p",{value:e,onClick:()=>f(e),children:[e," mins"]},e))})})]}),Y?n.jsx("button",{className:t.salon_settings_btn,children:n.jsx(se,{})}):n.jsx("button",{className:t.salon_settings_btn,onClick:D,children:"Update"})]})]})})]})]})};export{Ae as default};
