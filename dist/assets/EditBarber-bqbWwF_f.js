import{r as n,b as p,c as ue,a as xe,u as je,d as fe,j as e,a2 as Y,p as q,a7 as J,C as ge,_}from"./index-LE4wwcdg.js";import{f as Ne,i as ye}from"./BarberAction-C1pW1p8U.js";import{B as Se}from"./ButtonLoader-evyw5ydJ.js";import{l as Ie,U as we}from"./libphonenumber-B8L-nP3C.js";import{g as Ee}from"./Date-Cuhd30XP.js";import{S as Q}from"./Skeleton-BjsL4Azr.js";import{M as ke}from"./Modal-2aVE2EVH.js";import"./clsx-B-dksMZM.js";import"./index-C8qIyj46.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-Difek1I8.js";const Ce="_admin_edit_barber_wrapper_1aryl_1",$e="_admin_edit_barber_wrapper_left_1aryl_17",Pe="_admin_edit_barber_content_wrapper_left_1aryl_35",Te="_edit_barber_btn_1aryl_74",De="_admin_edit_barber_wrapper_right_1aryl_105",We="_admin_edit_barber_content_wrapper_right_1aryl_127",Oe="_service_item_1aryl_166",Re="_service_add_icon_1aryl_181",Ae="_service_delete_icon_1aryl_212",Ue="_service_item_top_1aryl_243",Ve="_service_item_bottom_1aryl_297",ze="_admin_edit_barber_content_wrapper_right_error_1aryl_378",Me="_admin_edit_barber_content_wrapper_right_loading_1aryl_398",Ke="_mobile_modal_1aryl_412",Le="_add_services_btn_1aryl_413",He="_mobile_add_services_1aryl_414",Fe="_error_message_1aryl_418",Ye="_mobile_service_container_1aryl_472",a={admin_edit_barber_wrapper:Ce,admin_edit_barber_wrapper_left:$e,admin_edit_barber_content_wrapper_left:Pe,edit_barber_btn:Te,admin_edit_barber_wrapper_right:De,admin_edit_barber_content_wrapper_right:We,service_item:Oe,service_add_icon:Re,service_delete_icon:Ae,service_item_top:Ue,service_item_bottom:Ve,admin_edit_barber_content_wrapper_right_error:ze,admin_edit_barber_content_wrapper_right_loading:Me,mobile_modal:Ke,add_services_btn:Le,mobile_add_services:He,error_message:Fe,mobile_service_container:Ye},nr=()=>{var H,F;const[l,u]=n.useState([]),X=p(r=>r.adminAllSalonServices),{loading:Z,resolve:G,response:c}=X;n.useEffect(()=>{c&&u(c)},[c]);const x=p(r=>r.AdminLoggedInMiddleware.adminSalonId),j=ue(),B=xe(),f=je(),t=j==null?void 0:j.state,[v,ee]=n.useState(t==null?void 0:t.name),[w,qe]=n.useState(t==null?void 0:t.email),[b,re]=n.useState(t==null?void 0:t.nickName),[E,ie]=n.useState(`${t==null?void 0:t.mobileCountryCode}${(H=t==null?void 0:t.mobileNumber)==null?void 0:H.toString()}`),[ae,te]=n.useState(t==null?void 0:t.mobileCountryCode),[g,se]=n.useState((F=t==null?void 0:t.dateOfBirth)==null?void 0:F.split("T")[0]),[s,N]=n.useState(t==null?void 0:t.barberServices);n.useEffect(()=>{f(Ne(x))},[x,f]);const k=r=>{s.includes(r)||N([...s,{...r,barberServiceEWT:r.serviceEWT}])},C=r=>{const d=c.find(i=>i.serviceId===r.serviceId);d&&(N(s.filter(i=>i.serviceId!==r.serviceId)),u(l.map(i=>i.serviceId===r.serviceId?{...i,serviceEWT:d.serviceEWT}:i)))},[$,y]=n.useState("");n.useState("");const[P,S]=n.useState(""),[T,D]=n.useState(""),[W,O]=n.useState(""),[R,ne]=n.useState(""),[de,A]=n.useState(!1),U=()=>{if(!v)return _.error("Please enter name",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Please enter name");if(v.length===0||v.length>20)return _.error("Name must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),y("Name must be between 1 to 20 characters");if(!b)return _.error("Please enter nickname",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Please enter nickname");if(b.length===0||b.length>20)return _.error("Nickname must be between 1 to 20 characters",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),S("Nickname must be between 1 to 20 characters");if(de)return _.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),D("Invalid Number");if(!g)return _.error("Please select date of birth",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),O("Please select date of birth");if(s.length===0)return _.error("Please provide a service",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}}),ne("Please provide a service");const r={name:v,email:w,nickName:b,mobileNumber:Number(E),countryCode:Number(ae),dateOfBirth:g,salonId:x,barberServices:s};f(ye(r,B))},h=r=>{r.key==="Enter"&&U()},oe=p(r=>r.adminUpdateBarber),{loading:ce}=oe,V=p(fe)==="On",z=(r,d)=>{const i=r.target.value.replace(/[^0-9]/g,""),I=i===""?"":Number(i);s.find(o=>o.serviceId===d.serviceId)?N(s.map(o=>o.serviceId===d.serviceId?{...o,barberServiceEWT:I}:o)):u(c.map(o=>o.serviceId===d.serviceId?{...o,serviceEWT:I}:o))},M=Ie.PhoneNumberUtil.getInstance(),le=r=>{try{return M.isValidNumber(M.parseAndKeepRawInput(r))}catch{return!1}},[_e,me]=n.useState("gb"),ve=(r,d)=>{D("");const{country:i,inputValue:I}=d;le(r)?(ie(r),te(i==null?void 0:i.dialCode),me(i==null?void 0:i.iso2),A(!1)):A(!0)},be=p(r=>r.adminGetDefaultSalon),{response:m}=be,[pe,K]=n.useState(!1),he=()=>K(!0),L=()=>K(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${a.admin_edit_barber_wrapper} ${V&&a.dark}`,children:[e.jsxs("div",{className:`${a.admin_edit_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),Z?e.jsxs("div",{className:`${a.admin_edit_barber_content_wrapper_right_loading}`,children:[e.jsx(Q,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}}),e.jsx(Q,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}})]}):G&&(c==null?void 0:c.length)>0?e.jsx("div",{className:`${a.admin_edit_barber_content_wrapper_right}`,children:l==null?void 0:l.map(r=>{var d;return e.jsxs("div",{className:`${a.service_item}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(d=r==null?void 0:r.serviceIcon)==null?void 0:d.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Y,{})}),e.jsx("input",{type:"text",value:s!=null&&s.find(i=>i.serviceId===r.serviceId)?s==null?void 0:s.find(i=>i.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:i=>z(i,r)}),e.jsx("p",{children:"mins"})]})]})})]}),s.find(i=>i.serviceId===r.serviceId)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>C(r),children:e.jsx(q,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>k(r),children:e.jsx(J,{})})]},r._id)})}):e.jsx("div",{className:`${a.admin_edit_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${a.admin_edit_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Edit Barber"}),e.jsx("button",{onClick:he,className:a.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${a.admin_edit_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:v,onChange:r=>{y(""),ee(r.target.value)},placeholder:"Enter Name",onKeyDown:h,style:{border:$&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:$})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:w,placeholder:"Enter Email",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:b,onChange:r=>{S(""),re(r.target.value)},placeholder:"Enter Nick Name",onKeyDown:h,style:{border:P&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:P})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:h,style:{border:T&&"0.1rem solid red"},children:e.jsx(we,{forceDialCode:!0,defaultCountry:_e,value:E,onChange:(r,d)=>ve(r,d)})})}),e.jsx("p",{className:a.error_message,children:T})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"dd/mm/yy",value:g,onChange:r=>{O(""),se(r.target.value)},style:{colorScheme:V?"dark":"light",border:W&&"0.1rem solid red"},onKeyDown:h,max:Ee()}),e.jsx("p",{className:a.error_message,children:W})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:s==null?void 0:s.map(r=>" "+r.serviceName),placeholder:"Your Services",readOnly:!0,style:{border:R&&"0.1rem solid red"}}),e.jsx("p",{className:a.error_message,children:R})]}),ce?e.jsx("button",{className:`${a.edit_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(Se,{})}):e.jsx("button",{className:`${a.edit_barber_btn}`,onClick:U,children:"Update"}),e.jsx(ke,{open:pe,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:a.mobile_modal,children:e.jsxs("div",{className:a.mobile_service_container,children:[e.jsx("button",{onClick:L,children:e.jsx(ge,{})}),e.jsx("div",{children:l==null?void 0:l.map(r=>{var d;return e.jsxs("div",{className:`${a.service_item}`,children:[e.jsxs("div",{className:`${a.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(d=r==null?void 0:r.serviceIcon)==null?void 0:d.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${a.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Y,{})}),e.jsx("input",{type:"text",value:s!=null&&s.find(i=>i.serviceId===r.serviceId)?s==null?void 0:s.find(i=>i.serviceId===r.serviceId).barberServiceEWT:r.serviceEWT,onChange:i=>z(i,r)}),e.jsx("p",{children:"mins"})]})]})})]}),s.find(i=>i.serviceId===r.serviceId)?e.jsx("button",{className:`${a.service_delete_icon}`,onClick:()=>C(r),children:e.jsx(q,{})}):e.jsx("button",{className:`${a.service_add_icon}`,onClick:()=>k(r),children:e.jsx(J,{})})]},r._id)})})]})})]})]})]})})};export{nr as default};
