import{r as s,b as v,c as ae,a as se,u as ce,d as le,j as e,a5 as V,o as K,ab as U,C as oe,_ as _e}from"./index-ChGKHjTm.js";import{h as me,j as ve}from"./BarberAction-BqM-QHlX.js";import{B as pe}from"./ButtonLoader-B0Wng9qo.js";import{l as he,U as be}from"./libphonenumber-CFmGUin8.js";import{S as M}from"./Skeleton-E44RFdGo.js";import{M as xe}from"./Modal-DLT56bcj.js";import"./clsx-B-dksMZM.js";import"./index-BEFeMIXM.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-BZ6Qinnk.js";const je="_admin_edit_barber_wrapper_13l65_1",ue="_admin_edit_barber_wrapper_left_13l65_17",ge="_admin_edit_barber_content_wrapper_left_13l65_35",fe="_edit_barber_btn_13l65_72",Ne="_admin_edit_barber_wrapper_right_13l65_120",Ie="_admin_edit_barber_content_wrapper_right_13l65_142",we="_service_item_13l65_181",Se="_service_add_icon_13l65_196",ye="_service_delete_icon_13l65_227",Ce="_service_item_top_13l65_258",Ee="_service_item_bottom_13l65_312",ke="_admin_edit_barber_content_wrapper_right_error_13l65_393",$e="_admin_edit_barber_content_wrapper_right_loading_13l65_413",Te="_mobile_modal_13l65_427",De="_add_services_btn_13l65_428",We="_mobile_add_services_13l65_429",Ae="_mobile_service_container_13l65_481",d={admin_edit_barber_wrapper:je,admin_edit_barber_wrapper_left:ue,admin_edit_barber_content_wrapper_left:ge,edit_barber_btn:fe,admin_edit_barber_wrapper_right:Ne,admin_edit_barber_content_wrapper_right:Ie,service_item:we,service_add_icon:Se,service_delete_icon:ye,service_item_top:Ce,service_item_bottom:Ee,admin_edit_barber_content_wrapper_right_error:ke,admin_edit_barber_content_wrapper_right_loading:$e,mobile_modal:Te,add_services_btn:De,mobile_add_services:We,mobile_service_container:Ae},qe=()=>{var A,P;const[o,p]=s.useState([]),O=v(i=>i.adminAllSalonServices),{loading:L,resolve:R,response:l}=O;s.useEffect(()=>{l&&p(l)},[l]);const h=v(i=>i.AdminLoggedInMiddleware.adminSalonId),b=ae(),H=se(),x=ce(),t=b==null?void 0:b.state,[g,F]=s.useState(t==null?void 0:t.name),[f,Pe]=s.useState(t==null?void 0:t.email),[N,Y]=s.useState(t==null?void 0:t.nickName),[I,z]=s.useState(`${t==null?void 0:t.mobileCountryCode}${(A=t==null?void 0:t.mobileNumber)==null?void 0:A.toString()}`),[q,J]=s.useState(t==null?void 0:t.mobileCountryCode),[w,Q]=s.useState((P=t==null?void 0:t.dateOfBirth)==null?void 0:P.split("T")[0]),[n,j]=s.useState(t==null?void 0:t.barberServices);s.useEffect(()=>{x(me(h))},[h,x]);const S=i=>{n.includes(i)||j([...n,{...i,barberServiceEWT:i.serviceEWT}])},y=i=>{const a=l.find(r=>r.serviceId===i.serviceId);a&&(j(n.filter(r=>r.serviceId!==i.serviceId)),p(o.map(r=>r.serviceId===i.serviceId?{...r,serviceEWT:a.serviceEWT}:r)))},[X,C]=s.useState(!1),E=()=>{if(X)_e.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const i={name:g,email:f,nickName:N,mobileNumber:Number(I),countryCode:Number(q),dateOfBirth:w,salonId:h,barberServices:n};x(ve(i,H))}},_=i=>{i.key==="Enter"&&E()},Z=v(i=>i.adminUpdateBarber),{loading:G}=Z,k=v(le)==="On",$=(i,a)=>{const r=i.target.value.replace(/[^0-9]/g,""),u=r===""?"":Number(r);n.find(c=>c.serviceId===a.serviceId)?j(n.map(c=>c.serviceId===a.serviceId?{...c,barberServiceEWT:u}:c)):p(l.map(c=>c.serviceId===a.serviceId?{...c,serviceEWT:u}:c))},T=he.PhoneNumberUtil.getInstance(),B=i=>{try{return T.isValidNumber(T.parseAndKeepRawInput(i))}catch{return!1}},[ee,ie]=s.useState("gb"),re=(i,a)=>{const{country:r,inputValue:u}=a;B(i)?(z(i),J(r==null?void 0:r.dialCode),ie(r==null?void 0:r.iso2),C(!1)):C(!0)},te=v(i=>i.adminGetDefaultSalon),{response:m}=te,[ne,D]=s.useState(!1),de=()=>D(!0),W=()=>D(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${d.admin_edit_barber_wrapper} ${k&&d.dark}`,children:[e.jsxs("div",{className:`${d.admin_edit_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),L?e.jsxs("div",{className:`${d.admin_edit_barber_content_wrapper_right_loading}`,children:[e.jsx(M,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}}),e.jsx(M,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"6px"}})]}):R&&(l==null?void 0:l.length)>0?e.jsx("div",{className:`${d.admin_edit_barber_content_wrapper_right}`,children:o==null?void 0:o.map(i=>{var a;return e.jsxs("div",{className:`${d.service_item}`,children:[e.jsxs("div",{className:`${d.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=i==null?void 0:i.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:i==null?void 0:i.serviceName}),e.jsx("p",{children:i!=null&&i.vipService?"VIP":"Regular"}),e.jsx("p",{children:i==null?void 0:i.serviceDesc})]})]}),e.jsxs("div",{className:`${d.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,i==null?void 0:i.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(V,{})}),e.jsx("input",{type:"text",value:n!=null&&n.find(r=>r.serviceId===i.serviceId)?n==null?void 0:n.find(r=>r.serviceId===i.serviceId).barberServiceEWT:i.serviceEWT,onChange:r=>$(r,i)}),e.jsx("p",{children:"mins"})]})]})})]}),n.find(r=>r.serviceId===i.serviceId)?e.jsx("button",{className:`${d.service_delete_icon}`,onClick:()=>y(i),children:e.jsx(K,{})}):e.jsx("button",{className:`${d.service_add_icon}`,onClick:()=>S(i),children:e.jsx(U,{})})]},i._id)})}):e.jsx("div",{className:`${d.admin_edit_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${d.admin_edit_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Edit Barber"}),e.jsx("button",{onClick:de,className:d.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${d.admin_edit_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:g,onChange:i=>F(i.target.value),placeholder:"Enter Name",onKeyDown:_})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:f,placeholder:"Enter Email",onKeyDown:_})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:N,onChange:i=>Y(i.target.value),placeholder:"Enter Nick Name",onKeyDown:_})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:_,children:e.jsx(be,{forceDialCode:!0,defaultCountry:ee,value:I,onChange:(i,a)=>re(i,a)})})})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"dd/mm/yy",value:w,onChange:i=>Q(i.target.value),style:{colorScheme:k?"dark":"light"},onKeyDown:_})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:n==null?void 0:n.map(i=>" "+i.serviceName),placeholder:"Your Services",onKeyDown:_})]}),G?e.jsx("button",{className:`${d.edit_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(pe,{})}):e.jsxs("button",{className:`${d.edit_barber_btn}`,onClick:E,children:[e.jsx("p",{children:"Save"}),e.jsx("div",{children:"+"})]}),e.jsx(xe,{open:ne,onClose:W,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:d.mobile_modal,children:e.jsxs("div",{className:d.mobile_service_container,children:[e.jsx("button",{onClick:W,children:e.jsx(oe,{})}),e.jsx("div",{children:o==null?void 0:o.map(i=>{var a;return e.jsxs("div",{className:`${d.service_item}`,children:[e.jsxs("div",{className:`${d.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=i==null?void 0:i.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:i==null?void 0:i.serviceName}),e.jsx("p",{children:i!=null&&i.vipService?"VIP":"Regular"}),e.jsx("p",{children:i==null?void 0:i.serviceDesc})]})]}),e.jsxs("div",{className:`${d.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[m==null?void 0:m.currency,i==null?void 0:i.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(V,{})}),e.jsx("input",{type:"text",value:n!=null&&n.find(r=>r.serviceId===i.serviceId)?n==null?void 0:n.find(r=>r.serviceId===i.serviceId).barberServiceEWT:i.serviceEWT,onChange:r=>$(r,i)}),e.jsx("p",{children:"mins"})]})]})})]}),n.find(r=>r.serviceId===i.serviceId)?e.jsx("button",{className:`${d.service_delete_icon}`,onClick:()=>y(i),children:e.jsx(K,{})}):e.jsx("button",{className:`${d.service_add_icon}`,onClick:()=>S(i),children:e.jsx(U,{})})]},i._id)})})]})})]})]})]})})};export{qe as default};
