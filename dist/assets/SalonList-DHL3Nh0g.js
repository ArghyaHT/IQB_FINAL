import{b as d,u as ee,a as ne,r as a,d as te,j as n,C as ae}from"./index-D1NNQ8TS.js";import{S as oe}from"./index-BfkzATpX.js";import{g as ie,a as se}from"./SalonAction-B_lMwZsx.js";import{B as re}from"./ButtonLoader-BhpF0-Mh.js";import{M as le}from"./Modal-Crg_FAZQ.js";import{C as f}from"./ClickAwayListener-Bc1YWYD6.js";import"./index-Bh58olrv.js";import"./clsx-B-dksMZM.js";import"./getReactElementRef-BW8wGu-r.js";const de="_salon_wrapper_pf980_1",ce="_salon_content_wrapper_pf980_73",me="_salon_content_body_pf980_84",pe="_salon_content_body_error_pf980_254",_e="_modal_container_pf980_267",he="_modal_content_container_pf980_333",xe="_salon_settings_btn_pf980_360",je="_time_container_pf980_394",ue="_time_drop_container_pf980_398",t={salon_wrapper:de,salon_content_wrapper:ce,salon_content_body:me,salon_content_body_error:pe,modal_container:_e,modal_content_container:he,salon_settings_btn:xe,time_container:je,time_drop_container:ue},Ae=()=>{const p=d(e=>e.AdminLoggedInMiddleware.adminEmail);d(e=>e.AdminLoggedInMiddleware.adminSalonId);const c=ee(),b=ne(),$=()=>{c({type:"ADMIN_CREATE_SALON_SUCCESS"}),b("/admin-salon/createsalon")},_=a.useRef(new AbortController);a.useEffect(()=>{const e=new AbortController;return _.current=e,c(ie(p,e.signal)),()=>{_.current&&_.current.abort()}},[p,c]);const L=d(e=>e.getAdminSalonList),{loading:D,resolve:M,salons:r}=L,O=e=>{b(`/admin-salon/editsalon/${e==null?void 0:e.salonId}`,{state:e})},i=d(te)==="On",[H,m]=a.useState(!1),[U,B]=a.useState(null),R=e=>{var o,s,l;B(e==null?void 0:e.salonId),k((o=e==null?void 0:e.appointmentSettings)==null?void 0:o.appointmentStartTime),N((s=e==null?void 0:e.appointmentSettings)==null?void 0:s.appointmentEndTime),w((l=e==null?void 0:e.appointmentSettings)==null?void 0:l.intervalInMinutes),m(!0)},[y,K]=a.useState([]),C=e=>(e<10?"0":"")+e,P=()=>{const e=[];for(let o=0;o<24;o++)for(let s=0;s<60;s+=30){const l=C(o)+":"+C(s);e.push({value:l,label:l})}K(e)};a.useEffect(()=>{P()},[]);const[h,k]=a.useState(""),[Z,x]=a.useState(!1),q=()=>{x(e=>!e)},T=e=>{k(e),x(!1)},[j,N]=a.useState(""),[z,A]=a.useState(!1),F=()=>{A(e=>!e)},u=e=>{N(e),A(!1)},[G,J]=a.useState([]),Q=()=>{const e=[];for(let o=1;o<=60;o++)e.push(o);J(e)};a.useEffect(()=>{Q()},[]);const[S,w]=a.useState(""),[V,I]=a.useState(!1),W=()=>{I(e=>!e)},g=e=>{w(e),I(!1)},E=()=>{c(se({salonId:U,appointmentSettings:{startTime:h,endTime:j,intervalInMinutes:S}},m,p))},v=e=>{e.key==="Enter"&&E()},X=d(e=>e.adminUpdateSalonSettings),{loading:Y}=X;return n.jsxs("div",{className:`${t.salon_wrapper} ${i&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon List"}),n.jsxs("button",{onClick:$,children:[n.jsx("p",{children:"Create"}),n.jsx("div",{children:"+"})]})]}),n.jsxs("div",{className:`${t.salon_content_wrapper} ${i&&t.dark}`,children:[D?n.jsx("div",{className:`${t.salon_content_body} ${i&&t.dark}`,children:n.jsx(oe,{count:6,height:"6rem",baseColor:i?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:i?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)",style:{marginBottom:"1rem"}})}):M&&(r==null?void 0:r.length)>0?n.jsxs("div",{className:`${t.salon_content_body} ${i&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon Name"}),n.jsx("p",{children:"Address"}),n.jsx("p",{children:"City"}),n.jsx("p",{children:"Salon Type"}),n.jsx("p",{children:"Edit"}),n.jsx("p",{children:"Setting"})]}),r.map((e,o)=>n.jsxs("div",{style:{borderBottom:r.length-1===o&&"none"},children:[n.jsx("p",{children:(e==null?void 0:e.salonName.length)>18?(e==null?void 0:e.salonName.slice(0,18))+"...":e==null?void 0:e.salonName}),n.jsx("p",{children:(e==null?void 0:e.address.length)>18?(e==null?void 0:e.address.slice(0,18))+"...":e==null?void 0:e.address}),n.jsx("p",{children:(e==null?void 0:e.city.length)>18?(e==null?void 0:e.city.slice(0,18))+"...":e==null?void 0:e.city}),n.jsx("p",{children:e==null?void 0:e.salonType}),n.jsx("div",{children:n.jsx("button",{onClick:()=>O(e),children:"Edit"})}),n.jsx("div",{children:n.jsx("button",{onClick:()=>R(e),children:"Setting"})})]},e==null?void 0:e._id))]}):n.jsx("div",{className:`${t.salon_content_body_error} ${i&&t.dark}`,children:n.jsx("p",{children:"No salon available"})}),n.jsx(le,{open:H,onClose:()=>{u(!1),T(!1),g(!1),m(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:n.jsxs("div",{className:t.modal_container,children:[n.jsxs("div",{children:[n.jsx("p",{children:" Appointment Settings"}),n.jsx("button",{onClick:()=>m(!1),children:n.jsx(ae,{})})]}),n.jsxs("div",{className:t.modal_content_container,children:[n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Start Time"}),n.jsx("input",{type:"text",value:`${h?`${h} hr`:""}`,onClick:()=>q(),onKeyDown:v}),Z&&n.jsx(f,{onClickAway:()=>x(!1),children:n.jsx("div",{className:t.time_drop_container,children:y.map(e=>n.jsxs("p",{onClick:()=>T(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"End Time"}),n.jsx("input",{type:"text",value:`${j?`${j} hr`:""}`,onClick:()=>F(),onKeyDown:v}),z&&n.jsx(f,{onClickAway:()=>u(!1),children:n.jsx("div",{className:t.time_drop_container,children:y.map(e=>n.jsxs("p",{onClick:()=>u(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Interval Time"}),n.jsx("input",{type:"text",value:`${S?`${S} mins`:""}`,onClick:()=>W(),onKeyDown:v}),V&&n.jsx(f,{onClickAway:()=>g(!1),children:n.jsx("div",{className:t.time_drop_container,children:G.map(e=>n.jsxs("p",{value:e,onClick:()=>g(e),children:[e," mins"]},e))})})]}),Y?n.jsx("button",{className:t.salon_settings_btn,children:n.jsx(re,{})}):n.jsx("button",{className:t.salon_settings_btn,onClick:E,children:"Update"})]})]})})]})]})};export{Ae as default};
