import{u as d,a as ee,b as ne,r as a,d as te,j as n,C as ae}from"./index-BkwjXYND.js";import{S as oe}from"./index-CTC0mqjA.js";import{g as ie,a as re}from"./SalonAction-BxJ_AN41.js";import{B as se}from"./ButtonLoader-nFX9mHfd.js";import{M as le}from"./Modal-E2nwvVH8.js";import{C as f}from"./ClickAwayListener-CmLkEz0B.js";import"./index-Dpc-w2NQ.js";import"./clsx-B-dksMZM.js";import"./getReactElementRef-BdBgpDHV.js";const de="_salon_wrapper_oupqf_1",ce="_salon_content_wrapper_oupqf_70",me="_salon_content_body_oupqf_81",pe="_salon_content_body_error_oupqf_228",_e="_modal_container_oupqf_241",he="_modal_content_container_oupqf_307",ue="_salon_settings_btn_oupqf_334",xe="_time_container_oupqf_368",je="_time_drop_container_oupqf_372",Se="_dark_oupqf_420",t={salon_wrapper:de,salon_content_wrapper:ce,salon_content_body:me,salon_content_body_error:pe,modal_container:_e,modal_content_container:he,salon_settings_btn:ue,time_container:xe,time_drop_container:je,dark:Se},Ae=()=>{const p=d(e=>e.AdminLoggedInMiddleware.adminEmail);d(e=>e.AdminLoggedInMiddleware.adminSalonId);const c=ee(),k=ne(),E=()=>{c({type:"ADMIN_CREATE_SALON_SUCCESS"}),k("/admin-salon/createsalon")},_=a.useRef(new AbortController);a.useEffect(()=>{const e=new AbortController;return _.current=e,c(ie(p,e.signal)),()=>{_.current&&_.current.abort()}},[p,c]);const L=d(e=>e.getAdminSalonList),{loading:D,resolve:q,salons:s}=L,M=e=>{k(`/admin-salon/editsalon/${e==null?void 0:e.salonId}`,{state:e})},i=d(te)==="On",[O,m]=a.useState(!1),[H,U]=a.useState(null),B=e=>{var o,r,l;U(e==null?void 0:e.salonId),C((o=e==null?void 0:e.appointmentSettings)==null?void 0:o.appointmentStartTime),$((r=e==null?void 0:e.appointmentSettings)==null?void 0:r.appointmentEndTime),A((l=e==null?void 0:e.appointmentSettings)==null?void 0:l.intervalInMinutes),m(!0)},[y,R]=a.useState([]),b=e=>(e<10?"0":"")+e,K=()=>{const e=[];for(let o=0;o<24;o++)for(let r=0;r<60;r+=30){const l=b(o)+":"+b(r);e.push({value:l,label:l})}R(e)};a.useEffect(()=>{K()},[]);const[h,C]=a.useState(""),[P,u]=a.useState(!1),Z=()=>{u(e=>!e)},T=e=>{C(e),u(!1)},[x,$]=a.useState(""),[z,N]=a.useState(!1),F=()=>{N(e=>!e)},j=e=>{$(e),N(!1)},[G,J]=a.useState([]),Q=()=>{const e=[];for(let o=1;o<=60;o++)e.push(o);J(e)};a.useEffect(()=>{Q()},[]);const[S,A]=a.useState(""),[V,w]=a.useState(!1),W=()=>{w(e=>!e)},g=e=>{A(e),w(!1)},I=()=>{c(re({salonId:H,appointmentSettings:{startTime:h,endTime:x,intervalInMinutes:S}},m,p))},v=e=>{e.key==="Enter"&&I()},X=d(e=>e.adminUpdateSalonSettings),{loading:Y}=X;return n.jsxs("div",{className:`${t.salon_wrapper} ${i&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon List"}),n.jsxs("button",{onClick:E,children:[n.jsx("p",{children:"Create"}),n.jsx("div",{children:"+"})]})]}),n.jsxs("div",{className:`${t.salon_content_wrapper} ${i&&t.dark}`,children:[D?n.jsx("div",{className:`${t.salon_content_body} ${i&&t.dark}`,children:n.jsx(oe,{count:6,height:"6rem",baseColor:i?"var(--dark-loader-bg-color)":"var(--light-loader-bg-color)",highlightColor:i?"var(--dark-loader-highlight-color)":"var(--light-loader-highlight-color)",style:{marginBottom:"1rem"}})}):q&&(s==null?void 0:s.length)>0?n.jsxs("div",{className:`${t.salon_content_body} ${i&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:"Salon Name"}),n.jsx("p",{children:"Address"}),n.jsx("p",{children:"City"}),n.jsx("p",{children:"Salon Type"}),n.jsx("p",{children:"Edit"}),n.jsx("p",{children:"Setting"})]}),s.map((e,o)=>n.jsxs("div",{style:{borderBottom:s.length-1===o&&"none"},children:[n.jsx("p",{children:(e==null?void 0:e.salonName.length)>18?(e==null?void 0:e.salonName.slice(0,18))+"...":e==null?void 0:e.salonName}),n.jsx("p",{children:(e==null?void 0:e.address.length)>18?(e==null?void 0:e.address.slice(0,18))+"...":e==null?void 0:e.address}),n.jsx("p",{children:(e==null?void 0:e.city.length)>18?(e==null?void 0:e.city.slice(0,18))+"...":e==null?void 0:e.city}),n.jsx("p",{children:e==null?void 0:e.salonType}),n.jsx("div",{children:n.jsx("button",{onClick:()=>M(e),children:"Edit"})}),n.jsx("div",{children:n.jsx("button",{onClick:()=>B(e),children:"Setting"})})]},e==null?void 0:e._id))]}):n.jsx("div",{className:`${t.salon_content_body_error} ${i&&t.dark}`,children:n.jsx("p",{children:"No salon available"})}),n.jsx(le,{open:O,onClose:()=>{j(!1),T(!1),g(!1),m(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:n.jsxs("div",{className:`${t.modal_container} ${i&&t.dark}`,children:[n.jsxs("div",{children:[n.jsx("p",{children:" Appointment Settings"}),n.jsx("button",{onClick:()=>m(!1),children:n.jsx(ae,{})})]}),n.jsxs("div",{className:t.modal_content_container,children:[n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Start Time"}),n.jsx("input",{type:"text",value:`${h?`${h} hr`:""}`,onClick:()=>Z(),onKeyDown:v,readOnly:!0}),P&&n.jsx(f,{onClickAway:()=>u(!1),children:n.jsx("div",{className:`${t.time_drop_container} ${i&&t.dark}`,children:y.map(e=>n.jsxs("p",{onClick:()=>T(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"End Time"}),n.jsx("input",{type:"text",value:`${x?`${x} hr`:""}`,onClick:()=>F(),onKeyDown:v,readOnly:!0}),z&&n.jsx(f,{onClickAway:()=>j(!1),children:n.jsx("div",{className:`${t.time_drop_container} ${i&&t.dark}`,children:y.map(e=>n.jsxs("p",{onClick:()=>j(e.value),children:[e.value," hr"]},e.value))})})]}),n.jsxs("div",{className:t.time_container,children:[n.jsx("p",{children:"Interval Time"}),n.jsx("input",{type:"text",value:`${S?`${S} mins`:""}`,onClick:()=>W(),onKeyDown:v,readOnly:!0}),V&&n.jsx(f,{onClickAway:()=>g(!1),children:n.jsx("div",{className:`${t.time_drop_container} ${i&&t.dark}`,children:G.map(e=>n.jsxs("p",{value:e,onClick:()=>g(e),children:[e," mins"]},e))})})]}),Y?n.jsx("button",{className:t.salon_settings_btn,children:n.jsx(se,{})}):n.jsx("button",{className:t.salon_settings_btn,onClick:I,children:"Update"})]})]})})]})]})};export{Ae as default};
