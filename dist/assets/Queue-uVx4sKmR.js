import{b as t,u as y,r as h,d as w,j as r,z as Q}from"./index-DswqzyJH.js";import{S as f}from"./index-CoQheMi3.js";import{g as I,b as C,a as S}from"./BarberQueueAction-DXPyWXpL.js";const $="_barber_queue_wrapper_phzks_1",N="_barber_queue_content_wrapper_phzks_29",L="_barber_queue_content_body_phzks_39",z="_barber_queue_content_body_item_phzks_121",A="_barber_queue_content_body_error_phzks_208",B="_modal_container_phzks_221",n={barber_queue_wrapper:$,barber_queue_content_wrapper:N,barber_queue_content_body:L,barber_queue_content_body_item:z,barber_queue_content_body_error:A,modal_container:B},P=()=>{const d=t(e=>e.BarberLoggedInMiddleware.barberSalonId),m=t(e=>e.BarberLoggedInMiddleware.barberId),b=t(e=>e.BarberLoggedInMiddleware.barberEmail),c=y(),u=h.useRef(new AbortController);h.useEffect(()=>{const e=new AbortController;return u.current=e,c(I(d,m,e.signal)),()=>{u.current&&u.current.abort()}},[d,c]);const p=t(e=>e.getBarberQueueList),{loading:i,resolve:l,queueList:o}=p,a=t(w)==="On",g=e=>{const s=window.confirm("Are you Sure ?"),_={barberEmail:b,barberId:e.barberId,salonId:d,services:e.services,_id:e._id};s&&c(C(_,d,e.barberId))},x=e=>{const s=window.confirm("Are you Sure ?"),_={barberEmail:b,barberId:e.barberId,salonId:d,_id:e._id};s&&(console.log(_),c(S(_,d,e.barberId)))},j=t(e=>e.adminServeQueue),{loading:v}=j,q=t(e=>e.adminCancelQueue),{loading:k}=q;return r.jsxs("div",{className:`${n.barber_queue_wrapper} ${a&&n.dark}`,children:[r.jsx("div",{children:r.jsx("p",{children:"Queue List"})}),r.jsx("div",{className:`${n.barber_queue_content_wrapper} ${a&&n.dark}`,children:i&&!l?r.jsx("div",{className:n.barber_queue_content_body,children:r.jsx(f,{count:6,height:"6rem",style:{marginBottom:"1rem"},baseColor:a?"var(--darkmode-loader-bg-color)":"var(--lightmode-loader-bg-color)",highlightColor:a?"var(--darkmode-loader-highlight-color)":"var(--lightmode-loader-highlight-color)"})}):!i&&l&&(o==null?void 0:o.length)>0?r.jsx(r.Fragment,{children:r.jsxs("div",{className:`${n.barber_queue_content_body} ${a&&n.dark}`,children:[r.jsxs("div",{children:[r.jsx("p",{children:"Name"}),r.jsx("p",{children:"Time Joined Q"}),r.jsx("p",{children:"Barber Name"}),r.jsx("p",{children:"Q Postion"}),r.jsx("p",{children:"Type"}),r.jsx("p",{children:"Serve"}),r.jsx("p",{children:"Cancel"})]}),o==null?void 0:o.map((e,s)=>r.jsxs("div",{className:`${n.barber_queue_content_body_item} ${a&&n.dark}`,style:{borderBottom:o.length-1===s&&"none"},children:[r.jsx("p",{children:e.name}),r.jsx("p",{children:e.timeJoinedQ}),r.jsx("p",{children:e.barberName}),r.jsx("p",{children:e.qPosition}),r.jsx("div",{children:e.serviceType==="VIP"?r.jsx(Q,{}):"-"}),r.jsx("div",{children:r.jsx("button",{onClick:()=>g(e),disabled:v,children:"Serve"})}),r.jsx("div",{children:r.jsx("button",{onClick:()=>x(e),disabled:k,children:"Cancel"})})]},e._id))]})}):!i&&l&&(o==null?void 0:o.length)==0?r.jsx("div",{className:`${n.barber_queue_content_body_error} ${a&&n.dark}`,children:r.jsx("p",{children:"Queue not available"})}):!i&&!l&&r.jsx("div",{className:`${n.barber_queue_content_body_error} ${a&&n.dark}`,children:r.jsx("p",{children:"Queue not available"})})})]})};export{P as default};
