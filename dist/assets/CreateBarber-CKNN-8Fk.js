import{b as _,a as ne,u as se,r as n,d as ce,j as e,a5 as W,o as P,ab as K,C as de,_ as oe}from"./index-DoPeqlwO.js";import{f as le,h as _e}from"./BarberAction-DFrXqmau.js";import{B as me}from"./ButtonLoader-XkGrsuR2.js";import{l as be,U as pe}from"./libphonenumber-DD1OFVFq.js";import{S as R}from"./Skeleton-BJCyXYAZ.js";import{M as he}from"./Modal-fN4Jvzzt.js";import"./clsx-B-dksMZM.js";import"./index-CMeGkAow.js";import"./index-8JwjhRSi.js";import"./getReactElementRef-DHZxZ94R.js";const ve="_admin_create_barber_wrapper_ys6fj_1",je="_admin_create_barber_wrapper_left_ys6fj_17",xe="_admin_create_barber_content_wrapper_left_ys6fj_35",ue="_create_barber_btn_ys6fj_72",ge="_admin_create_barber_wrapper_right_ys6fj_103",fe="_admin_create_barber_content_wrapper_right_ys6fj_125",Ne="_service_item_ys6fj_164",ye="_service_add_icon_ys6fj_179",we="_service_delete_icon_ys6fj_210",Ce="_service_item_top_ys6fj_241",Se="_service_item_bottom_ys6fj_295",Ee="_admin_create_barber_content_wrapper_right_error_ys6fj_376",ke="_admin_create_barber_content_wrapper_right_loading_ys6fj_396",Ie="_mobile_modal_ys6fj_410",$e="_add_services_btn_ys6fj_411",Ae="_mobile_add_services_ys6fj_412",De="_mobile_service_container_ys6fj_464",t={admin_create_barber_wrapper:ve,admin_create_barber_wrapper_left:je,admin_create_barber_content_wrapper_left:xe,create_barber_btn:ue,admin_create_barber_wrapper_right:ge,admin_create_barber_content_wrapper_right:fe,service_item:Ne,service_add_icon:ye,service_delete_icon:we,service_item_top:Ce,service_item_bottom:Se,admin_create_barber_content_wrapper_right_error:Ee,admin_create_barber_content_wrapper_right_loading:ke,mobile_modal:Ie,add_services_btn:$e,mobile_add_services:Ae,mobile_service_container:De},Je=()=>{const h=_(r=>r.AdminLoggedInMiddleware.adminSalonId),L=ne(),v=se(),[u,g]=n.useState(""),[f,N]=n.useState(""),[y,w]=n.useState(""),[C,H]=n.useState(""),[U,Y]=n.useState(""),[S,E]=n.useState(""),m=_(r=>r.AdminLoggedInMiddleware.entiredata.user[0]),j=n.useRef(new AbortController);n.useEffect(()=>{if((m==null?void 0:m.salonId)!==0){const r=new AbortController;return j.current=r,v(le(h,r.signal)),()=>{j.current&&j.current.abort()}}},[h,v,m]);const J=_(r=>r.adminAllSalonServices),{loading:F,resolve:z,response:s}=J,[d,k]=n.useState([]),[b,x]=n.useState({});n.useEffect(()=>{if(s){const r={};s.forEach(a=>{r[a._id]=a.serviceEWT}),x(r)}},[s]);const I=r=>{k([...d,r])},$=r=>{k(d.filter(i=>i._id!==r._id));const a={};s.forEach(i=>{a[i._id]=i.serviceEWT}),x(a)},A=(r,a)=>{x({...b,[r]:Number(a)})};n.useEffect(()=>{const r=JSON.parse(localStorage.getItem("barberdata"))||{};g(r.name),N(r.email),w(r.nickName),E(r.dateOfBirth)},[]);const[q,D]=n.useState(!1),B=()=>{if(q)oe.error("Invalid Number",{duration:3e3,style:{fontSize:"var(--list-modal-header-normal-font)",borderRadius:"0.3rem",background:"#333",color:"#fff"}});else{const r={name:u,email:f,nickName:y,mobileNumber:Number(C),countryCode:Number(U),dateOfBirth:S,salonId:h,barberServices:d.map(a=>({...a,barberServiceEWT:b[a._id]}))};v(_e(r,L))}},o=r=>{r.key==="Enter"&&B()},Q=_(r=>r.adminCreateBarber),{loading:X}=Q,O=_(ce)==="On",V=be.PhoneNumberUtil.getInstance(),Z=r=>{try{return V.isValidNumber(V.parseAndKeepRawInput(r))}catch{return!1}},[G,ee]=n.useState("gb"),re=(r,a,i)=>{const{country:c,inputValue:Oe}=a;Z(r)?(H(r),Y(c==null?void 0:c.dialCode),ee(c==null?void 0:c.iso2),D(!1)):D(!0)},p=(r,a,i)=>{r(a);const c=JSON.parse(localStorage.getItem("barberdata"))||{};localStorage.setItem("barberdata",JSON.stringify({...c,[i]:a}))},ae=_(r=>r.adminGetDefaultSalon),{response:l}=ae,[te,M]=n.useState(!1),ie=()=>M(!0),T=()=>M(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${t.admin_create_barber_wrapper} ${O&&t.dark}`,children:[e.jsxs("div",{className:`${t.admin_create_barber_wrapper_right}`,children:[e.jsx("div",{children:e.jsx("p",{children:"Add Your Services"})}),F?e.jsxs("div",{className:`${t.admin_create_barber_content_wrapper_right_loading}`,children:[e.jsx(R,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}}),e.jsx(R,{variant:"rectangular",width:"100%",height:"16rem",style:{borderRadius:"var(--list-wrapper-border-radius)"}})]}):z&&(s==null?void 0:s.length)>0?e.jsx("div",{className:`${t.admin_create_barber_content_wrapper_right}`,children:s==null?void 0:s.map(r=>{var a;return e.jsxs("div",{className:`${t.service_item}`,children:[e.jsxs("div",{className:`${t.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${t.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(W,{})}),e.jsx("input",{type:"text",value:b[r._id],onChange:i=>{const c=i.target.value.replace(/[^0-9]/g,"");A(r._id,c)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(i=>i._id===r._id)?e.jsx("button",{className:`${t.service_delete_icon}`,onClick:()=>$(r),children:e.jsx(P,{})}):e.jsx("button",{className:`${t.service_add_icon}`,onClick:()=>I(r),children:e.jsx(K,{})})]},r._id)})}):e.jsx("div",{className:`${t.admin_create_barber_content_wrapper_right_error}`,children:e.jsx("p",{children:"No services available"})})]}),e.jsxs("div",{className:`${t.admin_create_barber_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Create Barber"}),e.jsx("button",{onClick:ie,className:t.add_services_btn,children:"Add Services"})]}),e.jsxs("div",{className:`${t.admin_create_barber_content_wrapper_left}`,children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"text",value:u,placeholder:"Enter Name",onChange:r=>p(g,r.target.value,"name"),onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"text",value:f,placeholder:"Enter Email",onChange:r=>p(N,r.target.value,"email"),onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Nick Name"}),e.jsx("input",{type:"text",value:y,placeholder:"Enter Nick Name",onChange:r=>p(w,r.target.value,"nickName"),onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Mob. Number"}),e.jsx("div",{children:e.jsx("div",{onKeyDown:o,children:e.jsx(pe,{forceDialCode:!0,defaultCountry:G,value:C,onChange:(r,a)=>re(r,a)})})})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"DD/MM/YY",value:S,onChange:r=>p(E,r.target.value,"dateOfBirth"),style:{colorScheme:O?"dark":"light"},onKeyDown:o})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Selected Services"}),e.jsx("input",{type:"text",value:d==null?void 0:d.map(r=>" "+r.serviceName),placeholder:"Your Services",onKeyDown:o})]}),X?e.jsx("button",{className:`${t.create_barber_btn}`,style:{display:"grid",placeItems:"center"},children:e.jsx(me,{})}):e.jsx("button",{className:`${t.create_barber_btn}`,onClick:B,children:"Create"}),e.jsx(he,{open:te,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:t.mobile_modal,children:e.jsxs("div",{className:t.mobile_service_container,children:[e.jsx("button",{onClick:T,children:e.jsx(de,{})}),e.jsx("div",{children:s==null?void 0:s.map(r=>{var a;return e.jsxs("div",{className:`${t.service_item}`,children:[e.jsxs("div",{className:`${t.service_item_top}`,children:[e.jsx("div",{children:e.jsx("img",{src:(a=r==null?void 0:r.serviceIcon)==null?void 0:a.url,alt:"service icon"})}),e.jsxs("div",{children:[e.jsx("p",{children:r==null?void 0:r.serviceName}),e.jsx("p",{children:r!=null&&r.vipService?"VIP":"Regular"}),e.jsx("p",{children:r==null?void 0:r.serviceDesc})]})]}),e.jsxs("div",{className:`${t.service_item_bottom}`,children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Service Price"}),e.jsxs("p",{children:[l==null?void 0:l.currency,r==null?void 0:r.servicePrice]})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{children:"Est Wait Time"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(W,{})}),e.jsx("input",{type:"text",value:b[r._id],onChange:i=>{const c=i.target.value.replace(/[^0-9]/g,"");A(r._id,c)}}),e.jsx("p",{children:"mins"})]})]})})]}),d.find(i=>i._id===r._id)?e.jsx("button",{className:`${t.service_delete_icon}`,onClick:()=>$(r),children:e.jsx(P,{})}):e.jsx("button",{className:`${t.service_add_icon}`,onClick:()=>I(r),children:e.jsx(K,{})})]},r._id)})})]})})]})]})]})})};export{Je as default};
